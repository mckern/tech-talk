var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}if(!function webpackUniversalModuleDefinition(root,factory){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.io=factory():root.io=factory()}(this,function(){return modules=[function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return void 0===obj?"undefined":_typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":void 0===obj?"undefined":_typeof2(obj)},url=__webpack_require__(1),parser=__webpack_require__(7),Manager=__webpack_require__(17),debug=__webpack_require__(3)("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};function lookup(uri,opts){"object"===(void 0===uri?"undefined":_typeof(uri))&&(opts=uri,uri=void 0),opts=opts||{};var io,parsed=url(uri),source=parsed.source,id=parsed.id,path=parsed.path,sameNamespace=cache[id]&&path in cache[id].nsps;return io=opts.forceNew||opts["force new connection"]||!1===opts.multiplex||sameNamespace?(debug("ignoring socket cache for %s",source),Manager(source,opts)):(cache[id]||(debug("new io instance for %s",source),cache[id]=Manager(source,opts)),cache[id]),parsed.query&&!opts.query?opts.query=parsed.query:opts&&"object"===_typeof(opts.query)&&(opts.query=function encodeQueryString(obj){var str=[];for(var p in obj)obj.hasOwnProperty(p)&&str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")}(opts.query)),io.socket(parsed.path,opts)}exports.protocol=parser.protocol,exports.connect=lookup,exports.Manager=__webpack_require__(17),exports.Socket=__webpack_require__(44)},function(module,exports,__webpack_require__){(function(global){"use strict";var parseuri=__webpack_require__(2),debug=__webpack_require__(3)("socket.io-client:url");module.exports=function url(uri,loc){var obj=uri;loc=loc||global.location,null==uri&&(uri=loc.protocol+"//"+loc.host);"string"==typeof uri&&("/"===uri.charAt(0)&&(uri="/"===uri.charAt(1)?loc.protocol+uri:loc.host+uri),/^(https?|wss?):\/\//.test(uri)||(debug("protocol-less url %s",uri),uri=void 0!==loc?loc.protocol+"//"+uri:"https://"+uri),debug("parse %s",uri),obj=parseuri(uri));obj.port||(/^(http|ws)$/.test(obj.protocol)?obj.port="80":/^(http|ws)s$/.test(obj.protocol)&&(obj.port="443"));obj.path=obj.path||"/";var host=-1!==obj.host.indexOf(":")?"["+obj.host+"]":obj.host;return obj.id=obj.protocol+"://"+host+":"+obj.port,obj.href=obj.protocol+"://"+host+(loc&&loc.port===obj.port?"":":"+obj.port),obj}}).call(exports,function(){return this}())},function(module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function parseuri(str){var src=str,b=str.indexOf("["),e=str.indexOf("]");-1!=b&&-1!=e&&(str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length));for(var m=re.exec(str||""),uri={},i=14;i--;)uri[parts[i]]=m[i]||"";return-1!=b&&-1!=e&&(uri.source=src,uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":"),uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":"),uri.ipv6uri=!0),uri}},function(module,exports,__webpack_require__){(function(process){function load(){try{return exports.storage.debug}catch(e){}if(void 0!==process&&"env"in process)return process.env.DEBUG}(exports=module.exports=__webpack_require__(5)).log=function log(){return"object"===("undefined"==typeof console?"undefined":_typeof2(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},exports.formatArgs=function formatArgs(){var args=arguments,useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0,lastC=0;return args[0].replace(/%[a-z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c),args},exports.save=function save(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces}catch(e){}},exports.load=load,exports.useColors=function useColors(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(e){}}(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}},exports.enable(load())}).call(exports,__webpack_require__(4))},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){(exports=module.exports=debug.debug=debug).coerce=function coerce(val){return val instanceof Error?val.stack||val.message:val},exports.disable=function disable(){exports.enable("")},exports.enable=function enable(namespaces){exports.save(namespaces);for(var split=(namespaces||"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"))[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))},exports.enabled=function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0;return!1},exports.humanize=__webpack_require__(6),exports.names=[],exports.skips=[],exports.formatters={};var prevTime,prevColor=0;function debug(namespace){function disabled(){}function enabled(){var self=enabled,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,null==self.useColors&&(self.useColors=exports.useColors()),null==self.color&&self.useColors&&(self.color=function selectColor(){return exports.colors[prevColor++%exports.colors.length]}());for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&(args=["%o"].concat(args));var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),args=exports.formatArgs.apply(self,args),(enabled.log||exports.log||console.log.bind(console)).apply(self,args)}enabled.enabled=!(disabled.enabled=!1);var fn=exports.enabled(namespace)?enabled:disabled;return fn.namespace=namespace,fn}},function(module,exports){var s=1e3,m=6e4,h=36e5,d=24*h;function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}module.exports=function(val,options){options=options||{};var type=void 0===val?"undefined":_typeof2(val);if("string"===type&&0<val.length)return function parse(str){if(1e4<(str=String(str)).length)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(val);if("number"===type&&!1===isNaN(val))return options.long?function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}(val):function fmtShort(ms){if(d<=ms)return Math.round(ms/d)+"d";if(h<=ms)return Math.round(ms/h)+"h";if(m<=ms)return Math.round(ms/m)+"m";if(s<=ms)return Math.round(ms/s)+"s";return ms+"ms"}(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},function(module,exports,__webpack_require__){var debug=__webpack_require__(8)("socket.io-parser"),json=__webpack_require__(11),Emitter=__webpack_require__(13),binary=__webpack_require__(14),isBuf=__webpack_require__(16);function Encoder(){}function encodeAsString(obj){var str="",nsp=!1;return str+=obj.type,exports.BINARY_EVENT!=obj.type&&exports.BINARY_ACK!=obj.type||(str+=obj.attachments,str+="-"),obj.nsp&&"/"!=obj.nsp&&(nsp=!0,str+=obj.nsp),null!=obj.id&&(nsp&&(str+=",",nsp=!1),str+=obj.id),null!=obj.data&&(nsp&&(str+=","),str+=json.stringify(obj.data)),debug("encoded %j as %s",obj,str),str}function Decoder(){this.reconstructor=null}function BinaryReconstructor(packet){this.reconPack=packet,this.buffers=[]}function error(){return{type:exports.ERROR,data:"parser error"}}exports.protocol=4,exports.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=Encoder,exports.Decoder=Decoder,Encoder.prototype.encode=function(obj,callback){(debug("encoding packet %j",obj),exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type)?function encodeAsBinary(obj,callback){binary.removeBlobs(obj,function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData),pack=encodeAsString(deconstruction.packet),buffers=deconstruction.buffers;buffers.unshift(pack),callback(buffers)})}(obj,callback):callback([encodeAsString(obj)])},Emitter(Decoder.prototype),Decoder.prototype.add=function(obj){var packet;if("string"==typeof obj)packet=function decodeString(str){var p={},i=0;if(p.type=Number(str.charAt(0)),null==exports.types[p.type])return error();if(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){for(var buf="";"-"!=str.charAt(++i)&&(buf+=str.charAt(i),i!=str.length););if(buf!=Number(buf)||"-"!=str.charAt(i))throw new Error("Illegal attachments");p.attachments=Number(buf)}if("/"==str.charAt(i+1))for(p.nsp="";++i;){if(","==(c=str.charAt(i)))break;if(p.nsp+=c,i==str.length)break}else p.nsp="/";var next=str.charAt(i+1);if(""!==next&&Number(next)==next){for(p.id="";++i;){var c;if(null==(c=str.charAt(i))||Number(c)!=c){--i;break}if(p.id+=str.charAt(i),i==str.length)break}p.id=Number(p.id)}str.charAt(++i)&&(p=function tryParse(p,str){try{p.data=json.parse(str)}catch(e){return error()}return p}(p,str.substr(i)));return debug("decoded %s as %j",str,p),p}(obj),exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type?(this.reconstructor=new BinaryReconstructor(packet),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",packet)):this.emit("decoded",packet);else{if(!isBuf(obj)&&!obj.base64)throw new Error("Unknown type: "+obj);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(packet=this.reconstructor.takeBinaryData(obj))&&(this.reconstructor=null,this.emit("decoded",packet))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(binData){if(this.buffers.push(binData),this.buffers.length!=this.reconPack.attachments)return null;var packet=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),packet},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(module,exports,__webpack_require__){function load(){var r;try{r=exports.storage.debug}catch(e){}return r}(exports=module.exports=__webpack_require__(9)).log=function log(){return"object"===("undefined"==typeof console?"undefined":_typeof2(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},exports.formatArgs=function formatArgs(){var args=arguments,useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0,lastC=0;return args[0].replace(/%[a-z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c),args},exports.save=function save(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces}catch(e){}},exports.load=load,exports.useColors=function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(e){}}(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){return JSON.stringify(v)},exports.enable(load())},function(module,exports,__webpack_require__){(exports=module.exports=function debug(namespace){function disabled(){}function enabled(){var self=enabled,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,null==self.useColors&&(self.useColors=exports.useColors()),null==self.color&&self.useColors&&(self.color=function selectColor(){return exports.colors[prevColor++%exports.colors.length]}());var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&(args=["%o"].concat(args));var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),"function"==typeof exports.formatArgs&&(args=exports.formatArgs.apply(self,args)),(enabled.log||exports.log||console.log.bind(console)).apply(self,args)}disabled.enabled=!1,enabled.enabled=!0;var fn=exports.enabled(namespace)?enabled:disabled;return fn.namespace=namespace,fn}).coerce=function coerce(val){return val instanceof Error?val.stack||val.message:val},exports.disable=function disable(){exports.enable("")},exports.enable=function enable(namespaces){exports.save(namespaces);for(var split=(namespaces||"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/\*/g,".*?"))[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))},exports.enabled=function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0;return!1},exports.humanize=__webpack_require__(10),exports.names=[],exports.skips=[],exports.formatters={};var prevTime,prevColor=0},function(module,exports){var s=1e3,m=6e4,h=36e5,d=24*h;function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}module.exports=function(val,options){return options=options||{},"string"==typeof val?function parse(str){if(1e4<(str=""+str).length)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}(val):options.long?function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}(val):function short(ms){return d<=ms?Math.round(ms/d)+"d":h<=ms?Math.round(ms/h)+"h":m<=ms?Math.round(ms/m)+"m":s<=ms?Math.round(ms/s)+"s":ms+"ms"}(val)}},function(module,exports,__webpack_require__){(function(module,global){(function(){var objectTypes={function:!0,object:!0},freeExports=objectTypes[void 0===exports?"undefined":_typeof2(exports)]&&exports&&!exports.nodeType&&exports,root=objectTypes["undefined"==typeof window?"undefined":_typeof2(window)]&&window||this,freeGlobal=freeExports&&objectTypes[void 0===module?"undefined":_typeof2(module)]&&module&&!module.nodeType&&"object"==(void 0===global?"undefined":_typeof2(global))&&global;function runInContext(context,exports){context=context||root.Object(),exports=exports||root.Object();var Number=context.Number||root.Number,String=context.String||root.String,Object=context.Object||root.Object,Date=context.Date||root.Date,SyntaxError=context.SyntaxError||root.SyntaxError,TypeError=context.TypeError||root.TypeError,Math=context.Math||root.Math,nativeJSON=context.JSON||root.JSON;"object"==(void 0===nativeJSON?"undefined":_typeof2(nativeJSON))&&nativeJSON&&(exports.stringify=nativeJSON.stringify,exports.parse=nativeJSON.parse);var _isProperty,_forEach,undef,objectProto=Object.prototype,getClass=objectProto.toString,isExtended=new Date(-0xc782b5b800cec);try{isExtended=-109252==isExtended.getUTCFullYear()&&0===isExtended.getUTCMonth()&&1===isExtended.getUTCDate()&&10==isExtended.getUTCHours()&&37==isExtended.getUTCMinutes()&&6==isExtended.getUTCSeconds()&&708==isExtended.getUTCMilliseconds()}catch(exception){}function has(name){if(has[name]!==undef)return has[name];var isSupported;if("bug-string-char-index"==name)isSupported="a"!="a"[0];else if("json"==name)isSupported=has("json-stringify")&&has("json-parse");else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==name){var stringify=exports.stringify,stringifySupported="function"==typeof stringify&&isExtended;if(stringifySupported){(value=function value(){return 1}).toJSON=value;try{stringifySupported="0"===stringify(0)&&"0"===stringify(new Number)&&'""'==stringify(new String)&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&"1"===stringify(value)&&"[1]"==stringify([value])&&"[null]"==stringify([undef])&&"null"==stringify(null)&&"[null,null,null]"==stringify([undef,getClass,null])&&stringify({a:[value,!0,!1,null,"\0\b\n\f\r\t"]})==serialized&&"1"===stringify(null,value)&&"[\n 1,\n 2\n]"==stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==stringify(new Date(-1))}catch(exception){stringifySupported=!1}}isSupported=stringifySupported}if("json-parse"==name){var parse=exports.parse;if("function"==typeof parse)try{if(0===parse("0")&&!parse(!1)){var parseSupported=5==(value=parse(serialized)).a.length&&1===value.a[0];if(parseSupported){try{parseSupported=!parse('"\t"')}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("01")}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("1.")}catch(exception){}}}}catch(exception){parseSupported=!1}isSupported=parseSupported}}return has[name]=!!isSupported}if(!has("json")){var charIndexBuggy=has("bug-string-char-index");if(!isExtended)var floor=Math.floor,Months=[0,31,59,90,120,151,181,212,243,273,304,334],getDay=function getDay(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(1<month)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)};if((_isProperty=objectProto.hasOwnProperty)||(_isProperty=function isProperty(property){var constructor,members={};return _isProperty=(members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass?function isProperty(property){var original=this.__proto__,result=property in(this.__proto__=null,this);return this.__proto__=original,result}:(constructor=members.constructor,function isProperty(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}),members=null,_isProperty.call(this,property)}),_forEach=function forEach(object,callback){var Properties,members,property,size=0;for(property in(Properties=function Properties(){this.valueOf=0}).prototype.valueOf=0,members=new Properties)_isProperty.call(members,property)&&size++;return Properties=members=null,(_forEach=size?2==size?function forEach(object,callback){var property,members={},isFunction="[object Function]"==getClass.call(object);for(property in object)isFunction&&"prototype"==property||_isProperty.call(members,property)||!(members[property]=1)||!_isProperty.call(object,property)||callback(property)}:function forEach(object,callback){var property,isConstructor,isFunction="[object Function]"==getClass.call(object);for(property in object)isFunction&&"prototype"==property||!_isProperty.call(object,property)||(isConstructor="constructor"===property)||callback(property);(isConstructor||_isProperty.call(object,property="constructor"))&&callback(property)}:(members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function forEach(object,callback){var property,length,isFunction="[object Function]"==getClass.call(object),hasProperty=!isFunction&&"function"!=typeof object.constructor&&objectTypes[_typeof2(object.hasOwnProperty)]&&object.hasOwnProperty||_isProperty;for(property in object)isFunction&&"prototype"==property||!hasProperty.call(object,property)||callback(property);for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}))(object,callback)},!has("json-stringify")){function toPaddedString(width,value){return("000000"+(value||0)).slice(-width)}function quote(value){for(var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||10<length,symbols=useCharIndex&&(charIndexBuggy?value.split(""):value);index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+="\\u00"+toPaddedString(2,charCode.toString(16));break}result+=useCharIndex?symbols[index]:value.charAt(index)}}return result+'"'}var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[void 0===filter?"undefined":_typeof2(filter)]&&filter)if("[object Function]"==(className=getClass.call(filter)))callback=filter;else if("[object Array]"==className){properties={};for(var value,index=0,length=filter.length;index<length;value=filter[index++],"[object String]"!=(className=getClass.call(value))&&"[object Number]"!=className||(properties[value]=1));}if(width)if("[object Number]"==(className=getClass.call(width))){if(0<(width-=width%1))for(whitespace="",10<width&&(width=10);whitespace.length<width;whitespace+=" ");}else"[object String]"==className&&(whitespace=width.length<=10?width:width.slice(0,10));return function serialize(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if("object"==(void 0===value?"undefined":_typeof2(value))&&value)if("[object Date]"!=(className=getClass.call(value))||_isProperty.call(value,"toJSON"))"function"==typeof value.toJSON&&("[object Number]"!=className&&"[object String]"!=className&&"[object Array]"!=className||_isProperty.call(value,"toJSON"))&&(value=value.toJSON(property));else if(-1/0<value&&value<1/0){if(getDay){for(date=floor(value/864e5),year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month),hours=floor((time=(value%864e5+864e5)%864e5)/36e5)%24,minutes=floor(time/6e4)%60,seconds=floor(time/1e3)%60,milliseconds=time%1e3}else year=value.getUTCFullYear(),month=value.getUTCMonth(),date=value.getUTCDate(),hours=value.getUTCHours(),minutes=value.getUTCMinutes(),seconds=value.getUTCSeconds(),milliseconds=value.getUTCMilliseconds();value=(year<=0||1e4<=year?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else value=null;if(callback&&(value=callback.call(object,property,value)),null===value)return"null";if("[object Boolean]"==(className=getClass.call(value)))return""+value;if("[object Number]"==className)return-1/0<value&&value<1/0?""+value:"null";if("[object String]"==className)return quote(""+value);if("object"==(void 0===value?"undefined":_typeof2(value))){for(length=stack.length;length--;)if(stack[length]===value)throw TypeError();if(stack.push(value),results=[],prefix=indentation,indentation+=whitespace,"[object Array]"==className){for(index=0,length=value.length;index<length;index++)element=serialize(index,value,callback,properties,whitespace,indentation,stack),results.push(element===undef?"null":element);result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else _forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);element!==undef&&results.push(quote(property)+":"+(whitespace?" ":"")+element)}),result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}";return stack.pop(),result}}("",((value={})[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){function abort(){throw Index=Source=null,SyntaxError()}function lex(){for(var value,begin,position,isSigned,charCode,source=Source,length=source.length;Index<length;)switch(charCode=source.charCodeAt(Index)){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:return value=charIndexBuggy?source.charAt(Index):source[Index],Index++,value;case 34:for(value="@",Index++;Index<length;)if((charCode=source.charCodeAt(Index))<32)abort();else if(92==charCode)switch(charCode=source.charCodeAt(++Index)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode],Index++;break;case 117:for(begin=++Index,position=Index+4;Index<position;Index++)48<=(charCode=source.charCodeAt(Index))&&charCode<=57||97<=charCode&&charCode<=102||65<=charCode&&charCode<=70||abort();value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}else{if(34==charCode)break;for(charCode=source.charCodeAt(Index),begin=Index;32<=charCode&&92!=charCode&&34!=charCode;)charCode=source.charCodeAt(++Index);value+=source.slice(begin,Index)}if(34==source.charCodeAt(Index))return Index++,value;abort();default:if(begin=Index,45==charCode&&(isSigned=!0,charCode=source.charCodeAt(++Index)),48<=charCode&&charCode<=57){for(48==charCode&&(48<=(charCode=source.charCodeAt(Index+1))&&charCode<=57)&&abort(),isSigned=!1;Index<length&&(48<=(charCode=source.charCodeAt(Index))&&charCode<=57);Index++);if(46==source.charCodeAt(Index)){for(position=++Index;position<length&&(48<=(charCode=source.charCodeAt(position))&&charCode<=57);position++);position==Index&&abort(),Index=position}if(101==(charCode=source.charCodeAt(Index))||69==charCode){for(43!=(charCode=source.charCodeAt(++Index))&&45!=charCode||Index++,position=Index;position<length&&(48<=(charCode=source.charCodeAt(position))&&charCode<=57);position++);position==Index&&abort(),Index=position}return+source.slice(begin,Index)}if(isSigned&&abort(),"true"==source.slice(Index,Index+4))return Index+=4,!0;if("false"==source.slice(Index,Index+5))return Index+=5,!1;if("null"==source.slice(Index,Index+4))return Index+=4,null;abort()}return"$"}function update(source,property,callback){var element=walk(source,property,callback);element===undef?delete source[property]:source[property]=element}var Index,Source,fromCharCode=String.fromCharCode,Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},walk=function walk(source,property,callback){var length,value=source[property];if("object"==(void 0===value?"undefined":_typeof2(value))&&value)if("[object Array]"==getClass.call(value))for(length=value.length;length--;)update(value,length,callback);else _forEach(value,function(property){update(value,property,callback)});return callback.call(source,property,value)};exports.parse=function(source,callback){var result,value;return Index=0,Source=""+source,result=function get(value){var results,hasMembers;if("$"==value&&abort(),"string"==typeof value){if("@"==(charIndexBuggy?value.charAt(0):value[0]))return value.slice(1);if("["==value){for(results=[];"]"!=(value=lex());hasMembers=hasMembers||!0)hasMembers&&(","==value?"]"==(value=lex())&&abort():abort()),","==value&&abort(),results.push(get(value));return results}if("{"==value){for(results={};"}"!=(value=lex());hasMembers=hasMembers||!0)hasMembers&&(","==value?"}"==(value=lex())&&abort():abort()),","!=value&&"string"==typeof value&&"@"==(charIndexBuggy?value.charAt(0):value[0])&&":"==lex()||abort(),results[value.slice(1)]=get(lex());return results}abort()}return value}(lex()),"$"!=lex()&&abort(),Index=Source=null,callback&&"[object Function]"==getClass.call(callback)?walk(((value={})[""]=result,value),"",callback):result}}}return exports.runInContext=runInContext,exports}if(!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal),freeExports)runInContext(root,freeExports);else{var nativeJSON=root.JSON,previousJSON=root.JSON3,isRestored=!1,JSON3=runInContext(root,root.JSON3={noConflict:function noConflict(){return isRestored||(isRestored=!0,root.JSON=nativeJSON,root.JSON3=previousJSON,nativeJSON=previousJSON=null),JSON3}});root.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}}).call(this)}).call(exports,__webpack_require__(12)(module),function(){return this}())},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children=[],module.webpackPolyfill=1),module}},function(module,exports){function Emitter(obj){if(obj)return function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}(obj)}(module.exports=Emitter).prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){var self=this;function on(){self.off(event,on),fn.apply(this,arguments)}return this._callbacks=this._callbacks||{},on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var cb,callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks[event],this;for(var i=0;i<callbacks.length;i++)if((cb=callbacks[i])===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks)for(var i=0,len=(callbacks=callbacks.slice(0)).length;i<len;++i)callbacks[i].apply(this,args);return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports,__webpack_require__){(function(global){var isArray=__webpack_require__(15),isBuf=__webpack_require__(16);exports.deconstructPacket=function(packet){var buffers=[],packetData=packet.data;var pack=packet;return pack.data=function _deconstructPacket(data){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:!0,num:buffers.length};return buffers.push(data),placeholder}if(isArray(data)){for(var newData=new Array(data.length),i=0;i<data.length;i++)newData[i]=_deconstructPacket(data[i]);return newData}if("object"!=(void 0===data?"undefined":_typeof2(data))||data instanceof Date)return data;newData={};for(var key in data)newData[key]=_deconstructPacket(data[key]);return newData}(packetData),pack.attachments=buffers.length,{packet:pack,buffers:buffers}},exports.reconstructPacket=function(packet,buffers){return packet.data=function _reconstructPacket(data){if(data&&data._placeholder)return buffers[data.num];if(isArray(data)){for(var i=0;i<data.length;i++)data[i]=_reconstructPacket(data[i]);return data}if(data&&"object"==(void 0===data?"undefined":_typeof2(data))){for(var key in data)data[key]=_reconstructPacket(data[key]);return data}return data}(packet.data),packet.attachments=void 0,packet},exports.removeBlobs=function(data,callback){var pendingBlobs=0,bloblessData=data;!function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if(global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader;fileReader.onload=function(){containingObject?containingObject[curKey]=this.result:bloblessData=this.result,--pendingBlobs||callback(bloblessData)},fileReader.readAsArrayBuffer(obj)}else if(isArray(obj))for(var i=0;i<obj.length;i++)_removeBlobs(obj[i],i,obj);else if(obj&&"object"==(void 0===obj?"undefined":_typeof2(obj))&&!isBuf(obj))for(var key in obj)_removeBlobs(obj[key],key,obj)}(bloblessData),pendingBlobs||callback(bloblessData)}}).call(exports,function(){return this}())},function(module,exports){module.exports=Array.isArray||function(arr){return"[object Array]"==Object.prototype.toString.call(arr)}},function(module,exports){(function(global){module.exports=function isBuf(obj){return global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return void 0===obj?"undefined":_typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":void 0===obj?"undefined":_typeof2(obj)},eio=__webpack_require__(18),Socket=__webpack_require__(44),Emitter=__webpack_require__(35),parser=__webpack_require__(7),on=__webpack_require__(46),bind=__webpack_require__(47),debug=__webpack_require__(3)("socket.io-client:manager"),indexOf=__webpack_require__(42),Backoff=__webpack_require__(48),has=Object.prototype.hasOwnProperty;function Manager(uri,opts){if(!(this instanceof Manager))return new Manager(uri,opts);uri&&"object"===(void 0===uri?"undefined":_typeof(uri))&&(opts=uri,uri=void 0),(opts=opts||{}).path=opts.path||"/socket.io",this.nsps={},this.subs=[],this.opts=opts,this.reconnection(!1!==opts.reconnection),this.reconnectionAttempts(opts.reconnectionAttempts||1/0),this.reconnectionDelay(opts.reconnectionDelay||1e3),this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3),this.randomizationFactor(opts.randomizationFactor||.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==opts.timeout?2e4:opts.timeout),this.readyState="closed",this.uri=uri,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new parser.Encoder,this.decoder=new parser.Decoder,this.autoConnect=!1!==opts.autoConnect,this.autoConnect&&this.open()}(module.exports=Manager).prototype.emitAll=function(){for(var nsp in this.emit.apply(this,arguments),this.nsps)has.call(this.nsps,nsp)&&this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)},Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps)has.call(this.nsps,nsp)&&(this.nsps[nsp].id=this.engine.id)},Emitter(Manager.prototype),Manager.prototype.reconnection=function(v){return arguments.length?(this._reconnection=!!v,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(v){return arguments.length?(this._reconnectionAttempts=v,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(v){return arguments.length?(this._reconnectionDelay=v,this.backoff&&this.backoff.setMin(v),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(v){return arguments.length?(this._randomizationFactor=v,this.backoff&&this.backoff.setJitter(v),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(v){return arguments.length?(this._reconnectionDelayMax=v,this.backoff&&this.backoff.setMax(v),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(v){return arguments.length?(this._timeout=v,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(fn,opts){if(debug("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri),this.engine=eio(this.uri,this.opts);var socket=this.engine,self=this;this.readyState="opening",this.skipReconnect=!1;var openSub=on(socket,"open",function(){self.onopen(),fn&&fn()}),errorSub=on(socket,"error",function(data){if(debug("connect_error"),self.cleanup(),self.readyState="closed",self.emitAll("connect_error",data),fn){var err=new Error("Connection error");err.data=data,fn(err)}else self.maybeReconnectOnOpen()});if(!1!==this._timeout){var timeout=this._timeout;debug("connect attempt will timeout after %d",timeout);var timer=setTimeout(function(){debug("connect attempt timed out after %d",timeout),openSub.destroy(),socket.close(),socket.emit("error","timeout"),self.emitAll("connect_timeout",timeout)},timeout);this.subs.push({destroy:function destroy(){clearTimeout(timer)}})}return this.subs.push(openSub),this.subs.push(errorSub),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var socket=this.engine;this.subs.push(on(socket,"data",bind(this,"ondata"))),this.subs.push(on(socket,"ping",bind(this,"onping"))),this.subs.push(on(socket,"pong",bind(this,"onpong"))),this.subs.push(on(socket,"error",bind(this,"onerror"))),this.subs.push(on(socket,"close",bind(this,"onclose"))),this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(data){this.decoder.add(data)},Manager.prototype.ondecoded=function(packet){this.emit("packet",packet)},Manager.prototype.onerror=function(err){debug("error",err),this.emitAll("error",err)},Manager.prototype.socket=function(nsp,opts){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp,opts),this.nsps[nsp]=socket;var self=this;socket.on("connecting",onConnecting),socket.on("connect",function(){socket.id=self.engine.id}),this.autoConnect&&onConnecting()}function onConnecting(){~indexOf(self.connecting,socket)||self.connecting.push(socket)}return socket},Manager.prototype.destroy=function(socket){var index=indexOf(this.connecting,socket);~index&&this.connecting.splice(index,1),this.connecting.length||this.close()},Manager.prototype.packet=function(packet){debug("writing packet %j",packet);var self=this;packet.query&&0===packet.type&&(packet.nsp+="?"+packet.query),self.encoding?self.packetBuffer.push(packet):(self.encoding=!0,this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++)self.engine.write(encodedPackets[i],packet.options);self.encoding=!1,self.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack)}},Manager.prototype.cleanup=function(){debug("cleanup");for(var subsLength=this.subs.length,i=0;i<subsLength;i++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){debug("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(reason){debug("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",reason),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts)debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var delay=this.backoff.duration();debug("will wait %dms before reconnect attempt",delay),this.reconnecting=!0;var timer=setTimeout(function(){self.skipReconnect||(debug("attempting reconnect"),self.emitAll("reconnect_attempt",self.backoff.attempts),self.emitAll("reconnecting",self.backoff.attempts),self.skipReconnect||self.open(function(err){err?(debug("reconnect attempt error"),self.reconnecting=!1,self.reconnect(),self.emitAll("reconnect_error",err.data)):(debug("reconnect success"),self.onreconnect())}))},delay);this.subs.push({destroy:function destroy(){clearTimeout(timer)}})}},Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",attempt)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(19)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(20),module.exports.parser=__webpack_require__(27)},function(module,exports,__webpack_require__){(function(global){var transports=__webpack_require__(21),Emitter=__webpack_require__(35),debug=__webpack_require__(3)("engine.io-client:socket"),index=__webpack_require__(42),parser=__webpack_require__(27),parseuri=__webpack_require__(2),parsejson=__webpack_require__(43),parseqs=__webpack_require__(36);function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);opts=opts||{},uri&&"object"===(void 0===uri?"undefined":_typeof2(uri))&&(opts=uri,uri=null),uri?(uri=parseuri(uri),opts.hostname=uri.host,opts.secure="https"===uri.protocol||"wss"===uri.protocol,opts.port=uri.port,uri.query&&(opts.query=uri.query)):opts.host&&(opts.hostname=parseuri(opts.host).host),this.secure=null!=opts.secure?opts.secure:global.location&&"https:"===location.protocol,opts.hostname&&!opts.port&&(opts.port=this.secure?"443":"80"),this.agent=opts.agent||!1,this.hostname=opts.hostname||(global.location?location.hostname:"localhost"),this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80),this.query=opts.query||{},"string"==typeof this.query&&(this.query=parseqs.decode(this.query)),this.upgrade=!1!==opts.upgrade,this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!opts.forceJSONP,this.jsonp=!1!==opts.jsonp,this.forceBase64=!!opts.forceBase64,this.enablesXDR=!!opts.enablesXDR,this.timestampParam=opts.timestampParam||"t",this.timestampRequests=opts.timestampRequests,this.transports=opts.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=opts.policyPort||843,this.rememberUpgrade=opts.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades,this.perMessageDeflate=!1!==opts.perMessageDeflate&&(opts.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=opts.pfx||null,this.key=opts.key||null,this.passphrase=opts.passphrase||null,this.cert=opts.cert||null,this.ca=opts.ca||null,this.ciphers=opts.ciphers||null,this.rejectUnauthorized=void 0===opts.rejectUnauthorized?null:opts.rejectUnauthorized,this.forceNode=!!opts.forceNode;var freeGlobal="object"===(void 0===global?"undefined":_typeof2(global))&&global;freeGlobal.global===freeGlobal&&(opts.extraHeaders&&0<Object.keys(opts.extraHeaders).length&&(this.extraHeaders=opts.extraHeaders),opts.localAddress&&(this.localAddress=opts.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}(module.exports=Socket).priorWebsocketSuccess=!1,Emitter(Socket.prototype),Socket.protocol=parser.protocol,(Socket.Socket=Socket).Transport=__webpack_require__(26),Socket.transports=__webpack_require__(21),Socket.parser=__webpack_require__(27),Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=function clone(obj){var o={};for(var i in obj)obj.hasOwnProperty(i)&&(o[i]=obj[i]);return o}(this.query);return query.EIO=parser.protocol,query.transport=name,this.id&&(query.sid=this.id),new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))transport="websocket";else{if(0===this.transports.length){var self=this;return void setTimeout(function(){self.emit("error","No transports available")},0)}transport=this.transports[0]}this.readyState="opening";try{transport=this.createTransport(transport)}catch(e){return this.transports.shift(),void this.open()}transport.open(),this.setTransport(transport)},Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name);var self=this;this.transport&&(debug("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=transport).on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})},Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1}),failed=!1,self=this;function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary}failed||(debug('probe transport "%s" opened',name),transport.send([{type:"ping",data:"probe"}]),transport.once("packet",function(msg){if(!failed)if("pong"===msg.type&&"probe"===msg.data){if(debug('probe transport "%s" pong',name),self.upgrading=!0,self.emit("upgrading",transport),!transport)return;Socket.priorWebsocketSuccess="websocket"===transport.name,debug('pausing current transport "%s"',self.transport.name),self.transport.pause(function(){failed||"closed"!==self.readyState&&(debug("changing transport and sending upgrade packet"),cleanup(),self.setTransport(transport),transport.send([{type:"upgrade"}]),self.emit("upgrade",transport),transport=null,self.upgrading=!1,self.flush())})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name,self.emit("upgradeError",err)}}))}function freezeTransport(){failed||(failed=!0,cleanup(),transport.close(),transport=null)}function onerror(err){var error=new Error("probe error: "+err);error.transport=transport.name,freezeTransport(),debug('probe transport "%s" failed because of error: %s',name,err),self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){transport&&to.name!==transport.name&&(debug('"%s" works - aborting "%s"',to.name,transport.name),freezeTransport())}function cleanup(){transport.removeListener("open",onTransportOpen),transport.removeListener("error",onerror),transport.removeListener("close",onTransportClose),self.removeListener("close",onclose),self.removeListener("upgrading",onupgrade)}Socket.priorWebsocketSuccess=!1,transport.once("open",onTransportOpen),transport.once("error",onerror),transport.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),transport.open()},Socket.prototype.onOpen=function(){if(debug("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;i<l;i++)this.probe(this.upgrades[i])}},Socket.prototype.onPacket=function(packet){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(debug('socket receive: type "%s", data "%s"',packet.type,packet.data),this.emit("packet",packet),this.emit("heartbeat"),packet.type){case"open":this.onHandshake(parsejson(packet.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var err=new Error("server error");err.code=packet.data,this.onError(err);break;case"message":this.emit("data",packet.data),this.emit("message",packet.data)}else debug('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(data){this.emit("handshake",data),this.id=data.sid,this.transport.query.sid=data.sid,this.upgrades=this.filterUpgrades(data.upgrades),this.pingInterval=data.pingInterval,this.pingTimeout=data.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){"closed"!==self.readyState&&self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)},Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer),self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout),self.ping(),self.onHeartbeat(self.pingTimeout)},self.pingInterval)},Socket.prototype.ping=function(){var self=this;this.sendPacket("ping",function(){self.emit("ping")})},Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(msg,options,fn){return this.sendPacket("message",msg,options,fn),this},Socket.prototype.sendPacket=function(type,data,options,fn){if("function"==typeof data&&(fn=data,data=void 0),"function"==typeof options&&(fn=options,options=null),"closing"!==this.readyState&&"closed"!==this.readyState){(options=options||{}).compress=!1!==options.compress;var packet={type:type,data:data,options:options};this.emit("packetCreate",packet),this.writeBuffer.push(packet),fn&&this.once("flush",fn),this.flush()}},Socket.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var self=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?waitForUpgrade():close()}):this.upgrading?waitForUpgrade():close()}function close(){self.onClose("forced close"),debug("socket closing - telling transport to close"),self.transport.close()}function cleanupAndClose(){self.removeListener("upgrade",cleanupAndClose),self.removeListener("upgradeError",cleanupAndClose),close()}function waitForUpgrade(){self.once("upgrade",cleanupAndClose),self.once("upgradeError",cleanupAndClose)}return this},Socket.prototype.onError=function(err){debug("socket error %j",err),Socket.priorWebsocketSuccess=!1,this.emit("error",err),this.onClose("transport error",err)},Socket.prototype.onClose=function(reason,desc){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){debug('socket close with reason: "%s"',reason);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",reason,desc),this.writeBuffer=[],this.prevBufferLen=0}},Socket.prototype.filterUpgrades=function(upgrades){for(var filteredUpgrades=[],i=0,j=upgrades.length;i<j;i++)~index(this.transports,upgrades[i])&&filteredUpgrades.push(upgrades[i]);return filteredUpgrades}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){var XMLHttpRequest=__webpack_require__(22),XHR=__webpack_require__(24),JSONP=__webpack_require__(39),websocket=__webpack_require__(40);exports.polling=function polling(opts){var xd=!1,xs=!1,jsonp=!1!==opts.jsonp;if(global.location){var isSSL="https:"===location.protocol,port=location.port;port=port||(isSSL?443:80),xd=opts.hostname!==location.hostname||port!==opts.port,xs=opts.secure!==isSSL}{if(opts.xdomain=xd,opts.xscheme=xs,"open"in new XMLHttpRequest(opts)&&!opts.forceJSONP)return new XHR(opts);if(!jsonp)throw new Error("JSONP disabled");return new JSONP(opts)}},exports.websocket=websocket}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){var hasCORS=__webpack_require__(23);module.exports=function(opts){var xdomain=opts.xdomain,xscheme=opts.xscheme,enablesXDR=opts.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||hasCORS))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!xscheme&&enablesXDR)return new XDomainRequest}catch(e){}if(!xdomain)try{return new(global[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(exports,function(){return this}())},function(module,exports){try{module.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(err){module.exports=!1}},function(module,exports,__webpack_require__){(function(global){var XMLHttpRequest=__webpack_require__(22),Polling=__webpack_require__(25),Emitter=__webpack_require__(35),inherit=__webpack_require__(37),debug=__webpack_require__(3)("engine.io-client:polling-xhr");function empty(){}function XHR(opts){if(Polling.call(this,opts),this.requestTimeout=opts.requestTimeout,global.location){var isSSL="https:"===location.protocol,port=location.port;port=port||(isSSL?443:80),this.xd=opts.hostname!==global.location.hostname||port!==opts.port,this.xs=opts.secure!==isSSL}else this.extraHeaders=opts.extraHeaders}function Request(opts){this.method=opts.method||"GET",this.uri=opts.uri,this.xd=!!opts.xd,this.xs=!!opts.xs,this.async=!1!==opts.async,this.data=void 0!==opts.data?opts.data:null,this.agent=opts.agent,this.isBinary=opts.isBinary,this.supportsBinary=opts.supportsBinary,this.enablesXDR=opts.enablesXDR,this.requestTimeout=opts.requestTimeout,this.pfx=opts.pfx,this.key=opts.key,this.passphrase=opts.passphrase,this.cert=opts.cert,this.ca=opts.ca,this.ciphers=opts.ciphers,this.rejectUnauthorized=opts.rejectUnauthorized,this.extraHeaders=opts.extraHeaders,this.create()}function unloadHandler(){for(var i in Request.requests)Request.requests.hasOwnProperty(i)&&Request.requests[i].abort()}module.exports=XHR,module.exports.Request=Request,inherit(XHR,Polling),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(opts){return(opts=opts||{}).uri=this.uri(),opts.xd=this.xd,opts.xs=this.xs,opts.agent=this.agent||!1,opts.supportsBinary=this.supportsBinary,opts.enablesXDR=this.enablesXDR,opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized,opts.requestTimeout=this.requestTimeout,opts.extraHeaders=this.extraHeaders,new Request(opts)},XHR.prototype.doWrite=function(data,fn){var isBinary="string"!=typeof data&&void 0!==data,req=this.request({method:"POST",data:data,isBinary:isBinary}),self=this;req.on("success",fn),req.on("error",function(err){self.onError("xhr post error",err)}),this.sendXhr=req},XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request(),self=this;req.on("data",function(data){self.onData(data)}),req.on("error",function(err){self.onError("xhr poll error",err)}),this.pollXhr=req},Emitter(Request.prototype),Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts),self=this;try{debug("xhr open %s: %s",this.method,this.uri),xhr.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in xhr.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&xhr.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if(this.supportsBinary&&(xhr.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?xhr.setRequestHeader("Content-type","application/octet-stream"):xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{xhr.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in xhr&&(xhr.withCredentials=!0),this.requestTimeout&&(xhr.timeout=this.requestTimeout),this.hasXDR()?(xhr.onload=function(){self.onLoad()},xhr.onerror=function(){self.onError(xhr.responseText)}):xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status||1223===xhr.status?self.onLoad():setTimeout(function(){self.onError(xhr.status)},0))},debug("xhr data %s",this.data),xhr.send(this.data)}catch(e){return void setTimeout(function(){self.onError(e)},0)}global.document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(data){this.emit("data",data),this.onSuccess()},Request.prototype.onError=function(err){this.emit("error",err),this.cleanup(!0)},Request.prototype.cleanup=function(fromError){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,fromError)try{this.xhr.abort()}catch(e){}global.document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===contentType)data=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{data=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var ui8Arr=new Uint8Array(this.xhr.response),dataArray=[],idx=0,length=ui8Arr.length;idx<length;idx++)dataArray.push(ui8Arr[idx]);data=String.fromCharCode.apply(null,dataArray)}else data=this.xhr.responseText}catch(e){this.onError(e)}null!=data&&this.onData(data)},Request.prototype.hasXDR=function(){return void 0!==global.XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},Request.requestsCount=0,Request.requests={},global.document&&(global.attachEvent?global.attachEvent("onunload",unloadHandler):global.addEventListener&&global.addEventListener("beforeunload",unloadHandler,!1))}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var Transport=__webpack_require__(26),parseqs=__webpack_require__(36),parser=__webpack_require__(27),inherit=__webpack_require__(37),yeast=__webpack_require__(38),debug=__webpack_require__(3)("engine.io-client:polling");module.exports=Polling;var hasXHR2=null!=new(__webpack_require__(22))({xdomain:!1}).responseType;function Polling(opts){var forceBase64=opts&&opts.forceBase64;hasXHR2&&!forceBase64||(this.supportsBinary=!1),Transport.call(this,opts)}inherit(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(onPause){var self=this;function pause(){debug("paused"),self.readyState="paused",onPause()}if(this.readyState="pausing",this.polling||!this.writable){var total=0;this.polling&&(debug("we are currently polling - waiting to pause"),total++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--total||pause()})),this.writable||(debug("we are currently writing - waiting to pause"),total++,this.once("drain",function(){debug("pre-pause writing complete"),--total||pause()}))}else pause()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data);parser.decodePayload(data,this.socket.binaryType,function callback(packet){if("opening"===self.readyState&&self.onOpen(),"close"===packet.type)return self.onClose(),!1;self.onPacket(packet)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){var self=this;function close(){debug("writing close packet"),self.write([{type:"close"}])}"open"===this.readyState?(debug("transport open - closing"),close()):(debug("transport not open - deferring close"),this.once("open",close))},Polling.prototype.write=function(packets){var self=this;this.writable=!1;function callbackfn(){self.writable=!0,self.emit("drain")}parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})},Polling.prototype.uri=function(){var query=this.query||{},schema=this.secure?"https":"http",port="";return!1!==this.timestampRequests&&(query[this.timestampParam]=yeast()),this.supportsBinary||query.sid||(query.b64=1),query=parseqs.encode(query),this.port&&("https"==schema&&443!==Number(this.port)||"http"==schema&&80!==Number(this.port))&&(port=":"+this.port),query.length&&(query="?"+query),schema+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+port+this.path+query}},function(module,exports,__webpack_require__){var parser=__webpack_require__(27);function Transport(opts){this.path=opts.path,this.hostname=opts.hostname,this.port=opts.port,this.secure=opts.secure,this.query=opts.query,this.timestampParam=opts.timestampParam,this.timestampRequests=opts.timestampRequests,this.readyState="",this.agent=opts.agent||!1,this.socket=opts.socket,this.enablesXDR=opts.enablesXDR,this.pfx=opts.pfx,this.key=opts.key,this.passphrase=opts.passphrase,this.cert=opts.cert,this.ca=opts.ca,this.ciphers=opts.ciphers,this.rejectUnauthorized=opts.rejectUnauthorized,this.forceNode=opts.forceNode,this.extraHeaders=opts.extraHeaders,this.localAddress=opts.localAddress}__webpack_require__(35)((module.exports=Transport).prototype),Transport.prototype.onError=function(msg,desc){var err=new Error(msg);return err.type="TransportError",err.description=desc,this.emit("error",err),this},Transport.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(packets){if("open"!==this.readyState)throw new Error("Transport not open");this.write(packets)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet)},Transport.prototype.onPacket=function(packet){this.emit("packet",packet)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(module,exports,__webpack_require__){(function(global){var base64encoder,keys=__webpack_require__(28),hasBinary=__webpack_require__(29),sliceBuffer=__webpack_require__(30),after=__webpack_require__(31),utf8=__webpack_require__(32);global&&global.ArrayBuffer&&(base64encoder=__webpack_require__(33));var isAndroid="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),isPhantomJS="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=keys(packets),err={type:"error",data:"parser error"},Blob=__webpack_require__(34);function map(ary,each,done){function eachWithIndex(i,el,cb){each(el,function(error,msg){result[i]=msg,cb(error,result)})}for(var result=new Array(ary.length),next=after(ary.length,done),i=0;i<ary.length;i++)eachWithIndex(i,ary[i],next)}exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){"function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=!1),"function"==typeof utf8encode&&(callback=utf8encode,utf8encode=null);var data=void 0===packet.data?void 0:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer)return function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var data=packet.data,contentArray=new Uint8Array(data),resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++)resultBuffer[i+1]=contentArray[i];return callback(resultBuffer.buffer)}(packet,supportsBinary,callback);if(Blob&&data instanceof global.Blob)return function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);if(dontSendBlobs)return function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var fr=new FileReader;return fr.onload=function(){packet.data=fr.result,exports.encodePacket(packet,supportsBinary,!0,callback)},fr.readAsArrayBuffer(packet.data)}(packet,supportsBinary,callback);var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob)}(packet,supportsBinary,callback);if(data&&data.base64)return function encodeBase64Object(packet,callback){var message="b"+exports.packets[packet.type]+packet.data.data;return callback(message)}(packet,callback);var encoded=packets[packet.type];return void 0!==packet.data&&(encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data)),callback(""+encoded)},exports.encodeBase64Packet=function(packet,callback){var b64data,message="b"+exports.packets[packet.type];if(Blob&&packet.data instanceof global.Blob){var fr=new FileReader;return fr.onload=function(){var b64=fr.result.split(",")[1];callback(message+b64)},fr.readAsDataURL(packet.data)}try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){for(var typed=new Uint8Array(packet.data),basic=new Array(typed.length),i=0;i<typed.length;i++)basic[i]=typed[i];b64data=String.fromCharCode.apply(null,basic)}return message+=global.btoa(b64data),callback(message)},exports.decodePacket=function(data,binaryType,utf8decode){if(void 0===data)return err;if("string"==typeof data){if("b"==data.charAt(0))return exports.decodeBase64Packet(data.substr(1),binaryType);if(utf8decode&&!1===(data=function tryDecode(data){try{data=utf8.decode(data)}catch(e){return!1}return data}(data)))return err;var type=data.charAt(0);return Number(type)==type&&packetslist[type]?1<data.length?{type:packetslist[type],data:data.substring(1)}:{type:packetslist[type]}:err}type=new Uint8Array(data)[0];var rest=sliceBuffer(data,1);return Blob&&"blob"===binaryType&&(rest=new Blob([rest])),{type:packetslist[type],data:rest}},exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!base64encoder)return{type:type,data:{base64:!0,data:msg.substr(1)}};var data=base64encoder.decode(msg.substr(1));return"blob"===binaryType&&Blob&&(data=new Blob([data])),{type:type,data:data}},exports.encodePayload=function(packets,supportsBinary,callback){"function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=null);var isBinary=hasBinary(packets);if(supportsBinary&&isBinary)return Blob&&!dontSendBlobs?exports.encodePayloadAsBlob(packets,callback):exports.encodePayloadAsArrayBuffer(packets,callback);if(!packets.length)return callback("0:");map(packets,function encodeOne(packet,doneCallback){exports.encodePacket(packet,!!isBinary&&supportsBinary,!0,function(message){doneCallback(null,function setLengthHeader(message){return message.length+":"+message}(message))})},function(err,results){return callback(results.join(""))})},exports.decodePayload=function(data,binaryType,callback){if("string"!=typeof data)return exports.decodePayloadAsBinary(data,binaryType,callback);var packet;if("function"==typeof binaryType&&(callback=binaryType,binaryType=null),""==data)return callback(err,0,1);for(var n,msg,length="",i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"!=chr)length+=chr;else{if(""==length||length!=(n=Number(length)))return callback(err,0,1);if(length!=(msg=data.substr(i+1,n)).length)return callback(err,0,1);if(msg.length){if(packet=exports.decodePacket(msg,binaryType,!0),err.type==packet.type&&err.data==packet.data)return callback(err,0,1);if(!1===callback(packet,i+n,l))return}i+=n,length=""}}return""!=length?callback(err,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(packets,callback){if(!packets.length)return callback(new ArrayBuffer(0));map(packets,function encodeOne(packet,doneCallback){exports.encodePacket(packet,!0,!0,function(data){return doneCallback(null,data)})},function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;return acc+(len="string"==typeof p?p.length:p.byteLength).toString().length+len+2},0),resultArray=new Uint8Array(totalLength),bufferIndex=0;return encodedPackets.forEach(function(p){var isString="string"==typeof p,ab=p;if(isString){for(var view=new Uint8Array(p.length),i=0;i<p.length;i++)view[i]=p.charCodeAt(i);ab=view.buffer}resultArray[bufferIndex++]=isString?0:1;var lenStr=ab.byteLength.toString();for(i=0;i<lenStr.length;i++)resultArray[bufferIndex++]=parseInt(lenStr[i]);resultArray[bufferIndex++]=255;for(view=new Uint8Array(ab),i=0;i<view.length;i++)resultArray[bufferIndex++]=view[i]}),callback(resultArray.buffer)})},exports.encodePayloadAsBlob=function(packets,callback){map(packets,function encodeOne(packet,doneCallback){exports.encodePacket(packet,!0,!0,function(encoded){var binaryIdentifier=new Uint8Array(1);if(binaryIdentifier[0]=1,"string"==typeof encoded){for(var view=new Uint8Array(encoded.length),i=0;i<encoded.length;i++)view[i]=encoded.charCodeAt(i);encoded=view.buffer,binaryIdentifier[0]=0}var lenStr=(encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size).toString(),lengthAry=new Uint8Array(lenStr.length+1);for(i=0;i<lenStr.length;i++)lengthAry[i]=parseInt(lenStr[i]);if(lengthAry[lenStr.length]=255,Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob)}})},function(err,results){return callback(new Blob(results))})},exports.decodePayloadAsBinary=function(data,binaryType,callback){"function"==typeof binaryType&&(callback=binaryType,binaryType=null);for(var bufferTail=data,buffers=[],numberTooLong=!1;0<bufferTail.byteLength;){for(var tailArray=new Uint8Array(bufferTail),isString=0===tailArray[0],msgLength="",i=1;255!=tailArray[i];i++){if(310<msgLength.length){numberTooLong=!0;break}msgLength+=tailArray[i]}if(numberTooLong)return callback(err,0,1);bufferTail=sliceBuffer(bufferTail,2+msgLength.length),msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString)try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg);msg="";for(i=0;i<typed.length;i++)msg+=String.fromCharCode(typed[i])}buffers.push(msg),bufferTail=sliceBuffer(bufferTail,msgLength)}var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,!0),i,total)})}}).call(exports,function(){return this}())},function(module,exports){module.exports=Object.keys||function keys(obj){var arr=[],has=Object.prototype.hasOwnProperty;for(var i in obj)has.call(obj,i)&&arr.push(i);return arr}},function(module,exports,__webpack_require__){(function(global){var isArray=__webpack_require__(15);module.exports=function hasBinary(data){return function _hasBinary(obj){if(!obj)return!1;if(global.Buffer&&global.Buffer.isBuffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File)return!0;if(isArray(obj)){for(var i=0;i<obj.length;i++)if(_hasBinary(obj[i]))return!0}else if(obj&&"object"==(void 0===obj?"undefined":_typeof2(obj)))for(var key in obj.toJSON&&"function"==typeof obj.toJSON&&(obj=obj.toJSON()),obj)if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key]))return!0;return!1}(data)}}).call(exports,function(){return this}())},function(module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;if(start=start||0,end=end||bytes,arraybuffer.slice)return arraybuffer.slice(start,end);if(start<0&&(start+=bytes),end<0&&(end+=bytes),bytes<end&&(end=bytes),bytes<=start||end<=start||0===bytes)return new ArrayBuffer(0);for(var abv=new Uint8Array(arraybuffer),result=new Uint8Array(end-start),i=start,ii=0;i<end;i++,ii++)result[ii]=abv[i];return result.buffer}},function(module,exports){function noop(){}module.exports=function after(count,callback,err_cb){var bail=!1;return err_cb=err_cb||noop,0===(proxy.count=count)?callback():proxy;function proxy(err,result){if(proxy.count<=0)throw new Error("after called too many times");--proxy.count,err?(bail=!0,callback(err),callback=err_cb):0!==proxy.count||bail||callback(null,result)}}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(module,global){!function(){var freeExports="object"==(void 0===exports?"undefined":_typeof2(exports))&&exports,freeGlobal=("object"==(void 0===module?"undefined":_typeof2(module))&&module&&module.exports,"object"==(void 0===global?"undefined":_typeof2(global))&&global);freeGlobal.global!==freeGlobal&&freeGlobal.window;var byteArray,byteCount,byteIndex,stringFromCharCode=String.fromCharCode;function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)55296<=(value=string.charCodeAt(counter++))&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){if(0==(4294967168&codePoint))return stringFromCharCode(codePoint);var symbol="";return 0==(4294965248&codePoint)?symbol=stringFromCharCode(codePoint>>6&31|192):0==(4294901760&codePoint)?(symbol=stringFromCharCode(codePoint>>12&15|224),symbol+=createByte(codePoint,6)):0==(4292870144&codePoint)&&(symbol=stringFromCharCode(codePoint>>18&7|240),symbol+=createByte(codePoint,12),symbol+=createByte(codePoint,6)),symbol+=stringFromCharCode(63&codePoint|128)}function readContinuationByte(){if(byteCount<=byteIndex)throw Error("Invalid byte index");var continuationByte=255&byteArray[byteIndex];if(byteIndex++,128==(192&continuationByte))return 63&continuationByte;throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1,codePoint;if(byteCount<byteIndex)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(byte1=255&byteArray[byteIndex],byteIndex++,0==(128&byte1))return byte1;if(192==(224&byte1)){if(128<=(codePoint=(31&byte1)<<6|readContinuationByte()))return codePoint;throw Error("Invalid continuation byte")}if(224==(240&byte1)){if(2048<=(codePoint=(15&byte1)<<12|readContinuationByte()<<6|readContinuationByte()))return codePoint;throw Error("Invalid continuation byte")}if(240==(248&byte1)&&65536<=(codePoint=(15&byte1)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())&&codePoint<=1114111)return codePoint;throw Error("Invalid WTF-8 detected")}var wtf8={version:"1.0.0",encode:function wtf8encode(string){for(var codePoints=ucs2decode(string),length=codePoints.length,index=-1,byteString="";++index<length;)byteString+=encodeCodePoint(codePoints[index]);return byteString},decode:function wtf8decode(byteString){byteArray=ucs2decode(byteString),byteCount=byteArray.length,byteIndex=0;for(var tmp,codePoints=[];!1!==(tmp=decodeSymbol());)codePoints.push(tmp);return function ucs2encode(array){for(var value,length=array.length,index=-1,output="";++index<length;)65535<(value=array[index])&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value);return output}(codePoints)}};void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return wtf8}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(exports,__webpack_require__(12)(module),function(){return this}())},function(module,exports){!function(){"use strict";for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;exports.encode=function(arraybuffer){var i,bytes=new Uint8Array(arraybuffer),len=bytes.length,base64="";for(i=0;i<len;i+=3)base64+=chars[bytes[i]>>2],base64+=chars[(3&bytes[i])<<4|bytes[i+1]>>4],base64+=chars[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64+=chars[63&bytes[i+2]];return len%3==2?base64=base64.substring(0,base64.length-1)+"=":len%3==1&&(base64=base64.substring(0,base64.length-2)+"=="),base64},exports.decode=function(base64){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*base64.length,len=base64.length,p=0;"="===base64[base64.length-1]&&(bufferLength--,"="===base64[base64.length-2]&&bufferLength--);var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4)encoded1=lookup[base64.charCodeAt(i)],encoded2=lookup[base64.charCodeAt(i+1)],encoded3=lookup[base64.charCodeAt(i+2)],encoded4=lookup[base64.charCodeAt(i+3)],bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return arraybuffer}}()},function(module,exports){(function(global){var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,blobSupported=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(ary){for(var i=0;i<ary.length;i++){var chunk=ary[i];if(chunk.buffer instanceof ArrayBuffer){var buf=chunk.buffer;if(chunk.byteLength!==buf.byteLength){var copy=new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength)),buf=copy.buffer}ary[i]=buf}}}function BlobBuilderConstructor(ary,options){options=options||{};var bb=new BlobBuilder;mapArrayBufferViews(ary);for(var i=0;i<ary.length;i++)bb.append(ary[i]);return options.type?bb.getBlob(options.type):bb.getBlob()}function BlobConstructor(ary,options){return mapArrayBufferViews(ary),new Blob(ary,options||{})}module.exports=blobSupported?blobSupportsArrayBufferView?global.Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){function Emitter(obj){if(obj)return function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}(obj)}(module.exports=Emitter).prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var cb,callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var i=0;i<callbacks.length;i++)if((cb=callbacks[i])===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks)for(var i=0,len=(callbacks=callbacks.slice(0)).length;i<len;++i)callbacks[i].apply(this,args);return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports){exports.encode=function(obj){var str="";for(var i in obj)obj.hasOwnProperty(i)&&(str.length&&(str+="&"),str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));return str},exports.decode=function(qs){for(var qry={},pairs=qs.split("&"),i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},function(module,exports){module.exports=function(a,b){function fn(){}fn.prototype=b.prototype,a.prototype=new fn,a.prototype.constructor=a}},function(module,exports){"use strict";var prev,alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0;function encode(num){for(var encoded="";encoded=alphabet[num%length]+encoded,0<(num=Math.floor(num/length)););return encoded}function yeast(){var now=encode(+new Date);return now!==prev?(seed=0,prev=now):now+"."+encode(seed++)}for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode,yeast.decode=function decode(str){var decoded=0;for(i=0;i<str.length;i++)decoded=decoded*length+map[str.charAt(i)];return decoded},module.exports=yeast},function(module,exports,__webpack_require__){(function(global){var Polling=__webpack_require__(25),inherit=__webpack_require__(37);module.exports=JSONPPolling;var callbacks,rNewline=/\n/g,rEscapedNewline=/\\n/g;function empty(){}function JSONPPolling(opts){Polling.call(this,opts),this.query=this.query||{},callbacks||(global.___eio||(global.___eio=[]),callbacks=global.___eio),this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)}),this.query.j=this.index,global.document&&global.addEventListener&&global.addEventListener("beforeunload",function(){self.script&&(self.script.onerror=empty)},!1)}inherit(JSONPPolling,Polling),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Polling.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var self=this,script=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),script.async=!0,script.src=this.uri(),script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];insertAt?insertAt.parentNode.insertBefore(script,insertAt):(document.head||document.body).appendChild(script),this.script=script,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe),document.body.removeChild(iframe)},100)},JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var iframe,form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="eio_iframe_"+this.index;form.className="socketio",form.style.position="absolute",form.style.top="-1000px",form.style.left="-1000px",form.target=id,form.method="POST",form.setAttribute("accept-charset","utf-8"),area.name="d",form.appendChild(area),document.body.appendChild(form),this.form=form,this.area=area}function complete(){initIframe(),fn()}function initIframe(){if(self.iframe)try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){(iframe=document.createElement("iframe")).name=self.iframeId,iframe.src="javascript:0"}iframe.id=self.iframeId,self.form.appendChild(iframe),self.iframe=iframe}this.form.action=this.uri(),initIframe(),data=data.replace(rEscapedNewline,"\\\n"),this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===self.iframe.readyState&&complete()}:this.iframe.onload=complete}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){var NodeWebSocket,Transport=__webpack_require__(26),parser=__webpack_require__(27),parseqs=__webpack_require__(36),inherit=__webpack_require__(37),yeast=__webpack_require__(38),debug=__webpack_require__(3)("engine.io-client:websocket"),BrowserWebSocket=global.WebSocket||global.MozWebSocket;if("undefined"==typeof window)try{NodeWebSocket=__webpack_require__(41)}catch(e){}var WebSocket=BrowserWebSocket;function WS(opts){opts&&opts.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=opts.perMessageDeflate,this.usingBrowserWebSocket=BrowserWebSocket&&!opts.forceNode,this.usingBrowserWebSocket||(WebSocket=NodeWebSocket),Transport.call(this,opts)}WebSocket||"undefined"!=typeof window||(WebSocket=NodeWebSocket),inherit(module.exports=WS,Transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var uri=this.uri(),opts={agent:this.agent,perMessageDeflate:this.perMessageDeflate};opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(opts.headers=this.extraHeaders),this.localAddress&&(opts.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new WebSocket(uri):new WebSocket(uri,void 0,opts)}catch(err){return this.emit("error",err)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen()},this.ws.onclose=function(){self.onClose()},this.ws.onmessage=function(ev){self.onData(ev.data)},this.ws.onerror=function(e){self.onError("websocket error",e)}},WS.prototype.write=function(packets){var self=this;this.writable=!1;for(var total=packets.length,i=0,l=total;i<l;i++)!function(packet){parser.encodePacket(packet,self.supportsBinary,function(data){if(!self.usingBrowserWebSocket){var opts={};if(packet.options&&(opts.compress=packet.options.compress),self.perMessageDeflate)("string"==typeof data?global.Buffer.byteLength(data):data.length)<self.perMessageDeflate.threshold&&(opts.compress=!1)}try{self.usingBrowserWebSocket?self.ws.send(data):self.ws.send(data,opts)}catch(e){debug("websocket closed before onclose event")}--total||done()})}(packets[i]);function done(){self.emit("flush"),setTimeout(function(){self.writable=!0,self.emit("drain")},0)}},WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},WS.prototype.uri=function(){var query=this.query||{},schema=this.secure?"wss":"ws",port="";return this.port&&("wss"==schema&&443!==Number(this.port)||"ws"==schema&&80!==Number(this.port))&&(port=":"+this.port),this.timestampRequests&&(query[this.timestampParam]=yeast()),this.supportsBinary||(query.b64=1),(query=parseqs.encode(query)).length&&(query="?"+query),schema+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+port+this.path+query},WS.prototype.check=function(){return!(!WebSocket||"__initialize"in WebSocket&&this.name===WS.prototype.name)}}).call(exports,function(){return this}())},function(module,exports){},function(module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},function(module,exports){(function(global){var rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rtrimLeft=/^\s+/,rtrimRight=/\s+$/;module.exports=function parsejson(data){return"string"==typeof data&&data?(data=data.replace(rtrimLeft,"").replace(rtrimRight,""),global.JSON&&JSON.parse?JSON.parse(data):rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void 0):null}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var parser=__webpack_require__(7),Emitter=__webpack_require__(35),toArray=__webpack_require__(45),on=__webpack_require__(46),bind=__webpack_require__(47),debug=__webpack_require__(3)("socket.io-client:socket"),hasBin=__webpack_require__(29);module.exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},emit=Emitter.prototype.emit;function Socket(io,nsp,opts){this.io=io,this.nsp=nsp,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,opts&&opts.query&&(this.query=opts.query),this.io.autoConnect&&this.open()}Emitter(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var io=this.io;this.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},Socket.prototype.send=function(){var args=toArray(arguments);return args.unshift("message"),this.emit.apply(this,args),this},Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev))return emit.apply(this,arguments),this;var args=toArray(arguments),parserType=parser.EVENT;hasBin(args)&&(parserType=parser.BINARY_EVENT);var packet={type:parserType,data:args,options:{}};return packet.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof args[args.length-1]&&(debug("emitting packet with ack id %d",this.ids),this.acks[this.ids]=args.pop(),packet.id=this.ids++),this.connected?this.packet(packet):this.sendBuffer.push(packet),delete this.flags,this},Socket.prototype.packet=function(packet){packet.nsp=this.nsp,this.io.packet(packet)},Socket.prototype.onopen=function(){debug("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:parser.CONNECT,query:this.query}):this.packet({type:parser.CONNECT}))},Socket.prototype.onclose=function(reason){debug("close (%s)",reason),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",reason)},Socket.prototype.onpacket=function(packet){if(packet.nsp===this.nsp)switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",packet.data)}},Socket.prototype.onevent=function(packet){var args=packet.data||[];debug("emitting event %j",args),null!=packet.id&&(debug("attaching ack callback to event"),args.push(this.ack(packet.id))),this.connected?emit.apply(this,args):this.receiveBuffer.push(args)},Socket.prototype.ack=function(id){var self=this,sent=!1;return function(){if(!sent){sent=!0;var args=toArray(arguments);debug("sending ack %j",args);var type=hasBin(args)?parser.BINARY_ACK:parser.ACK;self.packet({type:type,id:id,data:args})}}},Socket.prototype.onack=function(packet){var ack=this.acks[packet.id];"function"==typeof ack?(debug("calling ack %s with %j",packet.id,packet.data),ack.apply(this,packet.data),delete this.acks[packet.id]):debug("bad ack %s",packet.id)},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++)emit.apply(this,this.receiveBuffer[i]);for(this.receiveBuffer=[],i=0;i<this.sendBuffer.length;i++)this.packet(this.sendBuffer[i]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++)this.subs[i].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(debug("performing disconnect (%s)",this.nsp),this.packet({type:parser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},Socket.prototype.compress=function(compress){return this.flags=this.flags||{},this.flags.compress=compress,this}},function(module,exports){module.exports=function toArray(list,index){for(var array=[],i=(index=index||0)||0;i<list.length;i++)array[i-index]=list[i];return array}},function(module,exports){"use strict";module.exports=function on(obj,ev,fn){return obj.on(ev,fn),{destroy:function destroy(){obj.removeListener(ev,fn)}}}},function(module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn&&(fn=obj[fn]),"function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},function(module,exports){function Backoff(opts){opts=opts||{},this.ms=opts.min||100,this.max=opts.max||1e4,this.factor=opts.factor||2,this.jitter=0<opts.jitter&&opts.jitter<=1?opts.jitter:0,this.attempts=0}(module.exports=Backoff).prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random(),deviation=Math.floor(rand*this.jitter*ms);ms=0==(1&Math.floor(10*rand))?ms-deviation:ms+deviation}return 0|Math.min(ms,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(min){this.ms=min},Backoff.prototype.setMax=function(max){this.max=max},Backoff.prototype.setJitter=function(jitter){this.jitter=jitter}}],installedModules={},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0);function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var modules,installedModules}),void 0!==lib)throw new Error('Global "lib" object already exists.');var lib={runtimeDependencies_:{},initCallbacks_:[],rtdep:function(var_args){var source;try{throw new Error}catch(ex){var stackArray=ex.stack.split("\n");source=3<=stackArray.length?stackArray[2].replace(/^\s*at\s+/,""):stackArray[1].replace(/^\s*global code@/,"")}for(var i=0;i<arguments.length;i++){var path=arguments[i];if(path instanceof Array)lib.rtdep.apply(lib,path);else{var ary=this.runtimeDependencies_[path];(ary=ary||(this.runtimeDependencies_[path]=[])).push(source)}}},ensureRuntimeDependencies_:function(){var passed=!0;for(var path in lib.runtimeDependencies_)for(var sourceList=lib.runtimeDependencies_[path],names=path.split("."),obj=window||self,i=0;i<names.length;i++){if(!(names[i]in obj)){console.warn('Missing "'+path+'" is needed by',sourceList),passed=!1;break}obj=obj[names[i]]}if(!passed)throw new Error("Failed runtime dependency check")},registerInit:function(name,callback){return lib.initCallbacks_.push([name,callback]),callback},init:function(onInit,opt_logFunction){var ary=lib.initCallbacks_;if("function"!=typeof onInit)throw new Error("Missing or invalid argument: onInit");lib.ensureRuntimeDependencies_(),setTimeout(function initNext(){if(ary.length){var rec=ary.shift();opt_logFunction&&opt_logFunction("init: "+rec[0]),rec[1](lib.f.alarm(initNext))}else onInit()},0)}};if(String.prototype.padStart||(String.prototype.padStart=function(targetLength,padString){return(targetLength-=this.length)<=0?String(this):(void 0===padString&&(padString=" "),targetLength>padString.length&&(padString=padString.repeat(targetLength/padString.length+1)),padString.slice(0,targetLength)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function(targetLength,padString){return(targetLength-=this.length)<=0?String(this):(void 0===padString&&(padString=" "),targetLength>padString.length&&(padString=padString.repeat(targetLength/padString.length+1)),String(this)+padString.slice(0,targetLength))}),!Object.values||!Object.entries){var reduce=Function.bind.call(Function.call,Array.prototype.reduce),isEnumerable=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),concat=Function.bind.call(Function.call,Array.prototype.concat);Object.values||(Object.values=function values(O){return reduce(Reflect.ownKeys(O),function(v,k){return concat(v,"string"==typeof k&&isEnumerable(O,k)?[O[k]]:[])},[])}),Object.entries||(Object.entries=function entries(O){return reduce(Reflect.ownKeys(O),function(e,k){return concat(e,"string"==typeof k&&isEnumerable(O,k)?[[k,O[k]]]:[])},[])})}lib.array={},lib.array.arrayBigEndianToUint32=function(array){return(array[0]<<24|array[1]<<16|array[2]<<8|array[3]<<0)>>>0},lib.array.uint32ToArrayBigEndian=function(uint32){return[uint32>>>24&255,uint32>>>16&255,uint32>>>8&255,uint32>>>0&255]},lib.array.concatTyped=function(){for(var resultLength=0,_len=arguments.length,arrays=Array(_len),_key=0;_key<_len;_key++)arrays[_key]=arguments[_key];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=arrays[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){resultLength+=_step.value.length}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var result=new arrays[0].constructor(resultLength),pos=0,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=arrays[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _array=_step2.value;result.set(_array,pos),pos+=_array.length}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return result},lib.array.compare=function(a,b){if(null===a||null===b)return null===a&&null===b;if(a.length!==b.length)return!1;for(var i=0;i<a.length;i++)if(a[i]!==b[i])return!1;return!0},lib.colors={},lib.colors.re_={hex16:/#([a-f0-9])([a-f0-9])([a-f0-9])/i,hex24:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/i,rgb:new RegExp("^/s*rgb/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*/)/s*$".replace(/\//g,"\\"),"i"),rgba:new RegExp("^/s*rgba/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)/)/s*$".replace(/\//g,"\\"),"i"),rgbx:new RegExp("^/s*rgba?/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)?/)/s*$".replace(/\//g,"\\"),"i"),x11rgb:/^\s*rgb:([a-f0-9]{1,4})\/([a-f0-9]{1,4})\/([a-f0-9]{1,4})\s*$/i,name:/[a-z][a-z0-9\s]+/},lib.colors.rgbToX11=function(value){function scale(v){return v=(257*Math.min(v,255)).toString(16),lib.f.zpad(v,4)}var ary=value.match(lib.colors.re_.rgbx);return ary?"rgb:"+scale(ary[1])+"/"+scale(ary[2])+"/"+scale(ary[3]):null},lib.colors.x11HexToCSS=function(v){if(!v.startsWith("#"))return null;if(v=v.substr(1),-1==[3,6,9,12].indexOf(v.length))return null;if(v.match(/[^a-f0-9]/i))return null;var size=v.length/3,r=v.substr(0,size),g=v.substr(size,size),b=v.substr(size+size,size);return lib.colors.arrayToRGBA([r,g,b].map(function norm16(v){return v=parseInt(v,16),2==size?v:1==size?v<<4:v>>4*(size-2)}))},lib.colors.x11ToCSS=function(v){var ary=v.match(lib.colors.re_.x11rgb);return ary?(ary.splice(0,1),lib.colors.arrayToRGBA(ary.map(function scale(v){return 1==v.length?parseInt(v+v,16):2==v.length?parseInt(v,16):(3==v.length&&(v+=v.substr(2)),Math.round(parseInt(v,16)/257))}))):v.startsWith("#")?lib.colors.x11HexToCSS(v):lib.colors.nameToRGB(v)},lib.colors.hexToRGB=function(arg){var hex16=lib.colors.re_.hex16,hex24=lib.colors.re_.hex24;function convert(hex){4==hex.length&&(hex=hex.replace(hex16,function(h,r,g,b){return"#"+r+r+g+g+b+b}));var ary=hex.match(hex24);return ary?"rgb("+parseInt(ary[1],16)+", "+parseInt(ary[2],16)+", "+parseInt(ary[3],16)+")":null}if(arg instanceof Array)for(var i=0;i<arg.length;i++)arg[i]=convert(arg[i]);else arg=convert(arg);return arg},lib.colors.rgbToHex=function(arg){function convert(rgb){var ary=lib.colors.crackRGB(rgb);return ary?"#"+lib.f.zpad((parseInt(ary[0])<<16|parseInt(ary[1])<<8|parseInt(ary[2])<<0).toString(16),6):null}if(arg instanceof Array)for(var i=0;i<arg.length;i++)arg[i]=convert(arg[i]);else arg=convert(arg);return arg},lib.colors.normalizeCSS=function(def){return def.startsWith("#")?lib.colors.hexToRGB(def):lib.colors.re_.rgbx.test(def)?def:lib.colors.nameToRGB(def)},lib.colors.arrayToRGBA=function(ary){var alpha=3<ary.length?ary[3]:1;return"rgba("+ary[0]+", "+ary[1]+", "+ary[2]+", "+alpha+")"},lib.colors.setAlpha=function(rgb,alpha){var ary=lib.colors.crackRGB(rgb);return ary[3]=alpha,lib.colors.arrayToRGBA(ary)},lib.colors.mix=function(base,tint,percent){for(var ary1=lib.colors.crackRGB(base),ary2=lib.colors.crackRGB(tint),i=0;i<4;++i){var diff=ary2[i]-ary1[i];ary1[i]=Math.round(parseInt(ary1[i])+diff*percent)}return lib.colors.arrayToRGBA(ary1)},lib.colors.crackRGB=function(color){var ary;if(color.startsWith("rgba")){if(ary=color.match(lib.colors.re_.rgba))return ary.shift(),ary}else if(ary=color.match(lib.colors.re_.rgb))return ary.shift(),ary.push("1"),ary;return console.error("Couldn't crack: "+color),null},lib.colors.nameToRGB=function(name){return name in lib.colors.colorNames?lib.colors.colorNames[name]:(name=name.toLowerCase())in lib.colors.colorNames?lib.colors.colorNames[name]:(name=name.replace(/\s+/g,""))in lib.colors.colorNames?lib.colors.colorNames[name]:null},lib.colors.stockColorPalette=lib.colors.hexToRGB(["#000000","#CC0000","#4E9A06","#C4A000","#3465A4","#75507B","#06989A","#D3D7CF","#555753","#EF2929","#00BA13","#FCE94F","#729FCF","#F200CB","#00B5BD","#EEEEEC","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#0087FF","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"]),lib.colors.colorPalette=lib.colors.stockColorPalette,lib.colors.colorNames={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",antiquewhite1:"rgb(255, 239, 219)",antiquewhite2:"rgb(238, 223, 204)",antiquewhite3:"rgb(205, 192, 176)",antiquewhite4:"rgb(139, 131, 120)",aquamarine:"rgb(127, 255, 212)",aquamarine1:"rgb(127, 255, 212)",aquamarine2:"rgb(118, 238, 198)",aquamarine3:"rgb(102, 205, 170)",aquamarine4:"rgb(69, 139, 116)",azure:"rgb(240, 255, 255)",azure1:"rgb(240, 255, 255)",azure2:"rgb(224, 238, 238)",azure3:"rgb(193, 205, 205)",azure4:"rgb(131, 139, 139)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",bisque1:"rgb(255, 228, 196)",bisque2:"rgb(238, 213, 183)",bisque3:"rgb(205, 183, 158)",bisque4:"rgb(139, 125, 107)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blue1:"rgb(0, 0, 255)",blue2:"rgb(0, 0, 238)",blue3:"rgb(0, 0, 205)",blue4:"rgb(0, 0, 139)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",brown1:"rgb(255, 64, 64)",brown2:"rgb(238, 59, 59)",brown3:"rgb(205, 51, 51)",brown4:"rgb(139, 35, 35)",burlywood:"rgb(222, 184, 135)",burlywood1:"rgb(255, 211, 155)",burlywood2:"rgb(238, 197, 145)",burlywood3:"rgb(205, 170, 125)",burlywood4:"rgb(139, 115, 85)",cadetblue:"rgb(95, 158, 160)",cadetblue1:"rgb(152, 245, 255)",cadetblue2:"rgb(142, 229, 238)",cadetblue3:"rgb(122, 197, 205)",cadetblue4:"rgb(83, 134, 139)",chartreuse:"rgb(127, 255, 0)",chartreuse1:"rgb(127, 255, 0)",chartreuse2:"rgb(118, 238, 0)",chartreuse3:"rgb(102, 205, 0)",chartreuse4:"rgb(69, 139, 0)",chocolate:"rgb(210, 105, 30)",chocolate1:"rgb(255, 127, 36)",chocolate2:"rgb(238, 118, 33)",chocolate3:"rgb(205, 102, 29)",chocolate4:"rgb(139, 69, 19)",coral:"rgb(255, 127, 80)",coral1:"rgb(255, 114, 86)",coral2:"rgb(238, 106, 80)",coral3:"rgb(205, 91, 69)",coral4:"rgb(139, 62, 47)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",cornsilk1:"rgb(255, 248, 220)",cornsilk2:"rgb(238, 232, 205)",cornsilk3:"rgb(205, 200, 177)",cornsilk4:"rgb(139, 136, 120)",cyan:"rgb(0, 255, 255)",cyan1:"rgb(0, 255, 255)",cyan2:"rgb(0, 238, 238)",cyan3:"rgb(0, 205, 205)",cyan4:"rgb(0, 139, 139)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgoldenrod1:"rgb(255, 185, 15)",darkgoldenrod2:"rgb(238, 173, 14)",darkgoldenrod3:"rgb(205, 149, 12)",darkgoldenrod4:"rgb(139, 101, 8)",darkgray:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkgrey:"rgb(169, 169, 169)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkolivegreen1:"rgb(202, 255, 112)",darkolivegreen2:"rgb(188, 238, 104)",darkolivegreen3:"rgb(162, 205, 90)",darkolivegreen4:"rgb(110, 139, 61)",darkorange:"rgb(255, 140, 0)",darkorange1:"rgb(255, 127, 0)",darkorange2:"rgb(238, 118, 0)",darkorange3:"rgb(205, 102, 0)",darkorange4:"rgb(139, 69, 0)",darkorchid:"rgb(153, 50, 204)",darkorchid1:"rgb(191, 62, 255)",darkorchid2:"rgb(178, 58, 238)",darkorchid3:"rgb(154, 50, 205)",darkorchid4:"rgb(104, 34, 139)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkseagreen1:"rgb(193, 255, 193)",darkseagreen2:"rgb(180, 238, 180)",darkseagreen3:"rgb(155, 205, 155)",darkseagreen4:"rgb(105, 139, 105)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategray1:"rgb(151, 255, 255)",darkslategray2:"rgb(141, 238, 238)",darkslategray3:"rgb(121, 205, 205)",darkslategray4:"rgb(82, 139, 139)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",debianred:"rgb(215, 7, 81)",deeppink:"rgb(255, 20, 147)",deeppink1:"rgb(255, 20, 147)",deeppink2:"rgb(238, 18, 137)",deeppink3:"rgb(205, 16, 118)",deeppink4:"rgb(139, 10, 80)",deepskyblue:"rgb(0, 191, 255)",deepskyblue1:"rgb(0, 191, 255)",deepskyblue2:"rgb(0, 178, 238)",deepskyblue3:"rgb(0, 154, 205)",deepskyblue4:"rgb(0, 104, 139)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",dodgerblue1:"rgb(30, 144, 255)",dodgerblue2:"rgb(28, 134, 238)",dodgerblue3:"rgb(24, 116, 205)",dodgerblue4:"rgb(16, 78, 139)",firebrick:"rgb(178, 34, 34)",firebrick1:"rgb(255, 48, 48)",firebrick2:"rgb(238, 44, 44)",firebrick3:"rgb(205, 38, 38)",firebrick4:"rgb(139, 26, 26)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",gold1:"rgb(255, 215, 0)",gold2:"rgb(238, 201, 0)",gold3:"rgb(205, 173, 0)",gold4:"rgb(139, 117, 0)",goldenrod:"rgb(218, 165, 32)",goldenrod1:"rgb(255, 193, 37)",goldenrod2:"rgb(238, 180, 34)",goldenrod3:"rgb(205, 155, 29)",goldenrod4:"rgb(139, 105, 20)",gray:"rgb(190, 190, 190)",gray0:"rgb(0, 0, 0)",gray1:"rgb(3, 3, 3)",gray10:"rgb(26, 26, 26)",gray100:"rgb(255, 255, 255)",gray11:"rgb(28, 28, 28)",gray12:"rgb(31, 31, 31)",gray13:"rgb(33, 33, 33)",gray14:"rgb(36, 36, 36)",gray15:"rgb(38, 38, 38)",gray16:"rgb(41, 41, 41)",gray17:"rgb(43, 43, 43)",gray18:"rgb(46, 46, 46)",gray19:"rgb(48, 48, 48)",gray2:"rgb(5, 5, 5)",gray20:"rgb(51, 51, 51)",gray21:"rgb(54, 54, 54)",gray22:"rgb(56, 56, 56)",gray23:"rgb(59, 59, 59)",gray24:"rgb(61, 61, 61)",gray25:"rgb(64, 64, 64)",gray26:"rgb(66, 66, 66)",gray27:"rgb(69, 69, 69)",gray28:"rgb(71, 71, 71)",gray29:"rgb(74, 74, 74)",gray3:"rgb(8, 8, 8)",gray30:"rgb(77, 77, 77)",gray31:"rgb(79, 79, 79)",gray32:"rgb(82, 82, 82)",gray33:"rgb(84, 84, 84)",gray34:"rgb(87, 87, 87)",gray35:"rgb(89, 89, 89)",gray36:"rgb(92, 92, 92)",gray37:"rgb(94, 94, 94)",gray38:"rgb(97, 97, 97)",gray39:"rgb(99, 99, 99)",gray4:"rgb(10, 10, 10)",gray40:"rgb(102, 102, 102)",gray41:"rgb(105, 105, 105)",gray42:"rgb(107, 107, 107)",gray43:"rgb(110, 110, 110)",gray44:"rgb(112, 112, 112)",gray45:"rgb(115, 115, 115)",gray46:"rgb(117, 117, 117)",gray47:"rgb(120, 120, 120)",gray48:"rgb(122, 122, 122)",gray49:"rgb(125, 125, 125)",gray5:"rgb(13, 13, 13)",gray50:"rgb(127, 127, 127)",gray51:"rgb(130, 130, 130)",gray52:"rgb(133, 133, 133)",gray53:"rgb(135, 135, 135)",gray54:"rgb(138, 138, 138)",gray55:"rgb(140, 140, 140)",gray56:"rgb(143, 143, 143)",gray57:"rgb(145, 145, 145)",gray58:"rgb(148, 148, 148)",gray59:"rgb(150, 150, 150)",gray6:"rgb(15, 15, 15)",gray60:"rgb(153, 153, 153)",gray61:"rgb(156, 156, 156)",gray62:"rgb(158, 158, 158)",gray63:"rgb(161, 161, 161)",gray64:"rgb(163, 163, 163)",gray65:"rgb(166, 166, 166)",gray66:"rgb(168, 168, 168)",gray67:"rgb(171, 171, 171)",gray68:"rgb(173, 173, 173)",gray69:"rgb(176, 176, 176)",gray7:"rgb(18, 18, 18)",gray70:"rgb(179, 179, 179)",gray71:"rgb(181, 181, 181)",gray72:"rgb(184, 184, 184)",gray73:"rgb(186, 186, 186)",gray74:"rgb(189, 189, 189)",gray75:"rgb(191, 191, 191)",gray76:"rgb(194, 194, 194)",gray77:"rgb(196, 196, 196)",gray78:"rgb(199, 199, 199)",gray79:"rgb(201, 201, 201)",gray8:"rgb(20, 20, 20)",gray80:"rgb(204, 204, 204)",gray81:"rgb(207, 207, 207)",gray82:"rgb(209, 209, 209)",gray83:"rgb(212, 212, 212)",gray84:"rgb(214, 214, 214)",gray85:"rgb(217, 217, 217)",gray86:"rgb(219, 219, 219)",gray87:"rgb(222, 222, 222)",gray88:"rgb(224, 224, 224)",gray89:"rgb(227, 227, 227)",gray9:"rgb(23, 23, 23)",gray90:"rgb(229, 229, 229)",gray91:"rgb(232, 232, 232)",gray92:"rgb(235, 235, 235)",gray93:"rgb(237, 237, 237)",gray94:"rgb(240, 240, 240)",gray95:"rgb(242, 242, 242)",gray96:"rgb(245, 245, 245)",gray97:"rgb(247, 247, 247)",gray98:"rgb(250, 250, 250)",gray99:"rgb(252, 252, 252)",green:"rgb(0, 255, 0)",green1:"rgb(0, 255, 0)",green2:"rgb(0, 238, 0)",green3:"rgb(0, 205, 0)",green4:"rgb(0, 139, 0)",greenyellow:"rgb(173, 255, 47)",grey:"rgb(190, 190, 190)",grey0:"rgb(0, 0, 0)",grey1:"rgb(3, 3, 3)",grey10:"rgb(26, 26, 26)",grey100:"rgb(255, 255, 255)",grey11:"rgb(28, 28, 28)",grey12:"rgb(31, 31, 31)",grey13:"rgb(33, 33, 33)",grey14:"rgb(36, 36, 36)",grey15:"rgb(38, 38, 38)",grey16:"rgb(41, 41, 41)",grey17:"rgb(43, 43, 43)",grey18:"rgb(46, 46, 46)",grey19:"rgb(48, 48, 48)",grey2:"rgb(5, 5, 5)",grey20:"rgb(51, 51, 51)",grey21:"rgb(54, 54, 54)",grey22:"rgb(56, 56, 56)",grey23:"rgb(59, 59, 59)",grey24:"rgb(61, 61, 61)",grey25:"rgb(64, 64, 64)",grey26:"rgb(66, 66, 66)",grey27:"rgb(69, 69, 69)",grey28:"rgb(71, 71, 71)",grey29:"rgb(74, 74, 74)",grey3:"rgb(8, 8, 8)",grey30:"rgb(77, 77, 77)",grey31:"rgb(79, 79, 79)",grey32:"rgb(82, 82, 82)",grey33:"rgb(84, 84, 84)",grey34:"rgb(87, 87, 87)",grey35:"rgb(89, 89, 89)",grey36:"rgb(92, 92, 92)",grey37:"rgb(94, 94, 94)",grey38:"rgb(97, 97, 97)",grey39:"rgb(99, 99, 99)",grey4:"rgb(10, 10, 10)",grey40:"rgb(102, 102, 102)",grey41:"rgb(105, 105, 105)",grey42:"rgb(107, 107, 107)",grey43:"rgb(110, 110, 110)",grey44:"rgb(112, 112, 112)",grey45:"rgb(115, 115, 115)",grey46:"rgb(117, 117, 117)",grey47:"rgb(120, 120, 120)",grey48:"rgb(122, 122, 122)",grey49:"rgb(125, 125, 125)",grey5:"rgb(13, 13, 13)",grey50:"rgb(127, 127, 127)",grey51:"rgb(130, 130, 130)",grey52:"rgb(133, 133, 133)",grey53:"rgb(135, 135, 135)",grey54:"rgb(138, 138, 138)",grey55:"rgb(140, 140, 140)",grey56:"rgb(143, 143, 143)",grey57:"rgb(145, 145, 145)",grey58:"rgb(148, 148, 148)",grey59:"rgb(150, 150, 150)",grey6:"rgb(15, 15, 15)",grey60:"rgb(153, 153, 153)",grey61:"rgb(156, 156, 156)",grey62:"rgb(158, 158, 158)",grey63:"rgb(161, 161, 161)",grey64:"rgb(163, 163, 163)",grey65:"rgb(166, 166, 166)",grey66:"rgb(168, 168, 168)",grey67:"rgb(171, 171, 171)",grey68:"rgb(173, 173, 173)",grey69:"rgb(176, 176, 176)",grey7:"rgb(18, 18, 18)",grey70:"rgb(179, 179, 179)",grey71:"rgb(181, 181, 181)",grey72:"rgb(184, 184, 184)",grey73:"rgb(186, 186, 186)",grey74:"rgb(189, 189, 189)",grey75:"rgb(191, 191, 191)",grey76:"rgb(194, 194, 194)",grey77:"rgb(196, 196, 196)",grey78:"rgb(199, 199, 199)",grey79:"rgb(201, 201, 201)",grey8:"rgb(20, 20, 20)",grey80:"rgb(204, 204, 204)",grey81:"rgb(207, 207, 207)",grey82:"rgb(209, 209, 209)",grey83:"rgb(212, 212, 212)",grey84:"rgb(214, 214, 214)",grey85:"rgb(217, 217, 217)",grey86:"rgb(219, 219, 219)",grey87:"rgb(222, 222, 222)",grey88:"rgb(224, 224, 224)",grey89:"rgb(227, 227, 227)",grey9:"rgb(23, 23, 23)",grey90:"rgb(229, 229, 229)",grey91:"rgb(232, 232, 232)",grey92:"rgb(235, 235, 235)",grey93:"rgb(237, 237, 237)",grey94:"rgb(240, 240, 240)",grey95:"rgb(242, 242, 242)",grey96:"rgb(245, 245, 245)",grey97:"rgb(247, 247, 247)",grey98:"rgb(250, 250, 250)",grey99:"rgb(252, 252, 252)",honeydew:"rgb(240, 255, 240)",honeydew1:"rgb(240, 255, 240)",honeydew2:"rgb(224, 238, 224)",honeydew3:"rgb(193, 205, 193)",honeydew4:"rgb(131, 139, 131)",hotpink:"rgb(255, 105, 180)",hotpink1:"rgb(255, 110, 180)",hotpink2:"rgb(238, 106, 167)",hotpink3:"rgb(205, 96, 144)",hotpink4:"rgb(139, 58, 98)",indianred:"rgb(205, 92, 92)",indianred1:"rgb(255, 106, 106)",indianred2:"rgb(238, 99, 99)",indianred3:"rgb(205, 85, 85)",indianred4:"rgb(139, 58, 58)",ivory:"rgb(255, 255, 240)",ivory1:"rgb(255, 255, 240)",ivory2:"rgb(238, 238, 224)",ivory3:"rgb(205, 205, 193)",ivory4:"rgb(139, 139, 131)",khaki:"rgb(240, 230, 140)",khaki1:"rgb(255, 246, 143)",khaki2:"rgb(238, 230, 133)",khaki3:"rgb(205, 198, 115)",khaki4:"rgb(139, 134, 78)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lavenderblush1:"rgb(255, 240, 245)",lavenderblush2:"rgb(238, 224, 229)",lavenderblush3:"rgb(205, 193, 197)",lavenderblush4:"rgb(139, 131, 134)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lemonchiffon1:"rgb(255, 250, 205)",lemonchiffon2:"rgb(238, 233, 191)",lemonchiffon3:"rgb(205, 201, 165)",lemonchiffon4:"rgb(139, 137, 112)",lightblue:"rgb(173, 216, 230)",lightblue1:"rgb(191, 239, 255)",lightblue2:"rgb(178, 223, 238)",lightblue3:"rgb(154, 192, 205)",lightblue4:"rgb(104, 131, 139)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightcyan1:"rgb(224, 255, 255)",lightcyan2:"rgb(209, 238, 238)",lightcyan3:"rgb(180, 205, 205)",lightcyan4:"rgb(122, 139, 139)",lightgoldenrod:"rgb(238, 221, 130)",lightgoldenrod1:"rgb(255, 236, 139)",lightgoldenrod2:"rgb(238, 220, 130)",lightgoldenrod3:"rgb(205, 190, 112)",lightgoldenrod4:"rgb(139, 129, 76)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgray:"rgb(211, 211, 211)",lightgreen:"rgb(144, 238, 144)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightpink1:"rgb(255, 174, 185)",lightpink2:"rgb(238, 162, 173)",lightpink3:"rgb(205, 140, 149)",lightpink4:"rgb(139, 95, 101)",lightsalmon:"rgb(255, 160, 122)",lightsalmon1:"rgb(255, 160, 122)",lightsalmon2:"rgb(238, 149, 114)",lightsalmon3:"rgb(205, 129, 98)",lightsalmon4:"rgb(139, 87, 66)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightskyblue1:"rgb(176, 226, 255)",lightskyblue2:"rgb(164, 211, 238)",lightskyblue3:"rgb(141, 182, 205)",lightskyblue4:"rgb(96, 123, 139)",lightslateblue:"rgb(132, 112, 255)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightsteelblue1:"rgb(202, 225, 255)",lightsteelblue2:"rgb(188, 210, 238)",lightsteelblue3:"rgb(162, 181, 205)",lightsteelblue4:"rgb(110, 123, 139)",lightyellow:"rgb(255, 255, 224)",lightyellow1:"rgb(255, 255, 224)",lightyellow2:"rgb(238, 238, 209)",lightyellow3:"rgb(205, 205, 180)",lightyellow4:"rgb(139, 139, 122)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",magenta1:"rgb(255, 0, 255)",magenta2:"rgb(238, 0, 238)",magenta3:"rgb(205, 0, 205)",magenta4:"rgb(139, 0, 139)",maroon:"rgb(176, 48, 96)",maroon1:"rgb(255, 52, 179)",maroon2:"rgb(238, 48, 167)",maroon3:"rgb(205, 41, 144)",maroon4:"rgb(139, 28, 98)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumorchid1:"rgb(224, 102, 255)",mediumorchid2:"rgb(209, 95, 238)",mediumorchid3:"rgb(180, 82, 205)",mediumorchid4:"rgb(122, 55, 139)",mediumpurple:"rgb(147, 112, 219)",mediumpurple1:"rgb(171, 130, 255)",mediumpurple2:"rgb(159, 121, 238)",mediumpurple3:"rgb(137, 104, 205)",mediumpurple4:"rgb(93, 71, 139)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",mistyrose1:"rgb(255, 228, 225)",mistyrose2:"rgb(238, 213, 210)",mistyrose3:"rgb(205, 183, 181)",mistyrose4:"rgb(139, 125, 123)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navajowhite1:"rgb(255, 222, 173)",navajowhite2:"rgb(238, 207, 161)",navajowhite3:"rgb(205, 179, 139)",navajowhite4:"rgb(139, 121, 94)",navy:"rgb(0, 0, 128)",navyblue:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olivedrab:"rgb(107, 142, 35)",olivedrab1:"rgb(192, 255, 62)",olivedrab2:"rgb(179, 238, 58)",olivedrab3:"rgb(154, 205, 50)",olivedrab4:"rgb(105, 139, 34)",orange:"rgb(255, 165, 0)",orange1:"rgb(255, 165, 0)",orange2:"rgb(238, 154, 0)",orange3:"rgb(205, 133, 0)",orange4:"rgb(139, 90, 0)",orangered:"rgb(255, 69, 0)",orangered1:"rgb(255, 69, 0)",orangered2:"rgb(238, 64, 0)",orangered3:"rgb(205, 55, 0)",orangered4:"rgb(139, 37, 0)",orchid:"rgb(218, 112, 214)",orchid1:"rgb(255, 131, 250)",orchid2:"rgb(238, 122, 233)",orchid3:"rgb(205, 105, 201)",orchid4:"rgb(139, 71, 137)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",palegreen1:"rgb(154, 255, 154)",palegreen2:"rgb(144, 238, 144)",palegreen3:"rgb(124, 205, 124)",palegreen4:"rgb(84, 139, 84)",paleturquoise:"rgb(175, 238, 238)",paleturquoise1:"rgb(187, 255, 255)",paleturquoise2:"rgb(174, 238, 238)",paleturquoise3:"rgb(150, 205, 205)",paleturquoise4:"rgb(102, 139, 139)",palevioletred:"rgb(219, 112, 147)",palevioletred1:"rgb(255, 130, 171)",palevioletred2:"rgb(238, 121, 159)",palevioletred3:"rgb(205, 104, 137)",palevioletred4:"rgb(139, 71, 93)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peachpuff1:"rgb(255, 218, 185)",peachpuff2:"rgb(238, 203, 173)",peachpuff3:"rgb(205, 175, 149)",peachpuff4:"rgb(139, 119, 101)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",pink1:"rgb(255, 181, 197)",pink2:"rgb(238, 169, 184)",pink3:"rgb(205, 145, 158)",pink4:"rgb(139, 99, 108)",plum:"rgb(221, 160, 221)",plum1:"rgb(255, 187, 255)",plum2:"rgb(238, 174, 238)",plum3:"rgb(205, 150, 205)",plum4:"rgb(139, 102, 139)",powderblue:"rgb(176, 224, 230)",purple:"rgb(160, 32, 240)",purple1:"rgb(155, 48, 255)",purple2:"rgb(145, 44, 238)",purple3:"rgb(125, 38, 205)",purple4:"rgb(85, 26, 139)",red:"rgb(255, 0, 0)",red1:"rgb(255, 0, 0)",red2:"rgb(238, 0, 0)",red3:"rgb(205, 0, 0)",red4:"rgb(139, 0, 0)",rosybrown:"rgb(188, 143, 143)",rosybrown1:"rgb(255, 193, 193)",rosybrown2:"rgb(238, 180, 180)",rosybrown3:"rgb(205, 155, 155)",rosybrown4:"rgb(139, 105, 105)",royalblue:"rgb(65, 105, 225)",royalblue1:"rgb(72, 118, 255)",royalblue2:"rgb(67, 110, 238)",royalblue3:"rgb(58, 95, 205)",royalblue4:"rgb(39, 64, 139)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",salmon1:"rgb(255, 140, 105)",salmon2:"rgb(238, 130, 98)",salmon3:"rgb(205, 112, 84)",salmon4:"rgb(139, 76, 57)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seagreen1:"rgb(84, 255, 159)",seagreen2:"rgb(78, 238, 148)",seagreen3:"rgb(67, 205, 128)",seagreen4:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",seashell1:"rgb(255, 245, 238)",seashell2:"rgb(238, 229, 222)",seashell3:"rgb(205, 197, 191)",seashell4:"rgb(139, 134, 130)",sienna:"rgb(160, 82, 45)",sienna1:"rgb(255, 130, 71)",sienna2:"rgb(238, 121, 66)",sienna3:"rgb(205, 104, 57)",sienna4:"rgb(139, 71, 38)",skyblue:"rgb(135, 206, 235)",skyblue1:"rgb(135, 206, 255)",skyblue2:"rgb(126, 192, 238)",skyblue3:"rgb(108, 166, 205)",skyblue4:"rgb(74, 112, 139)",slateblue:"rgb(106, 90, 205)",slateblue1:"rgb(131, 111, 255)",slateblue2:"rgb(122, 103, 238)",slateblue3:"rgb(105, 89, 205)",slateblue4:"rgb(71, 60, 139)",slategray:"rgb(112, 128, 144)",slategray1:"rgb(198, 226, 255)",slategray2:"rgb(185, 211, 238)",slategray3:"rgb(159, 182, 205)",slategray4:"rgb(108, 123, 139)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",snow1:"rgb(255, 250, 250)",snow2:"rgb(238, 233, 233)",snow3:"rgb(205, 201, 201)",snow4:"rgb(139, 137, 137)",springgreen:"rgb(0, 255, 127)",springgreen1:"rgb(0, 255, 127)",springgreen2:"rgb(0, 238, 118)",springgreen3:"rgb(0, 205, 102)",springgreen4:"rgb(0, 139, 69)",steelblue:"rgb(70, 130, 180)",steelblue1:"rgb(99, 184, 255)",steelblue2:"rgb(92, 172, 238)",steelblue3:"rgb(79, 148, 205)",steelblue4:"rgb(54, 100, 139)",tan:"rgb(210, 180, 140)",tan1:"rgb(255, 165, 79)",tan2:"rgb(238, 154, 73)",tan3:"rgb(205, 133, 63)",tan4:"rgb(139, 90, 43)",thistle:"rgb(216, 191, 216)",thistle1:"rgb(255, 225, 255)",thistle2:"rgb(238, 210, 238)",thistle3:"rgb(205, 181, 205)",thistle4:"rgb(139, 123, 139)",tomato:"rgb(255, 99, 71)",tomato1:"rgb(255, 99, 71)",tomato2:"rgb(238, 92, 66)",tomato3:"rgb(205, 79, 57)",tomato4:"rgb(139, 54, 38)",turquoise:"rgb(64, 224, 208)",turquoise1:"rgb(0, 245, 255)",turquoise2:"rgb(0, 229, 238)",turquoise3:"rgb(0, 197, 205)",turquoise4:"rgb(0, 134, 139)",violet:"rgb(238, 130, 238)",violetred:"rgb(208, 32, 144)",violetred1:"rgb(255, 62, 150)",violetred2:"rgb(238, 58, 140)",violetred3:"rgb(205, 50, 120)",violetred4:"rgb(139, 34, 82)",wheat:"rgb(245, 222, 179)",wheat1:"rgb(255, 231, 186)",wheat2:"rgb(238, 216, 174)",wheat3:"rgb(205, 186, 150)",wheat4:"rgb(139, 126, 102)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellow1:"rgb(255, 255, 0)",yellow2:"rgb(238, 238, 0)",yellow3:"rgb(205, 205, 0)",yellow4:"rgb(139, 139, 0)",yellowgreen:"rgb(154, 205, 50)"},lib.f={},lib.f.createEnum=function(name){return new String(name)},lib.f.replaceVars=function(str,vars){return str.replace(/%([a-z]*)\(([^\)]+)\)/gi,function(match,fn,varname){if(void 0===vars[varname])throw"Unknown variable: "+varname;var rv=vars[varname];if(fn in lib.f.replaceVars.functions)rv=lib.f.replaceVars.functions[fn](rv);else if(fn)throw"Unknown escape function: "+fn;return rv})},lib.f.replaceVars.functions={encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escapeHTML:function escapeHTML(str){var map={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};return str.replace(/[<>&\"\']/g,function(m){return map[m]})}},lib.f.getAcceptLanguages=function(callback){lib.f.getAcceptLanguages.chromeSupported()?chrome.i18n.getAcceptLanguages(callback):setTimeout(function(){callback([navigator.language.replace(/-/g,"_")])},0)},lib.f.getAcceptLanguages.chromeSupported=function(){return window.chrome&&chrome.i18n},lib.f.parseQuery=function(queryString){queryString.startsWith("?")&&(queryString=queryString.substr(1));for(var rv={},pairs=queryString.split("&"),i=0;i<pairs.length;i++){var pair=pairs[i].split("=");rv[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return rv},lib.f.getURL=function(path){return lib.f.getURL.chromeSupported()?chrome.runtime.getURL(path):path},lib.f.getURL.chromeSupported=function(){return window.chrome&&chrome.runtime&&chrome.runtime.getURL},lib.f.clamp=function(v,min,max){return v<min?min:max<v?max:v},lib.f.zpad=function(number,length){return String(number).padStart(length,"0")},lib.f.getWhitespace=function(length){if(length<=0)return"";var f=this.getWhitespace;for(f.whitespace||(f.whitespace="          ");length>f.whitespace.length;)f.whitespace+=f.whitespace;return f.whitespace.substr(0,length)},lib.f.alarm=function(callback,opt_ms){var timeout,ms=opt_ms||5e3,stack=lib.f.getStack(1);return timeout=setTimeout(function(){var name="string"==typeof callback?name:callback.name;name=name?": "+name:"",console.warn("lib.f.alarm: timeout expired: "+ms/1e3+"s"+name),console.log(stack),timeout=null},ms),"string"==typeof callback?wrapperGenerator:wrapperGenerator(callback);function wrapperGenerator(callback){return function(){return timeout&&(clearTimeout(timeout),timeout=null),callback.apply(null,arguments)}}},lib.f.getStack=function(opt_ignoreFrames){var stackArray,ignoreFrames=opt_ignoreFrames?opt_ignoreFrames+2:2;try{throw new Error}catch(ex){stackArray=ex.stack.split("\n")}for(var stackObject={},i=ignoreFrames;i<stackArray.length;i++)stackObject[i-ignoreFrames]=stackArray[i].replace(/^\s*at\s+/,"");return stackObject},lib.f.smartFloorDivide=function(numerator,denominator){var val=numerator/denominator,ceiling=Math.ceil(val);return ceiling-val<1e-4?ceiling:Math.floor(val)},lib.f.randomInt=function(min,max){return Math.floor(Math.random()*(max-min+1))+min},lib.MessageManager=function(languages){this.languages_=languages.map(function(el){return el.replace(/-/g,"_")}),-1==this.languages_.indexOf("en")&&this.languages_.unshift("en"),this.messages={}},lib.MessageManager.prototype.addMessages=function(defs){for(var key in defs){var def=defs[key];def.placeholders?this.messages[key]=def.message.replace(/\$([a-z][^\s\$]+)\$/gi,function(m,name){return defs[key].placeholders[name.toLowerCase()].content}):this.messages[key]=def.message}},lib.MessageManager.prototype.findAndLoadMessages=function(pattern,onComplete){var languages=this.languages_.concat(),loaded=[],failed=[];function onLanguageComplete(state){state?loaded=languages.shift():failed=languages.shift(),languages.length?tryNextLanguage():onComplete(loaded,failed)}var tryNextLanguage=function(){this.loadMessages(this.replaceReferences(pattern,languages),onLanguageComplete.bind(this,!0),onLanguageComplete.bind(this,!1))}.bind(this);tryNextLanguage()},lib.MessageManager.prototype.loadMessages=function(url,onSuccess,opt_onError){var xhr=new XMLHttpRequest;xhr.onloadend=function(){200==xhr.status?(this.addMessages(JSON.parse(xhr.responseText)),onSuccess()):opt_onError&&opt_onError(xhr.status)}.bind(this),xhr.open("GET",url),xhr.send()},lib.MessageManager.replaceReferences=function(msg,args){return msg.replace(/\$(\d+)/g,function(m,index){return args[index-1]})},lib.MessageManager.prototype.replaceReferences=lib.MessageManager.replaceReferences,lib.MessageManager.prototype.get=function(msgname,opt_args,opt_default){var message;if(msgname in this.messages)message=this.messages[msgname];else if(window.chrome&&window.chrome.i18n&&(message=chrome.i18n.getMessage(msgname)),!message)return console.warn("Unknown message: "+msgname),void 0===opt_default?msgname:opt_default;return opt_args?(opt_args instanceof Array||(opt_args=[opt_args]),this.replaceReferences(message,opt_args)):message},lib.MessageManager.prototype.processI18nAttributes=function(dom){for(var nodes=dom.querySelectorAll("[i18n]"),i=0;i<nodes.length;i++)this.processI18nAttribute(nodes[i])},lib.MessageManager.prototype.processI18nAttribute=function(node){function thunk(str){return str.replace(/-/g,"_").toUpperCase()}var i18n=node.getAttribute("i18n");if(i18n){try{i18n=JSON.parse(i18n)}catch(ex){throw console.error("Can't parse "+node.tagName+"#"+node.id+": "+i18n),ex}for(var key in i18n){var attr=key,msgname=i18n[key];msgname.startsWith("=")&&(msgname=i18n[key=msgname.substr(1)]),msgname.startsWith("$")&&(msgname=thunk(node.getAttribute(msgname.substr(1))+"_"+key));var msg=this.get(msgname);"_"==attr?node.textContent=msg:node.setAttribute(attr,msg)}}},lib.PreferenceManager=function(storage,opt_prefix){this.storage=storage,this.storageObserver_=this.onStorageChange_.bind(this),this.isActive_=!1,this.activate(),this.trace=!1;var prefix=opt_prefix||"/";prefix.endsWith("/")||(prefix+="/"),this.prefix=prefix,this.prefRecords_={},this.globalObservers_=[],this.childFactories_={},this.childLists_={}},lib.PreferenceManager.prototype.DEFAULT_VALUE=lib.f.createEnum("DEFAULT"),lib.PreferenceManager.Record=function(name,defaultValue){this.name=name,this.defaultValue=defaultValue,this.currentValue=this.DEFAULT_VALUE,this.observers=[]},lib.PreferenceManager.Record.prototype.DEFAULT_VALUE=lib.PreferenceManager.prototype.DEFAULT_VALUE,lib.PreferenceManager.Record.prototype.addObserver=function(observer){this.observers.push(observer)},lib.PreferenceManager.Record.prototype.removeObserver=function(observer){var i=this.observers.indexOf(observer);0<=i&&this.observers.splice(i,1)},lib.PreferenceManager.Record.prototype.get=function(){return this.currentValue===this.DEFAULT_VALUE?/^(string|number)$/.test(_typeof2(this.defaultValue))?this.defaultValue:"object"==_typeof2(this.defaultValue)?JSON.parse(JSON.stringify(this.defaultValue)):this.defaultValue:this.currentValue},lib.PreferenceManager.prototype.deactivate=function(){if(!this.isActive_)throw new Error("Not activated");this.isActive_=!1,this.storage.removeObserver(this.storageObserver_)},lib.PreferenceManager.prototype.activate=function(){if(this.isActive_)throw new Error("Already activated");this.isActive_=!0,this.storage.addObserver(this.storageObserver_)},lib.PreferenceManager.prototype.readStorage=function(opt_callback){var _this=this,pendingChildren=0;function onChildComplete(){0==--pendingChildren&&opt_callback&&opt_callback()}var keys=Object.keys(this.prefRecords_).map(function(el){return _this.prefix+el});this.trace&&console.log("Preferences read: "+this.prefix),this.storage.getItems(keys,function(items){var prefixLength=this.prefix.length;for(var key in items){var value=items[key],name=key.substr(prefixLength),needSync=name in this.childLists_&&JSON.stringify(value)!=JSON.stringify(this.prefRecords_[name].currentValue);this.prefRecords_[name].currentValue=value,needSync&&(pendingChildren++,this.syncChildList(name,onChildComplete))}0==pendingChildren&&opt_callback&&setTimeout(opt_callback)}.bind(this))},lib.PreferenceManager.prototype.definePreference=function(name,value,opt_onChange){var record=this.prefRecords_[name];record?this.changeDefault(name,value):record=this.prefRecords_[name]=new lib.PreferenceManager.Record(name,value),opt_onChange&&record.addObserver(opt_onChange)},lib.PreferenceManager.prototype.definePreferences=function(defaults){for(var i=0;i<defaults.length;i++)this.definePreference(defaults[i][0],defaults[i][1],defaults[i][2])},lib.PreferenceManager.prototype.defineChildren=function(listName,childFactory){this.definePreference(listName,[],this.onChildListChange_.bind(this,listName)),this.childFactories_[listName]=childFactory,this.childLists_[listName]={}},lib.PreferenceManager.prototype.addObservers=function(global,map){if(global&&"function"!=typeof global)throw new Error("Invalid param: globals");if(global&&this.globalObservers_.push(global),map)for(var name in map){if(!(name in this.prefRecords_))throw new Error("Unknown preference: "+name);this.prefRecords_[name].addObserver(map[name])}},lib.PreferenceManager.prototype.notifyAll=function(){for(var name in this.prefRecords_)this.notifyChange_(name)},lib.PreferenceManager.prototype.notifyChange_=function(name){var record=this.prefRecords_[name];if(!record)throw new Error("Unknown preference: "+name);for(var currentValue=record.get(),i=0;i<this.globalObservers_.length;i++)this.globalObservers_[i](name,currentValue);for(i=0;i<record.observers.length;i++)record.observers[i](currentValue,name,this)},lib.PreferenceManager.prototype.createChild=function(listName,opt_hint,opt_id){var id,ids=this.get(listName);if(opt_id){if(id=opt_id,-1!=ids.indexOf(id))throw new Error("Duplicate child: "+listName+": "+id)}else for(;!id||-1!=ids.indexOf(id);)id=lib.f.randomInt(1,65535).toString(16),id=lib.f.zpad(id,4),opt_hint&&(id=opt_hint+":"+id);var childManager=this.childFactories_[listName](this,id);return childManager.trace=this.trace,childManager.resetAll(),this.childLists_[listName][id]=childManager,ids.push(id),this.set(listName,ids),childManager},lib.PreferenceManager.prototype.removeChild=function(listName,id){this.getChild(listName,id).resetAll();var ids=this.get(listName),i=ids.indexOf(id);-1!=i&&(ids.splice(i,1),this.set(listName,ids)),delete this.childLists_[listName][id]},lib.PreferenceManager.prototype.getChild=function(listName,id,opt_default){if(!(listName in this.childLists_))throw new Error("Unknown child list: "+listName);var childList=this.childLists_[listName];if(id in childList)return childList[id];if(void 0===opt_default)throw new Error('Unknown "'+listName+'" child: '+id);return opt_default},lib.PreferenceManager.diffChildLists=function(a,b){for(var rv={added:{},removed:{},common:{}},i=0;i<a.length;i++)-1!=b.indexOf(a[i])?rv.common[a[i]]=!0:rv.added[a[i]]=!0;for(i=0;i<b.length;i++)b[i]in rv.added||b[i]in rv.common||(rv.removed[b[i]]=!0);return rv},lib.PreferenceManager.prototype.syncChildList=function(listName,opt_callback){var pendingChildren=0;function onChildStorage(){0==--pendingChildren&&opt_callback&&opt_callback()}for(var currentIds=this.get(listName),oldIds=Object.keys(this.childLists_[listName]),i=(lib.PreferenceManager.diffChildLists(currentIds,oldIds),0);i<currentIds.length;i++){var id=currentIds[i],managerIndex=oldIds.indexOf(id);if(0<=managerIndex&&oldIds.splice(managerIndex,1),!this.childLists_[listName][id]){var childManager=this.childFactories_[listName](this,id);if(!childManager){console.warn("Unable to restore child: "+listName+": "+id);continue}childManager.trace=this.trace,this.childLists_[listName][id]=childManager,pendingChildren++,childManager.readStorage(onChildStorage)}}for(i=0;i<oldIds.length;i++)delete this.childLists_[listName][oldIds[i]];!pendingChildren&&opt_callback&&setTimeout(opt_callback)},lib.PreferenceManager.prototype.reset=function(name){var record=this.prefRecords_[name];if(!record)throw new Error("Unknown preference: "+name);this.storage.removeItem(this.prefix+name),record.currentValue!==this.DEFAULT_VALUE&&(record.currentValue=this.DEFAULT_VALUE,this.notifyChange_(name))},lib.PreferenceManager.prototype.resetAll=function(){var changed=[];for(var listName in this.childLists_){var childList=this.childLists_[listName];for(var id in childList)childList[id].resetAll()}for(var name in this.prefRecords_)this.prefRecords_[name].currentValue!==this.DEFAULT_VALUE&&(this.prefRecords_[name].currentValue=this.DEFAULT_VALUE,changed.push(name));var keys=Object.keys(this.prefRecords_).map(function(el){return this.prefix+el}.bind(this));this.storage.removeItems(keys),changed.forEach(this.notifyChange_.bind(this))},lib.PreferenceManager.prototype.diff=function(a,b){return(void 0===a?"undefined":_typeof2(a))!==(void 0===b?"undefined":_typeof2(b))||!/^(undefined|boolean|number|string)$/.test(void 0===a?"undefined":_typeof2(a))||a!==b},lib.PreferenceManager.prototype.changeDefault=function(name,newValue){var record=this.prefRecords_[name];if(!record)throw new Error("Unknown preference: "+name);this.diff(record.defaultValue,newValue)&&(record.currentValue===this.DEFAULT_VALUE?(record.defaultValue=newValue,this.notifyChange_(name)):record.defaultValue=newValue)},lib.PreferenceManager.prototype.changeDefaults=function(map){for(var key in map)this.changeDefault(key,map[key])},lib.PreferenceManager.prototype.set=function(name,newValue){var record=this.prefRecords_[name];if(!record)throw new Error("Unknown preference: "+name);var oldValue=record.get();this.diff(oldValue,newValue)&&(this.diff(record.defaultValue,newValue)?(record.currentValue=newValue,this.storage.setItem(this.prefix+name,newValue)):(record.currentValue=this.DEFAULT_VALUE,this.storage.removeItem(this.prefix+name)),setTimeout(this.notifyChange_.bind(this,name),0))},lib.PreferenceManager.prototype.get=function(name){var record=this.prefRecords_[name];if(!record)throw new Error("Unknown preference: "+name);return record.get()},lib.PreferenceManager.prototype.exportAsJson=function(){var rv={};for(var name in this.prefRecords_)if(name in this.childLists_){rv[name]=[];for(var childIds=this.get(name),i=0;i<childIds.length;i++){var id=childIds[i];rv[name].push({id:id,json:this.getChild(name,id).exportAsJson()})}}else{var record=this.prefRecords_[name];record.currentValue!=this.DEFAULT_VALUE&&(rv[name]=record.currentValue)}return rv},lib.PreferenceManager.prototype.importFromJson=function(json,opt_onComplete){function onWriteStorage(){--pendingWrites<1&&opt_onComplete&&opt_onComplete()}var pendingWrites=0;for(var name in json)if(name in this.childLists_)for(var childList=json[name],i=0;i<childList.length;i++){var id=childList[i].id,childPrefManager=this.childLists_[name][id];(childPrefManager=childPrefManager||this.createChild(name,null,id)).importFromJson(childList[i].json,onWriteStorage),pendingWrites++}else this.set(name,json[name],onWriteStorage),pendingWrites++},lib.PreferenceManager.prototype.onChildListChange_=function(listName){this.syncChildList(listName)},lib.PreferenceManager.prototype.onStorageChange_=function(map){for(var key in map)if(!this.prefix||0==key.lastIndexOf(this.prefix,0)){var name=key.substr(this.prefix.length);if(name in this.prefRecords_){var record=this.prefRecords_[name],newValue=map[key].newValue,currentValue=record.currentValue;currentValue===record.DEFAULT_VALUE&&(currentValue=void 0),this.diff(currentValue,newValue)&&(record.currentValue=null==newValue?record.DEFAULT_VALUE:newValue,this.notifyChange_(name))}}},lib.resource={resources_:{}},lib.resource.add=function(name,type,data){lib.resource.resources_[name]={type:type,name:name,data:data}},lib.resource.get=function(name,opt_defaultValue){if(name in lib.resource.resources_)return lib.resource.resources_[name];if(void 0===opt_defaultValue)throw"Unknown resource: "+name;return opt_defaultValue},lib.resource.getData=function(name,opt_defaultValue){if(name in lib.resource.resources_)return lib.resource.resources_[name].data;if(void 0===opt_defaultValue)throw"Unknown resource: "+name;return opt_defaultValue},lib.resource.getDataUrl=function(name,opt_defaultValue){var resource=lib.resource.get(name,opt_defaultValue);return"data:"+resource.type+","+resource.data},lib.Storage=new Object,lib.Storage.Chrome=function(storage){this.storage_=storage,this.observers_=[],chrome.storage.onChanged.addListener(this.onChanged_.bind(this))},lib.Storage.Chrome.prototype.onChanged_=function(changes,areaname){if(chrome.storage[areaname]==this.storage_)for(var i=0;i<this.observers_.length;i++)this.observers_[i](changes)},lib.Storage.Chrome.prototype.addObserver=function(callback){this.observers_.push(callback)},lib.Storage.Chrome.prototype.removeObserver=function(callback){var i=this.observers_.indexOf(callback);-1!=i&&this.observers_.splice(i,1)},lib.Storage.Chrome.prototype.clear=function(opt_callback){this.storage_.clear(),opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Chrome.prototype.getItem=function(key,callback){this.storage_.get(key,callback)},lib.Storage.Chrome.prototype.getItems=function(keys,callback){this.storage_.get(keys,callback)},lib.Storage.Chrome.prototype.setItem=function(key,value,opt_callback){var _this2=this,obj={};obj[key]=value,this.storage_.set(obj,function onComplete(){if(chrome.runtime.lastError){if(chrome.runtime.lastError.message.indexOf("MAX_WRITE_OPERATIONS"))return console.warn("Will retry save of "+key+" after exceeding quota",chrome.runtime.lastError),void setTimeout(function(){return _this2.setItem(key,value,onComplete)},1e3);console.error("Unknown runtime error",chrome.runtime.lastError)}opt_callback&&opt_callback()})},lib.Storage.Chrome.prototype.setItems=function(obj,opt_callback){this.storage_.set(obj,opt_callback)},lib.Storage.Chrome.prototype.removeItem=function(key,opt_callback){this.storage_.remove(key,opt_callback)},lib.Storage.Chrome.prototype.removeItems=function(keys,opt_callback){this.storage_.remove(keys,opt_callback)},lib.Storage.Local=function(){this.observers_=[],this.storage_=window.localStorage,window.addEventListener("storage",this.onStorage_.bind(this))},lib.Storage.Local.prototype.onStorage_=function(e){if(e.storageArea==this.storage_){var prevValue=e.oldValue?JSON.parse(e.oldValue):e.oldValue,curValue=e.newValue?JSON.parse(e.newValue):e.newValue,o={};o[e.key]={oldValue:prevValue,newValue:curValue};for(var i=0;i<this.observers_.length;i++)this.observers_[i](o)}},lib.Storage.Local.prototype.addObserver=function(callback){this.observers_.push(callback)},lib.Storage.Local.prototype.removeObserver=function(callback){var i=this.observers_.indexOf(callback);-1!=i&&this.observers_.splice(i,1)},lib.Storage.Local.prototype.clear=function(opt_callback){this.storage_.clear(),opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Local.prototype.getItem=function(key,callback){var value=this.storage_.getItem(key);if("string"==typeof value)try{value=JSON.parse(value)}catch(e){}setTimeout(callback.bind(null,value),0)},lib.Storage.Local.prototype.getItems=function(keys,callback){for(var rv={},i=keys.length-1;0<=i;i--){var key=keys[i],value=this.storage_.getItem(key);if("string"==typeof value)try{rv[key]=JSON.parse(value)}catch(e){rv[key]=value}else keys.splice(i,1)}setTimeout(callback.bind(null,rv),0)},lib.Storage.Local.prototype.setItem=function(key,value,opt_callback){this.storage_.setItem(key,JSON.stringify(value)),opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Local.prototype.setItems=function(obj,opt_callback){for(var key in obj)this.storage_.setItem(key,JSON.stringify(obj[key]));opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Local.prototype.removeItem=function(key,opt_callback){this.storage_.removeItem(key),opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Local.prototype.removeItems=function(ary,opt_callback){for(var i=0;i<ary.length;i++)this.storage_.removeItem(ary[i]);opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Memory=function(){this.observers_=[],this.storage_={}},lib.Storage.Memory.prototype.addObserver=function(callback){this.observers_.push(callback)},lib.Storage.Memory.prototype.removeObserver=function(callback){var i=this.observers_.indexOf(callback);-1!=i&&this.observers_.splice(i,1)},lib.Storage.Memory.prototype.clear=function(opt_callback){var e={};for(var key in this.storage_)e[key]={oldValue:this.storage_[key],newValue:void 0};this.storage_={},setTimeout(function(){for(var i=0;i<this.observers_.length;i++)this.observers_[i](e)}.bind(this),0),opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Memory.prototype.getItem=function(key,callback){var value=this.storage_[key];if("string"==typeof value)try{value=JSON.parse(value)}catch(e){}setTimeout(callback.bind(null,value),0)},lib.Storage.Memory.prototype.getItems=function(keys,callback){for(var rv={},i=keys.length-1;0<=i;i--){var key=keys[i],value=this.storage_[key];if("string"==typeof value)try{rv[key]=JSON.parse(value)}catch(e){rv[key]=value}else keys.splice(i,1)}setTimeout(callback.bind(null,rv),0)},lib.Storage.Memory.prototype.setItem=function(key,value,opt_callback){var oldValue=this.storage_[key];this.storage_[key]=JSON.stringify(value);var e={};e[key]={oldValue:oldValue,newValue:value},setTimeout(function(){for(var i=0;i<this.observers_.length;i++)this.observers_[i](e)}.bind(this),0),opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Memory.prototype.setItems=function(obj,opt_callback){var e={};for(var key in obj)e[key]={oldValue:this.storage_[key],newValue:obj[key]},this.storage_[key]=JSON.stringify(obj[key]);setTimeout(function(){for(var i=0;i<this.observers_.length;i++)this.observers_[i](e)}.bind(this)),opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Memory.prototype.removeItem=function(key,opt_callback){delete this.storage_[key],opt_callback&&setTimeout(opt_callback,0)},lib.Storage.Memory.prototype.removeItems=function(ary,opt_callback){for(var i=0;i<ary.length;i++)delete this.storage_[ary[i]];opt_callback&&setTimeout(opt_callback,0)},lib.TestManager=function(opt_log){this.log=opt_log||new lib.TestManager.Log},lib.TestManager.prototype.createTestRun=function(opt_cx){return new lib.TestManager.TestRun(this,opt_cx)},lib.TestManager.prototype.onTestRunComplete=function(testRun){},lib.TestManager.prototype.testPreamble=function(result,cx){},lib.TestManager.prototype.testPostamble=function(result,cx){},lib.TestManager.Log=function(){var _this3=this,opt_console=0<arguments.length&&void 0!==arguments[0]?arguments[0]:console;this.save=!1,this.data="",this.prefix_="",this.prefixStack_=0,this.console_=opt_console,["log","debug","info","warn","error"].forEach(function(level){var msgPrefix="";switch(level){case"debug":case"warn":case"error":msgPrefix=level.toUpperCase()+": "}var oLog=_this3.console_[level];_this3[level]=_this3.console_[level]=function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];_this3.save&&(_this3.data+=_this3.prefix_+msgPrefix+args.join(" ")+"\n"),oLog.apply(_this3.console_,args)}}),["group","groupCollapsed"].forEach(function(group){var oGroup=_this3.console_[group];_this3[group]=_this3.console_[group]=function(){var label=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";oGroup(label),_this3.save&&(_this3.data+=_this3.prefix_+label+"\n"),_this3.prefix_="  ".repeat(++_this3.prefixStack_)}});var oGroupEnd=this.console_.groupEnd;this.groupEnd=this.console_.groupEnd=function(){oGroupEnd(),_this3.prefix_="  ".repeat(--_this3.prefixStack_)}},lib.TestManager.Suite=function(suiteName){function ctor(testManager,cx){this.testManager_=testManager,this.suiteName=suiteName,this.setup(cx)}return ctor.suiteName=suiteName,ctor.addTest=lib.TestManager.Suite.addTest,ctor.disableTest=lib.TestManager.Suite.disableTest,ctor.getTest=lib.TestManager.Suite.getTest,ctor.getTestList=lib.TestManager.Suite.getTestList,ctor.testList_=[],ctor.testMap_={},ctor.prototype=Object.create(lib.TestManager.Suite.prototype),ctor.constructor=lib.TestManager.Suite,lib.TestManager.Suite.subclasses.push(ctor),ctor},lib.TestManager.Suite.subclasses=[],lib.TestManager.Suite.addTest=function(testName,testFunction){if(testName in this.testMap_)throw"Duplicate test name: "+testName;var test=new lib.TestManager.Test(this,testName,testFunction);this.testMap_[testName]=test,this.testList_.push(test)},lib.TestManager.Suite.disableTest=function(testName,testFunction){if(testName in this.testMap_)throw"Duplicate test name: "+testName;var test=new lib.TestManager.Test(this,testName,testFunction);console.log("Disabled test: "+test.fullName)},lib.TestManager.Suite.getTest=function(testName){return this.testMap_[testName]},lib.TestManager.Suite.getTestList=function(){return this.testList_},lib.TestManager.Suite.prototype.setDefaults=function(cx,defaults){for(var k in defaults)this[k]=k in cx?cx[k]:defaults[k]},lib.TestManager.Suite.prototype.setup=function(cx){},lib.TestManager.Suite.prototype.preamble=function(result,cx){},lib.TestManager.Suite.prototype.postamble=function(result,cx){},lib.TestManager.Test=function(suiteClass,testName,testFunction){this.suiteClass=suiteClass,this.testName=testName,this.fullName=suiteClass.suiteName+"["+testName+"]",this.testFunction_=testFunction},lib.TestManager.Test.prototype.run=function(result){try{this.testFunction_.apply(result.suite,[result,result.testRun.cx])}catch(ex){if(ex instanceof lib.TestManager.Result.TestComplete)return;result.println("Test raised an exception: "+ex),ex.stack&&(ex.stack instanceof Array?result.println(ex.stack.join("\n")):result.println(ex.stack)),result.completeTest_(result.FAILED,!1)}},lib.TestManager.TestRun=function(testManager,cx){this.testManager=testManager,this.log=testManager.log,this.cx=cx||{},this.failures=[],this.passes=[],this.startDate=null,this.duration=null,this.currentResult=null,this.maxFailures=0,this.panic=!1,this.testQueue_=[]},lib.TestManager.TestRun.prototype.ALL_TESTS=lib.f.createEnum("<all-tests>"),lib.TestManager.TestRun.prototype.selectTest=function(test){this.testQueue_.push(test)},lib.TestManager.TestRun.prototype.selectSuite=function(suiteClass,opt_pattern){for(var pattern=opt_pattern||this.ALL_TESTS,selectCount=0,testList=suiteClass.getTestList(),j=0;j<testList.length;j++){var test=testList[j];if(pattern!==this.ALL_TESTS)if(pattern instanceof RegExp){if(!pattern.test(test.testName))continue}else if(test.testName!=pattern)continue;this.selectTest(test),selectCount++}return selectCount},lib.TestManager.TestRun.prototype.selectPattern=function(pattern){for(var selectCount=0,i=0;i<lib.TestManager.Suite.subclasses.length;i++)selectCount+=this.selectSuite(lib.TestManager.Suite.subclasses[i],pattern);return selectCount||this.log.warn("No tests matched selection criteria: "+pattern),selectCount},lib.TestManager.TestRun.prototype.onUncaughtException_=function(message,file,line){if(0==message.indexOf("Uncaught lib.TestManager.Result.TestComplete")||-1!=message.indexOf("status: passed"))return!0;if(this.currentResult&&message!="Uncaught "+this.currentResult.expectedErrorMessage_){var when="during";return this.currentResult.status!=this.currentResult.PENDING&&(when="after"),this.log.error("Uncaught exception "+when+" test case: "+this.currentResult.test.fullName),this.log.error(message+", "+file+":"+line),this.currentResult.completeTest_(this.currentResult.FAILED,!1),!1}},lib.TestManager.TestRun.prototype.onTestRunComplete_=function(opt_skipTimeout){opt_skipTimeout?(this.duration=new Date-this.startDate,this.log.groupEnd(),this.log.info(this.passes.length+" passed, "+this.failures.length+" failed, "+this.msToSeconds_(this.duration)),this.summarize(),window.onerror=null,this.testManager.onTestRunComplete(this)):setTimeout(this.onTestRunComplete_.bind(this),0,!0)},lib.TestManager.TestRun.prototype.onResultComplete=function(result){try{this.testManager.testPostamble(result,this.cx),result.suite.postamble(result,this.ctx)}catch(ex){this.log.error("Unexpected exception in postamble: "+(ex.stack?ex.stack:ex)),this.panic=!0}if(result.status!=result.PASSED?this.log.error(result.status):500<result.duration&&this.log.warn("Slow test took "+this.msToSeconds_(result.duration)),this.log.groupEnd(),result.status==result.FAILED)this.failures.push(result),this.currentSuite=null;else{if(result.status!=result.PASSED)return this.log.error("Unknown result status: "+result.test.fullName+": "+result.status),void(this.panic=!0);this.passes.push(result)}this.runNextTest_()},lib.TestManager.TestRun.prototype.onResultReComplete=function(result,lateStatus){this.log.error("Late complete for test: "+result.test.fullName+": "+lateStatus);var index=this.passes.indexOf(result);0<=index&&(this.passes.splice(index,1),this.failures.push(result))},lib.TestManager.TestRun.prototype.runNextTest_=function(){if(!this.panic&&this.testQueue_.length){if(this.maxFailures&&this.failures.length>=this.maxFailures)return this.log.error("Maximum failure count reached, aborting test run."),void this.onTestRunComplete_();var test=this.testQueue_[0],suite=this.currentResult?this.currentResult.suite:null;try{suite&&suite instanceof test.suiteClass||(suite&&this.log.groupEnd(),this.log.group(test.suiteClass.suiteName),suite=new test.suiteClass(this.testManager,this.cx))}catch(ex){return this.log.error("Exception during setup: "+(ex.stack?ex.stack:ex)),this.panic=!0,void this.onTestRunComplete_()}try{this.log.group(test.testName),this.currentResult=new lib.TestManager.Result(this,suite,test),this.testManager.testPreamble(this.currentResult,this.cx),suite.preamble(this.currentResult,this.cx),this.testQueue_.shift()}catch(ex){return this.log.error("Unexpected exception during test preamble: "+(ex.stack?ex.stack:ex)),this.log.groupEnd(),this.panic=!0,void this.onTestRunComplete_()}try{this.currentResult.run()}catch(ex){this.log.error("Unexpected exception during test run: "+(ex.stack?ex.stack:ex)),this.panic=!0}}else this.onTestRunComplete_()},lib.TestManager.TestRun.prototype.run=function(){this.log.info("Running "+this.testQueue_.length+" test(s)"),window.onerror=this.onUncaughtException_.bind(this),this.startDate=new Date,this.runNextTest_()},lib.TestManager.TestRun.prototype.msToSeconds_=function(ms){return(ms/1e3).toFixed(2)+"s"},lib.TestManager.TestRun.prototype.summarize=function(){if(this.failures.length)for(var i=0;i<this.failures.length;i++)this.log.error("FAILED: "+this.failures[i].test.fullName);this.testQueue_.length&&this.log.warn("Test run incomplete: "+this.testQueue_.length+" test(s) were not run.")},lib.TestManager.Result=function(testRun,suite,test){this.testRun=testRun,this.suite=suite,this.test=test,this.startDate=null,this.duration=null,this.status=this.PENDING,this.expectedErrorMessage_=null},lib.TestManager.Result.prototype.PENDING="pending",lib.TestManager.Result.prototype.FAILED="FAILED",lib.TestManager.Result.prototype.PASSED="passed",lib.TestManager.Result.TestComplete=function(result){this.result=result},lib.TestManager.Result.TestComplete.prototype.toString=function(){return"lib.TestManager.Result.TestComplete: "+this.result.test.fullName+", status: "+this.result.status},lib.TestManager.Result.prototype.run=function(){this.startDate=new Date,this.test.run(this),this.status!=this.PENDING||this.timeout_||(this.println("Test did not return a value and did not request more time."),this.completeTest_(this.FAILED,!1))},lib.TestManager.Result.prototype.expectErrorMessage=function(str){this.expectedErrorMessage_=str},lib.TestManager.Result.prototype.onTimeout_=function(){this.timeout_=null,this.status==this.PENDING&&(this.println("Test timed out."),this.completeTest_(this.FAILED,!1))},lib.TestManager.Result.prototype.requestTime=function(ms){this.timeout_&&clearTimeout(this.timeout_),this.timeout_=setTimeout(this.onTimeout_.bind(this),ms)},lib.TestManager.Result.prototype.completeTest_=function(status,opt_throw){if(this.status==this.PENDING?(this.duration=new Date-this.startDate,this.status=status,this.testRun.onResultComplete(this)):this.testRun.onResultReComplete(this,status),arguments.length<2||opt_throw)throw new lib.TestManager.Result.TestComplete(this)},lib.TestManager.Result.prototype.assertEQ=function(actual,expected,opt_name){function format(value){if("number"==typeof value)return value;var ary=String(value).split("\n").map(function(e){return JSON.stringify(e)});return 1<ary.length?"\n"+ary.join("\n"):ary.join("\n")}if(actual!==expected&&!(expected instanceof Array&&lib.array.compare(actual,expected))){var name=opt_name?"["+opt_name+"]":"";this.fail("assertEQ"+name+": "+this.getCallerLocation_(1)+": "+format(actual)+" !== "+format(expected))}},lib.TestManager.Result.prototype.assert=function(actual,opt_name){if(!0!==actual){var name=opt_name?"["+opt_name+"]":"";this.fail("assert"+name+": "+this.getCallerLocation_(1)+": "+String(actual))}},lib.TestManager.Result.prototype.getCallerLocation_=function(frameIndex){try{throw new Error}catch(ex){var ary=ex.stack.split("\n")[frameIndex+2].match(/([^/]+:\d+):\d+\)?$/);return ary?ary[1]:"???"}},lib.TestManager.Result.prototype.println=function(message){this.testRun.log.info(message)},lib.TestManager.Result.prototype.fail=function(opt_message){arguments.length&&this.println(opt_message),this.completeTest_(this.FAILED,!0)},lib.TestManager.Result.prototype.pass=function(){this.completeTest_(this.PASSED,!0)},lib.UTF8Decoder=function(){this.bytesLeft=0,this.codePoint=0,this.lowerBound=0},lib.UTF8Decoder.prototype.decode=function(str){for(var ret="",i=0;i<str.length;i++){var c=str.charCodeAt(i);if(0==this.bytesLeft)c<=127?ret+=str.charAt(i):192<=c&&c<=223?(this.codePoint=c-192,this.bytesLeft=1,this.lowerBound=128):224<=c&&c<=239?(this.codePoint=c-224,this.bytesLeft=2,this.lowerBound=2048):240<=c&&c<=247?(this.codePoint=c-240,this.bytesLeft=3,this.lowerBound=65536):248<=c&&c<=251?(this.codePoint=c-248,this.bytesLeft=4,this.lowerBound=2097152):252<=c&&c<=253?(this.codePoint=c-252,this.bytesLeft=5,this.lowerBound=67108864):ret+="�";else if(128<=c&&c<=191){if(this.bytesLeft--,this.codePoint=(this.codePoint<<6)+(c-128),0==this.bytesLeft){var codePoint=this.codePoint;codePoint<this.lowerBound||55296<=codePoint&&codePoint<=57343||1114111<codePoint?ret+="�":codePoint<65536?ret+=String.fromCharCode(codePoint):(codePoint-=65536,ret+=String.fromCharCode(55296+(codePoint>>>10&1023),56320+(1023&codePoint)))}}else ret+="�",this.bytesLeft=0,i--}return ret},lib.decodeUTF8=function(utf8){return(new lib.UTF8Decoder).decode(utf8)},lib.encodeUTF8=function(str){for(var ret="",i=0;i<str.length;i++){var bytesLeft,c=str.charCodeAt(i);if(56320<=c&&c<=57343)c=65533;else if(55296<=c&&c<=56319)if(i+1<str.length){var d=str.charCodeAt(i+1);56320<=d&&d<=57343?(c=65536+((1023&c)<<10)+(1023&d),i++):c=65533}else c=65533;if(c<=127)ret+=str.charAt(i);else for(bytesLeft=c<=2047?(ret+=String.fromCharCode(192|c>>>6),1):c<=65535?(ret+=String.fromCharCode(224|c>>>12),2):(ret+=String.fromCharCode(240|c>>>18),3);0<bytesLeft;)bytesLeft--,ret+=String.fromCharCode(128|c>>>6*bytesLeft&63)}return ret},lib.wc={},lib.wc.nulWidth=0,lib.wc.controlWidth=0,lib.wc.regardCjkAmbiguous=!1,lib.wc.cjkAmbiguousWidth=2,lib.wc.combining=[[173,173],[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1756],[1759,1764],[1767,1768],[1770,1773],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2260,2273],[2275,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43452],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531],[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70090,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70460,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[72193,72198],[72201,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[92912,92916],[92976,92982],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],lib.wc.ambiguous=[[161,161],[164,164],[167,168],[170,170],[173,174],[176,180],[182,186],[188,191],[198,198],[208,208],[215,216],[222,225],[230,230],[232,234],[236,237],[240,240],[242,243],[247,250],[252,252],[254,254],[257,257],[273,273],[275,275],[283,283],[294,295],[299,299],[305,307],[312,312],[319,322],[324,324],[328,331],[333,333],[338,339],[358,359],[363,363],[462,462],[464,464],[466,466],[468,468],[470,470],[472,472],[474,474],[476,476],[593,593],[609,609],[708,708],[711,711],[713,715],[717,717],[720,720],[728,731],[733,733],[735,735],[768,879],[913,929],[931,937],[945,961],[963,969],[1025,1025],[1040,1103],[1105,1105],[4352,4447],[8208,8208],[8211,8214],[8216,8217],[8220,8221],[8224,8226],[8228,8231],[8240,8240],[8242,8243],[8245,8245],[8251,8251],[8254,8254],[8308,8308],[8319,8319],[8321,8324],[8364,8364],[8451,8451],[8453,8453],[8457,8457],[8467,8467],[8470,8470],[8481,8482],[8486,8486],[8491,8491],[8531,8532],[8539,8542],[8544,8555],[8560,8569],[8585,8585],[8592,8601],[8632,8633],[8658,8658],[8660,8660],[8679,8679],[8704,8704],[8706,8707],[8711,8712],[8715,8715],[8719,8719],[8721,8721],[8725,8725],[8730,8730],[8733,8736],[8739,8739],[8741,8741],[8743,8748],[8750,8750],[8756,8759],[8764,8765],[8776,8776],[8780,8780],[8786,8786],[8800,8801],[8804,8807],[8810,8811],[8814,8815],[8834,8835],[8838,8839],[8853,8853],[8857,8857],[8869,8869],[8895,8895],[8978,8978],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9312,9449],[9451,9547],[9552,9587],[9600,9615],[9618,9621],[9632,9633],[9635,9641],[9650,9651],[9654,9655],[9660,9661],[9664,9665],[9670,9672],[9675,9675],[9678,9681],[9698,9701],[9711,9711],[9725,9726],[9733,9734],[9737,9737],[9742,9743],[9748,9749],[9756,9756],[9758,9758],[9792,9792],[9794,9794],[9800,9811],[9824,9825],[9827,9829],[9831,9834],[9836,9837],[9839,9839],[9855,9855],[9875,9875],[9886,9887],[9889,9889],[9898,9899],[9917,9919],[9924,9953],[9955,9955],[9960,9983],[9989,9989],[9994,9995],[10024,10024],[10045,10045],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10102,10111],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11097],[11904,12255],[12272,12350],[12352,19903],[19968,42191],[43360,43391],[44032,55203],[57344,64255],[65024,65049],[65072,65135],[65281,65376],[65504,65510],[65533,65533],[94176,94177],[94208,101119],[110592,110895],[110960,111359],[126980,126980],[127183,127183],[127232,127242],[127248,127277],[127280,127337],[127344,127404],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128747,128748],[128756,128760],[129296,129342],[129344,129356],[129360,129387],[129408,129431],[129472,129472],[129488,129510],[131072,196605],[196608,262141],[917760,917999],[983040,1048573],[1048576,1114109]],lib.wc.unambiguous=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,12255],[12272,12350],[12352,12871],[12880,19903],[19968,42191],[43360,43391],[44032,55203],[63744,64255],[65040,65049],[65072,65135],[65281,65376],[65504,65510],[94176,94177],[94208,101119],[110592,110895],[110960,111359],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128747,128748],[128756,128760],[129296,129342],[129344,129356],[129360,129387],[129408,129431],[129472,129472],[129488,129510],[131072,196605],[196608,262141]],lib.wc.binaryTableSearch_=function(ucs,table){var mid,min=0,max=table.length-1;if(ucs<table[min][0]||ucs>table[max][1])return!1;for(;min<=max;)if(ucs>table[mid=Math.floor((min+max)/2)][1])min=mid+1;else{if(!(ucs<table[mid][0]))return!0;max=mid-1}return!1},lib.wc.isSpace=function(ucs){return lib.wc.binaryTableSearch_(ucs,lib.wc.combining)},lib.wc.isCjkAmbiguous=function(ucs){return lib.wc.binaryTableSearch_(ucs,lib.wc.ambiguous)},lib.wc.charWidth=function(ucs){return lib.wc.regardCjkAmbiguous?lib.wc.charWidthRegardAmbiguous(ucs):lib.wc.charWidthDisregardAmbiguous(ucs)},lib.wc.charWidthDisregardAmbiguous=function(ucs){return ucs<127?32<=ucs?1:0==ucs?lib.wc.nulWidth:lib.wc.controlWidth:ucs<160?lib.wc.controlWidth:lib.wc.isSpace(ucs)?0:lib.wc.binaryTableSearch_(ucs,lib.wc.unambiguous)?2:1},lib.wc.charWidthRegardAmbiguous=function(ucs){return lib.wc.isCjkAmbiguous(ucs)?lib.wc.cjkAmbiguousWidth:lib.wc.charWidthDisregardAmbiguous(ucs)},lib.wc.strWidth=function(str){for(var width,rv=0,i=0;i<str.length;){var codePoint=str.codePointAt(i);if((width=lib.wc.charWidth(codePoint))<0)return-1;rv+=width,i+=codePoint<=65535?1:2}return rv},lib.wc.substr=function(str,start,opt_width){var endIndex,width,startIndex=0;if(start)for(width=0;startIndex<str.length;){var codePoint=str.codePointAt(startIndex);if(start<(width+=lib.wc.charWidth(codePoint)))break;startIndex+=codePoint<=65535?1:2}if(null==opt_width)return str.substr(startIndex);for(endIndex=startIndex,width=0;endIndex<str.length;){var _codePoint=str.codePointAt(endIndex);if(opt_width<(width+=lib.wc.charWidth(_codePoint)))break;endIndex+=_codePoint<=65535?1:2}return str.substring(startIndex,endIndex)},lib.wc.substring=function(str,start,end){return lib.wc.substr(str,start,end-start)},lib.resource.add("libdot/changelog/version","text/plain","1.19"),lib.resource.add("libdot/changelog/date","text/plain","2017-10-16"),lib.rtdep("lib.Storage");var hterm={windowType:null,zoomWarningMessage:"ZOOM != 100%",notifyCopyMessage:"✂",desktopNotificationTitle:"♪ %(title) ♪",testDeps:["hterm.ScrollPort.Tests","hterm.Screen.Tests","hterm.Terminal.Tests","hterm.VT.Tests","hterm.VT.CannedTests"]};lib.registerInit("hterm",function(onInit){function onWindow(window){hterm.windowType=window.type,setTimeout(onInit,0)}hterm.defaultStorage||(window.chrome&&chrome.storage&&chrome.storage.sync?hterm.defaultStorage=new lib.Storage.Chrome(chrome.storage.sync):hterm.defaultStorage=new lib.Storage.Local);var isPackagedApp=!1;if(window.chrome&&chrome.runtime&&chrome.runtime.getManifest){var manifest=chrome.runtime.getManifest();isPackagedApp=manifest.app&&manifest.app.background}isPackagedApp?setTimeout(onWindow.bind(null,{type:"popup"}),0):window.chrome&&chrome.tabs?chrome.tabs.getCurrent(function onTab(tab){tab&&window.chrome?chrome.windows.get(tab.windowId,null,onWindow):(hterm.windowType="normal",setTimeout(onInit,0))}):setTimeout(onWindow.bind(null,{type:"normal"}),0)}),hterm.getClientSize=function(dom){return dom.getBoundingClientRect()},hterm.getClientWidth=function(dom){return dom.getBoundingClientRect().width},hterm.getClientHeight=function(dom){return dom.getBoundingClientRect().height},hterm.copySelectionToClipboard=function(document){try{document.execCommand("copy")}catch(firefoxException){}},hterm.pasteFromClipboard=function(document){try{return document.execCommand("paste")}catch(firefoxException){return!1}},hterm.notify=function(params){function def(curr,fallback){return void 0!==curr?curr:fallback}null==params&&(params={});var options={body:params.body,icon:def(params.icon,lib.resource.getDataUrl("hterm/images/icon-96"))},title=def(params.title,window.document.title);title=title||"hterm",title=lib.f.replaceVars(hterm.desktopNotificationTitle,{title:title});var n=new Notification(title,options);return n.onclick=function(){window.focus(),this.close()},n},hterm.Size=function(width,height){this.width=width,this.height=height},hterm.Size.prototype.resize=function(width,height){this.width=width,this.height=height},hterm.Size.prototype.clone=function(){return new hterm.Size(this.width,this.height)},hterm.Size.prototype.setTo=function(that){this.width=that.width,this.height=that.height},hterm.Size.prototype.equals=function(that){return this.width==that.width&&this.height==that.height},hterm.Size.prototype.toString=function(){return"[hterm.Size: "+this.width+", "+this.height+"]"},hterm.RowCol=function(row,column,opt_overflow){this.row=row,this.column=column,this.overflow=!!opt_overflow},hterm.RowCol.prototype.move=function(row,column,opt_overflow){this.row=row,this.column=column,this.overflow=!!opt_overflow},hterm.RowCol.prototype.clone=function(){return new hterm.RowCol(this.row,this.column,this.overflow)},hterm.RowCol.prototype.setTo=function(that){this.row=that.row,this.column=that.column,this.overflow=that.overflow},hterm.RowCol.prototype.equals=function(that){return this.row==that.row&&this.column==that.column&&this.overflow==that.overflow},hterm.RowCol.prototype.toString=function(){return"[hterm.RowCol: "+this.row+", "+this.column+", "+this.overflow+"]"},lib.rtdep("lib.f"),hterm.Frame=function(terminal,url,opt_options){this.terminal_=terminal,this.div_=terminal.div_,this.url=url,this.options=opt_options||{},this.iframe_=null,this.container_=null,this.messageChannel_=null},hterm.Frame.prototype.onMessage_=function(e){switch(e.data.name){case"ipc-init-ok":return void this.sendTerminalInfo_();case"terminal-info-ok":return this.container_.style.display="flex",this.messageChannel_.port1.onmessage=this.onMessage.bind(this),void this.onLoad();default:return void console.log("Unknown message from frame:",e.data)}},hterm.Frame.prototype.onMessage=function(){},hterm.Frame.prototype.onLoad_=function(){this.messageChannel_=new MessageChannel,this.messageChannel_.port1.onmessage=this.onMessage_.bind(this),this.messageChannel_.port1.start(),this.iframe_.contentWindow.postMessage({name:"ipc-init",argv:[{messagePort:this.messageChannel_.port2}]},this.url,[this.messageChannel_.port2])},hterm.Frame.prototype.onLoad=function(){},hterm.Frame.prototype.sendTerminalInfo_=function(){lib.f.getAcceptLanguages(function(languages){this.postMessage("terminal-info",[{acceptLanguages:languages,foregroundColor:this.terminal_.getForegroundColor(),backgroundColor:this.terminal_.getBackgroundColor(),cursorColor:this.terminal_.getCursorColor(),fontSize:this.terminal_.getFontSize(),fontFamily:this.terminal_.getFontFamily(),baseURL:lib.f.getURL("/")}])}.bind(this))},hterm.Frame.prototype.onCloseClicked_=function(){this.close()},hterm.Frame.prototype.close=function(){this.container_&&this.container_.parentNode&&(this.container_.parentNode.removeChild(this.container_),this.onClose())},hterm.Frame.prototype.onClose=function(){},hterm.Frame.prototype.postMessage=function(name,argv){if(!this.messageChannel_)throw new Error("Message channel is not set up.");this.messageChannel_.port1.postMessage({name:name,argv:argv})},hterm.Frame.prototype.show=function(){var self=this;function opt(name,defaultValue){return name in self.options?self.options[name]:defaultValue}self=this;if(this.container_&&this.container_.parentNode)console.error("Frame already visible");else{var divSize=hterm.getClientSize(this.div_),width=opt("width",640),height=opt("height",480),document=(divSize.width,divSize.height,this.terminal_.document_),container=this.container_=document.createElement("div");container.style.cssText="position: absolute;display: none;flex-direction: column;top: 10%;left: 4%;width: 90%;height: 80%;min-height: 20%;max-height: 80%;box-shadow: 0 0 2px "+this.terminal_.getForegroundColor()+";border: 2px "+this.terminal_.getForegroundColor()+" solid;";var iframe=this.iframe_=document.createElement("iframe");iframe.onload=this.onLoad_.bind(this),iframe.style.cssText="display: flex;flex: 1;width: 100%",iframe.setAttribute("src",this.url),iframe.setAttribute("seamless",!0),container.appendChild(iframe),this.div_.appendChild(container)}},lib.rtdep("hterm.Keyboard.KeyMap"),hterm.Keyboard=function(terminal){this.terminal=terminal,this.keyboardElement_=null,this.handlers_=[["focusout",this.onFocusOut_.bind(this)],["keydown",this.onKeyDown_.bind(this)],["keypress",this.onKeyPress_.bind(this)],["keyup",this.onKeyUp_.bind(this)],["textInput",this.onTextInput_.bind(this)]],this.keyMap=new hterm.Keyboard.KeyMap(this),this.bindings=new hterm.Keyboard.Bindings(this),this.altGrMode="none",this.shiftInsertPaste=!0,this.homeKeysScroll=!1,this.pageKeysScroll=!1,this.ctrlPlusMinusZeroZoom=!0,this.ctrlCCopy=!1,this.ctrlVPaste=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.backspaceSendsBackspace=!1,this.characterEncoding="utf-8",this.metaSendsEscape=!0,this.passMetaV=!0,this.altSendsWhat="escape",this.altIsMeta=!1,this.altBackspaceIsMetaBackspace=!1,this.altKeyPressed=0,this.mediaKeysAreFKeys=!1,this.previousAltSendsWhat_=null},hterm.Keyboard.KeyActions={CANCEL:lib.f.createEnum("CANCEL"),DEFAULT:lib.f.createEnum("DEFAULT"),PASS:lib.f.createEnum("PASS"),STRIP:lib.f.createEnum("STRIP")},hterm.Keyboard.prototype.encode=function(str){return"utf-8"==this.characterEncoding?this.terminal.vt.encodeUTF8(str):str},hterm.Keyboard.prototype.installKeyboard=function(element){if(element!=this.keyboardElement_){element&&this.keyboardElement_&&this.installKeyboard(null);for(var i=0;i<this.handlers_.length;i++){var handler=this.handlers_[i];element?element.addEventListener(handler[0],handler[1]):this.keyboardElement_.removeEventListener(handler[0],handler[1])}this.keyboardElement_=element}},hterm.Keyboard.prototype.uninstallKeyboard=function(){this.installKeyboard(null)},hterm.Keyboard.prototype.onTextInput_=function(e){e.data&&this.terminal.onVTKeystroke(e.data)},hterm.Keyboard.prototype.onKeyPress_=function(e){var lowerKey=String.fromCharCode(e.which).toLowerCase();if(!e.ctrlKey&&!e.metaKey||"c"!=lowerKey&&"v"!=lowerKey){if(e.altKey&&"browser-key"==this.altSendsWhat&&0==e.charCode){var ch=String.fromCharCode(e.keyCode);e.shiftKey||(ch=ch.toLowerCase()),ch.charCodeAt(0)+128}else 32<=e.charCode&&(ch=e.charCode);ch&&this.terminal.onVTKeystroke(String.fromCharCode(ch)),e.preventDefault(),e.stopPropagation()}},hterm.Keyboard.prototype.preventChromeAppNonCtrlShiftDefault_=function(e){window.chrome&&window.chrome.app&&window.chrome.app.window&&(e.ctrlKey&&e.shiftKey||e.preventDefault())},hterm.Keyboard.prototype.onFocusOut_=function(e){this.altKeyPressed=0},hterm.Keyboard.prototype.onKeyUp_=function(e){18==e.keyCode&&(this.altKeyPressed=this.altKeyPressed&~(1<<e.location-1)),27==e.keyCode&&this.preventChromeAppNonCtrlShiftDefault_(e)},hterm.Keyboard.prototype.onKeyDown_=function(e){18==e.keyCode&&(this.altKeyPressed=this.altKeyPressed|1<<e.location-1),27==e.keyCode&&this.preventChromeAppNonCtrlShiftDefault_(e);var keyDef=this.keyMap.keyDefs[e.keyCode];if(keyDef){var action,resolvedActionType=null,self=this,CANCEL=hterm.Keyboard.KeyActions.CANCEL,DEFAULT=hterm.Keyboard.KeyActions.DEFAULT,PASS=hterm.Keyboard.KeyActions.PASS,STRIP=hterm.Keyboard.KeyActions.STRIP,control=e.ctrlKey,alt=!this.altIsMeta&&e.altKey,meta=this.altIsMeta&&e.altKey||e.metaKey,isPrintable=!/^\[\w+\]$/.test(keyDef.keyCap);switch(this.altGrMode){case"ctrl-alt":isPrintable&&control&&alt&&(alt=control=!1);break;case"right-alt":isPrintable&&2&this.terminal.keyboard.altKeyPressed&&(alt=control=!1);break;case"left-alt":isPrintable&&1&this.terminal.keyboard.altKeyPressed&&(alt=control=!1)}action=getAction(control?"control":alt?"alt":meta?"meta":"normal");var shift=!e.maskShiftKey&&e.shiftKey,keyDown={keyCode:e.keyCode,shift:e.shiftKey,ctrl:control,alt:alt,meta:meta},binding=this.bindings.getBinding(keyDown);if(binding&&(shift=control=alt=meta=!1,resolvedActionType="normal","function"==typeof(action=binding.action)&&(action=action.call(this,this.terminal,keyDown))),alt&&"browser-key"==this.altSendsWhat&&action==DEFAULT&&(action=PASS),action!==PASS&&(action!==DEFAULT||control||alt||meta)&&(action===STRIP&&(alt=control=!1,"function"==typeof(action=keyDef.normal)&&(action=action.apply(this.keyMap,[e,keyDef])),action==DEFAULT&&2==keyDef.keyCap.length&&(action=keyDef.keyCap.substr(shift?1:0,1))),e.preventDefault(),e.stopPropagation(),action!==CANCEL))if(action===DEFAULT||"string"==typeof action){if("control"==resolvedActionType?control=!1:"alt"==resolvedActionType?alt=!1:"meta"==resolvedActionType&&(meta=!1),"["==action.substr(0,2)&&(alt||control||shift||meta)){var imod=1;shift&&(imod+=1),alt&&(imod+=2),control&&(imod+=4),meta&&(imod+=8);var mod=";"+imod;action=3==action.length?"[1"+mod+action.substr(2,1):action.substr(0,action.length-1)+mod+action.substr(action.length-1)}else{if(action===DEFAULT)if(action=keyDef.keyCap.substr(shift?1:0,1),control)64<=(code=keyDef.keyCap.substr(0,1).charCodeAt(0))&&code<=95&&(action=String.fromCharCode(code-64));if(alt&&"8-bit"==this.altSendsWhat&&1==action.length){var code=action.charCodeAt(0)+128;action=String.fromCharCode(code)}(alt&&"escape"==this.altSendsWhat||meta&&this.metaSendsEscape)&&(action=""+action)}this.terminal.onVTKeystroke(action)}else console.warn("Invalid action: "+JSON.stringify(action))}else console.warn("No definition for keyCode: "+e.keyCode);function getAction(name){var action=keyDef[resolvedActionType=name];return"function"==typeof action&&(action=action.apply(self.keyMap,[e,keyDef])),action===DEFAULT&&"normal"!=name&&(action=getAction("normal")),action}},hterm.Keyboard.Bindings=function(){this.bindings_={}},hterm.Keyboard.Bindings.prototype.clear=function(){this.bindings_={}},hterm.Keyboard.Bindings.prototype.addBinding_=function(keyPattern,action){var binding=null,list=this.bindings_[keyPattern.keyCode];if(list)for(var i=0;i<list.length;i++)if(list[i].keyPattern.matchKeyPattern(keyPattern)){binding=list[i];break}binding?binding.action=action:(binding={keyPattern:keyPattern,action:action},list?(this.bindings_[keyPattern.keyCode].push(binding),list.sort(function(a,b){return hterm.Keyboard.KeyPattern.sortCompare(a.keyPattern,b.keyPattern)})):this.bindings_[keyPattern.keyCode]=[binding])},hterm.Keyboard.Bindings.prototype.addBinding=function(key,action){if("string"==typeof key){var sequence,p=new hterm.Parser;p.reset(key);try{sequence=p.parseKeySequence()}catch(ex){return void console.error(ex)}if(p.isComplete()){if("string"==typeof action){p.reset(action);try{action=p.parseKeyAction()}catch(ex){return void console.error(ex)}}p.isComplete()?this.addBinding_(new hterm.Keyboard.KeyPattern(sequence),action):console.error(p.error("Expected end of sequence: "+sequence))}else console.error(p.error("Expected end of sequence: "+sequence))}else this.addBinding_(key,action)},hterm.Keyboard.Bindings.prototype.addBindings=function(map){for(var key in map)this.addBinding(key,map[key])},hterm.Keyboard.Bindings.prototype.getBinding=function(keyDown){var list=this.bindings_[keyDown.keyCode];if(!list)return null;for(var i=0;i<list.length;i++){var binding=list[i];if(binding.keyPattern.matchKeyDown(keyDown))return binding}return null},lib.rtdep("hterm.Keyboard.KeyActions"),hterm.Keyboard.KeyMap=function(keyboard){this.keyboard=keyboard,this.keyDefs={},this.reset()},hterm.Keyboard.KeyMap.prototype.addKeyDef=function(keyCode,def){keyCode in this.keyDefs&&console.warn("Duplicate keyCode: "+keyCode),this.keyDefs[keyCode]=def},hterm.Keyboard.KeyMap.prototype.addKeyDefs=function(var_args){for(var i=0;i<arguments.length;i++)this.addKeyDef(arguments[i][0],{keyCap:arguments[i][1],normal:arguments[i][2],control:arguments[i][3],alt:arguments[i][4],meta:arguments[i][5]})},hterm.Keyboard.KeyMap.prototype.reset=function(){this.keyDefs={};var self=this;function resolve(action,e,k){return"function"==typeof action?action.apply(self,[e,k]):action}function ac(a,b){return function(e,k){return resolve(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||!self.keyboard.applicationCursor?a:b,e,k)}}function bs(a,b){return function(e,k){return resolve(self.keyboard.backspaceSendsBackspace?b:a,e,k)}}function sh(a,b){return function(e,k){var action=e.shiftKey?b:a;return e.maskShiftKey=!0,resolve(action,e,k)}}function alt(a,b){return function(e,k){return resolve(e.altKey?b:a,e,k)}}function mod(a,b){return function(e,k){return resolve(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?b:a,e,k)}}function ctl(ch){return String.fromCharCode(ch.charCodeAt(0)-64)}function c(m){return function(e,k){return this[m](e,k)}}function med(fn){return function(e,k){return self.keyboard.mediaKeysAreFKeys?resolve(fn,e,k):166==e.keyCode||167==e.keyCode||168==e.keyCode?hterm.Keyboard.KeyActions.CANCEL:hterm.Keyboard.KeyActions.PASS}}var CANCEL=hterm.Keyboard.KeyActions.CANCEL,DEFAULT=hterm.Keyboard.KeyActions.DEFAULT,PASS=hterm.Keyboard.KeyActions.PASS,STRIP=hterm.Keyboard.KeyActions.STRIP;this.addKeyDefs([0,"[UNKNOWN]",PASS,PASS,PASS,PASS],[27,"[ESC]","",DEFAULT,DEFAULT,DEFAULT],[112,"[F1]",mod("OP","[P"),DEFAULT,"[23~",DEFAULT],[113,"[F2]",mod("OQ","[Q"),DEFAULT,"[24~",DEFAULT],[114,"[F3]",mod("OR","[R"),DEFAULT,"[25~",DEFAULT],[115,"[F4]",mod("OS","[S"),DEFAULT,"[26~",DEFAULT],[116,"[F5]","[15~",DEFAULT,"[28~",DEFAULT],[117,"[F6]","[17~",DEFAULT,"[29~",DEFAULT],[118,"[F7]","[18~",DEFAULT,"[31~",DEFAULT],[119,"[F8]","[19~",DEFAULT,"[32~",DEFAULT],[120,"[F9]","[20~",DEFAULT,"[33~",DEFAULT],[121,"[F10]","[21~",DEFAULT,"[34~",DEFAULT],[122,"[F11]","[23~",DEFAULT,"[42~",DEFAULT],[123,"[F12]","[24~",DEFAULT,"[43~",DEFAULT],[192,"`~",DEFAULT,sh(ctl("@"),ctl("^")),DEFAULT,PASS],[49,"1!",DEFAULT,c("onCtrlNum_"),c("onAltNum_"),c("onMetaNum_")],[50,"2@",DEFAULT,c("onCtrlNum_"),c("onAltNum_"),c("onMetaNum_")],[51,"3#",DEFAULT,c("onCtrlNum_"),c("onAltNum_"),c("onMetaNum_")],[52,"4$",DEFAULT,c("onCtrlNum_"),c("onAltNum_"),c("onMetaNum_")],[53,"5%",DEFAULT,c("onCtrlNum_"),c("onAltNum_"),c("onMetaNum_")],[54,"6^",DEFAULT,c("onCtrlNum_"),c("onAltNum_"),c("onMetaNum_")],[55,"7&",DEFAULT,c("onCtrlNum_"),c("onAltNum_"),c("onMetaNum_")],[56,"8*",DEFAULT,c("onCtrlNum_"),c("onAltNum_"),c("onMetaNum_")],[57,"9(",DEFAULT,c("onCtrlNum_"),c("onAltNum_"),c("onMetaNum_")],[48,"0)",DEFAULT,c("onPlusMinusZero_"),c("onAltNum_"),c("onPlusMinusZero_")],[189,"-_",DEFAULT,c("onPlusMinusZero_"),DEFAULT,c("onPlusMinusZero_")],[187,"=+",DEFAULT,c("onPlusMinusZero_"),DEFAULT,c("onPlusMinusZero_")],[173,"-_",DEFAULT,c("onPlusMinusZero_"),DEFAULT,c("onPlusMinusZero_")],[61,"=+",DEFAULT,c("onPlusMinusZero_"),DEFAULT,c("onPlusMinusZero_")],[171,"+*",DEFAULT,c("onPlusMinusZero_"),DEFAULT,c("onPlusMinusZero_")],[8,"[BKSP]",bs("","\b"),bs("\b",""),DEFAULT,DEFAULT],[9,"[TAB]",sh("\t","[Z"),STRIP,PASS,DEFAULT],[81,"qQ",DEFAULT,ctl("Q"),DEFAULT,DEFAULT],[87,"wW",DEFAULT,ctl("W"),DEFAULT,DEFAULT],[69,"eE",DEFAULT,ctl("E"),DEFAULT,DEFAULT],[82,"rR",DEFAULT,ctl("R"),DEFAULT,DEFAULT],[84,"tT",DEFAULT,ctl("T"),DEFAULT,DEFAULT],[89,"yY",DEFAULT,ctl("Y"),DEFAULT,DEFAULT],[85,"uU",DEFAULT,ctl("U"),DEFAULT,DEFAULT],[73,"iI",DEFAULT,ctl("I"),DEFAULT,DEFAULT],[79,"oO",DEFAULT,ctl("O"),DEFAULT,DEFAULT],[80,"pP",DEFAULT,ctl("P"),DEFAULT,DEFAULT],[219,"[{",DEFAULT,ctl("["),DEFAULT,DEFAULT],[221,"]}",DEFAULT,ctl("]"),DEFAULT,DEFAULT],[220,"\\|",DEFAULT,ctl("\\"),DEFAULT,DEFAULT],[20,"[CAPS]",PASS,PASS,PASS,DEFAULT],[65,"aA",DEFAULT,ctl("A"),DEFAULT,DEFAULT],[83,"sS",DEFAULT,ctl("S"),DEFAULT,DEFAULT],[68,"dD",DEFAULT,ctl("D"),DEFAULT,DEFAULT],[70,"fF",DEFAULT,ctl("F"),DEFAULT,DEFAULT],[71,"gG",DEFAULT,ctl("G"),DEFAULT,DEFAULT],[72,"hH",DEFAULT,ctl("H"),DEFAULT,DEFAULT],[74,"jJ",DEFAULT,sh(ctl("J"),PASS),DEFAULT,DEFAULT],[75,"kK",DEFAULT,sh(ctl("K"),c("onClear_")),DEFAULT,DEFAULT],[76,"lL",DEFAULT,sh(ctl("L"),PASS),DEFAULT,DEFAULT],[186,";:",DEFAULT,STRIP,DEFAULT,DEFAULT],[222,"'\"",DEFAULT,STRIP,DEFAULT,DEFAULT],[13,"[ENTER]","\r",CANCEL,CANCEL,DEFAULT],[16,"[SHIFT]",PASS,PASS,PASS,DEFAULT],[90,"zZ",DEFAULT,ctl("Z"),DEFAULT,DEFAULT],[88,"xX",DEFAULT,ctl("X"),DEFAULT,DEFAULT],[67,"cC",DEFAULT,c("onCtrlC_"),DEFAULT,c("onMetaC_")],[86,"vV",DEFAULT,c("onCtrlV_"),DEFAULT,c("onMetaV_")],[66,"bB",DEFAULT,sh(ctl("B"),PASS),DEFAULT,sh(DEFAULT,PASS)],[78,"nN",DEFAULT,c("onCtrlN_"),DEFAULT,c("onMetaN_")],[77,"mM",DEFAULT,ctl("M"),DEFAULT,DEFAULT],[188,",<",DEFAULT,alt(STRIP,PASS),DEFAULT,DEFAULT],[190,".>",DEFAULT,alt(STRIP,PASS),DEFAULT,DEFAULT],[191,"/?",DEFAULT,sh(ctl("_"),ctl("?")),DEFAULT,DEFAULT],[17,"[CTRL]",PASS,PASS,PASS,PASS],[18,"[ALT]",PASS,PASS,PASS,PASS],[91,"[LAPL]",PASS,PASS,PASS,PASS],[32," ",DEFAULT,ctl("@"),DEFAULT,DEFAULT],[92,"[RAPL]",PASS,PASS,PASS,PASS],[93,"[RMENU]",PASS,PASS,PASS,PASS],[42,"[PRTSCR]",PASS,PASS,PASS,PASS],[145,"[SCRLK]",PASS,PASS,PASS,PASS],[19,"[BREAK]",PASS,PASS,PASS,PASS],[45,"[INSERT]",c("onKeyInsert_"),DEFAULT,DEFAULT,DEFAULT],[36,"[HOME]",c("onKeyHome_"),DEFAULT,DEFAULT,DEFAULT],[33,"[PGUP]",c("onKeyPageUp_"),DEFAULT,DEFAULT,DEFAULT],[46,"[DEL]",c("onKeyDel_"),DEFAULT,DEFAULT,DEFAULT],[35,"[END]",c("onKeyEnd_"),DEFAULT,DEFAULT,DEFAULT],[34,"[PGDOWN]",c("onKeyPageDown_"),DEFAULT,DEFAULT,DEFAULT],[38,"[UP]",c("onKeyArrowUp_"),DEFAULT,DEFAULT,DEFAULT],[40,"[DOWN]",c("onKeyArrowDown_"),DEFAULT,DEFAULT,DEFAULT],[39,"[RIGHT]",ac("[C","OC"),DEFAULT,DEFAULT,DEFAULT],[37,"[LEFT]",ac("[D","OD"),DEFAULT,DEFAULT,DEFAULT],[144,"[NUMLOCK]",PASS,PASS,PASS,PASS],[96,"[KP0]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[97,"[KP1]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[98,"[KP2]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[99,"[KP3]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[100,"[KP4]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[101,"[KP5]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[102,"[KP6]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[103,"[KP7]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[104,"[KP8]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[105,"[KP9]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[107,"[KP+]",DEFAULT,c("onPlusMinusZero_"),DEFAULT,c("onPlusMinusZero_")],[109,"[KP-]",DEFAULT,c("onPlusMinusZero_"),DEFAULT,c("onPlusMinusZero_")],[106,"[KP*]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[111,"[KP/]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[110,"[KP.]",DEFAULT,DEFAULT,DEFAULT,DEFAULT],[166,"[BACK]",med(mod("OP","[P")),DEFAULT,"[23~",DEFAULT],[167,"[FWD]",med(mod("OQ","[Q")),DEFAULT,"[24~",DEFAULT],[168,"[RELOAD]",med(mod("OR","[R")),DEFAULT,"[25~",DEFAULT],[183,"[FSCR]",med(mod("OS","[S")),DEFAULT,"[26~",DEFAULT],[182,"[WINS]",med("[15~"),DEFAULT,"[28~",DEFAULT],[216,"[BRIT-]",med("[17~"),DEFAULT,"[29~",DEFAULT],[217,"[BRIT+]",med("[18~"),DEFAULT,"[31~",DEFAULT])},hterm.Keyboard.KeyMap.prototype.onKeyInsert_=function(e){return this.keyboard.shiftInsertPaste&&e.shiftKey?hterm.Keyboard.KeyActions.PASS:"[2~"},hterm.Keyboard.KeyMap.prototype.onKeyHome_=function(e){return!this.keyboard.homeKeysScroll^e.shiftKey?e.altey||e.ctrlKey||e.shiftKey||!this.keyboard.applicationCursor?"[H":"OH":(this.keyboard.terminal.scrollHome(),hterm.Keyboard.KeyActions.CANCEL)},hterm.Keyboard.KeyMap.prototype.onKeyEnd_=function(e){return!this.keyboard.homeKeysScroll^e.shiftKey?e.altKey||e.ctrlKey||e.shiftKey||!this.keyboard.applicationCursor?"[F":"OF":(this.keyboard.terminal.scrollEnd(),hterm.Keyboard.KeyActions.CANCEL)},hterm.Keyboard.KeyMap.prototype.onKeyPageUp_=function(e){return!this.keyboard.pageKeysScroll^e.shiftKey?"[5~":(this.keyboard.terminal.scrollPageUp(),hterm.Keyboard.KeyActions.CANCEL)},hterm.Keyboard.KeyMap.prototype.onKeyDel_=function(e){return this.keyboard.altBackspaceIsMetaBackspace&&this.keyboard.altKeyPressed&&!e.altKey?"":"[3~"},hterm.Keyboard.KeyMap.prototype.onKeyPageDown_=function(e){return!this.keyboard.pageKeysScroll^e.shiftKey?"[6~":(this.keyboard.terminal.scrollPageDown(),hterm.Keyboard.KeyActions.CANCEL)},hterm.Keyboard.KeyMap.prototype.onKeyArrowUp_=function(e){return!this.keyboard.applicationCursor&&e.shiftKey?(this.keyboard.terminal.scrollLineUp(),hterm.Keyboard.KeyActions.CANCEL):e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||!this.keyboard.applicationCursor?"[A":"OA"},hterm.Keyboard.KeyMap.prototype.onKeyArrowDown_=function(e){return!this.keyboard.applicationCursor&&e.shiftKey?(this.keyboard.terminal.scrollLineDown(),hterm.Keyboard.KeyActions.CANCEL):e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||!this.keyboard.applicationCursor?"[B":"OB"},hterm.Keyboard.KeyMap.prototype.onClear_=function(e,keyDef){return this.keyboard.terminal.wipeContents(),hterm.Keyboard.KeyActions.CANCEL},hterm.Keyboard.KeyMap.prototype.onCtrlNum_=function(e,keyDef){function ctl(ch){return String.fromCharCode(ch.charCodeAt(0)-64)}if(this.keyboard.terminal.passCtrlNumber&&!e.shiftKey)return hterm.Keyboard.KeyActions.PASS;switch(keyDef.keyCap.substr(0,1)){case"1":return"1";case"2":return ctl("@");case"3":return ctl("[");case"4":return ctl("\\");case"5":return ctl("]");case"6":return ctl("^");case"7":return ctl("_");case"8":return"";case"9":return"9"}},hterm.Keyboard.KeyMap.prototype.onAltNum_=function(e,keyDef){return this.keyboard.terminal.passAltNumber&&!e.shiftKey?hterm.Keyboard.KeyActions.PASS:hterm.Keyboard.KeyActions.DEFAULT},hterm.Keyboard.KeyMap.prototype.onMetaNum_=function(e,keyDef){return this.keyboard.terminal.passMetaNumber&&!e.shiftKey?hterm.Keyboard.KeyActions.PASS:hterm.Keyboard.KeyActions.DEFAULT},hterm.Keyboard.KeyMap.prototype.onCtrlC_=function(e,keyDef){var selection=this.keyboard.terminal.getDocument().getSelection();if(!selection.isCollapsed){if(this.keyboard.ctrlCCopy&&!e.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(selection.collapseToEnd.bind(selection),50),hterm.Keyboard.KeyActions.PASS;if(!this.keyboard.ctrlCCopy&&e.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(selection.collapseToEnd.bind(selection),50),this.keyboard.terminal.copySelectionToClipboard(),hterm.Keyboard.KeyActions.CANCEL}return""},hterm.Keyboard.KeyMap.prototype.onCtrlN_=function(e,keyDef){return e.shiftKey?(window.open(document.location.href,"","chrome=no,close=yes,resize=yes,scrollbars=yes,minimizable=yes,width="+window.innerWidth+",height="+window.innerHeight),hterm.Keyboard.KeyActions.CANCEL):""},hterm.Keyboard.KeyMap.prototype.onCtrlV_=function(e,keyDef){return!e.shiftKey&&this.keyboard.ctrlVPaste||e.shiftKey&&!this.keyboard.ctrlVPaste?this.keyboard.terminal.paste()?hterm.Keyboard.KeyActions.CANCEL:hterm.Keyboard.KeyActions.PASS:""},hterm.Keyboard.KeyMap.prototype.onMetaN_=function(e,keyDef){return e.shiftKey?(window.open(document.location.href,"","chrome=no,close=yes,resize=yes,scrollbars=yes,minimizable=yes,width="+window.outerWidth+",height="+window.outerHeight),hterm.Keyboard.KeyActions.CANCEL):hterm.Keyboard.KeyActions.DEFAULT},hterm.Keyboard.KeyMap.prototype.onMetaC_=function(e,keyDef){var document=this.keyboard.terminal.getDocument();return e.shiftKey||document.getSelection().isCollapsed?keyDef.keyCap.substr(e.shiftKey?1:0,1):(this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(function(){document.getSelection().collapseToEnd()},50),hterm.Keyboard.KeyActions.PASS)},hterm.Keyboard.KeyMap.prototype.onMetaV_=function(e,keyDef){return e.shiftKey?hterm.Keyboard.KeyActions.PASS:this.keyboard.passMetaV?hterm.Keyboard.KeyActions.PASS:hterm.Keyboard.KeyActions.DEFAULT},hterm.Keyboard.KeyMap.prototype.onPlusMinusZero_=function(e,keyDef){if(!(this.keyboard.ctrlPlusMinusZeroZoom^e.shiftKey))return"-_"==keyDef.keyCap?"":hterm.Keyboard.KeyActions.CANCEL;if(1!=this.keyboard.terminal.getZoomFactor())return hterm.Keyboard.KeyActions.PASS;var cap=keyDef.keyCap.substr(0,1);if("0"==cap)this.keyboard.terminal.setFontSize(0);else{var size=this.keyboard.terminal.getFontSize();"-"==cap||"[KP-]"==keyDef.keyCap?size-=1:size+=1,this.keyboard.terminal.setFontSize(size)}return hterm.Keyboard.KeyActions.CANCEL},hterm.Keyboard.KeyPattern=function(spec){this.wildcardCount=0,this.keyCode=spec.keyCode,hterm.Keyboard.KeyPattern.modifiers.forEach(function(mod){this[mod]=spec[mod]||!1,"*"==this[mod]&&this.wildcardCount++}.bind(this))},hterm.Keyboard.KeyPattern.modifiers=["shift","ctrl","alt","meta"],hterm.Keyboard.KeyPattern.sortCompare=function(a,b){return a.wildcardCount<b.wildcardCount?-1:a.wildcardCount>b.wildcardCount?1:0},hterm.Keyboard.KeyPattern.prototype.match_=function(obj,exactMatch){if(this.keyCode!=obj.keyCode)return!1;var rv=!0;return hterm.Keyboard.KeyPattern.modifiers.forEach(function(mod){var modValue=mod in obj&&obj[mod];rv&&(exactMatch||"*"!=this[mod])&&this[mod]!=modValue&&(rv=!1)}.bind(this)),rv},hterm.Keyboard.KeyPattern.prototype.matchKeyDown=function(keyDown){return this.match_(keyDown,!1)},hterm.Keyboard.KeyPattern.prototype.matchKeyPattern=function(keyPattern){return this.match_(keyPattern,!0)},hterm.Options=function(opt_copy){this.wraparound=!opt_copy||opt_copy.wraparound,this.reverseWraparound=!!opt_copy&&opt_copy.reverseWraparound,this.originMode=!!opt_copy&&opt_copy.originMode,this.autoCarriageReturn=!!opt_copy&&opt_copy.autoCarriageReturn,this.cursorVisible=!!opt_copy&&opt_copy.cursorVisible,this.cursorBlink=!!opt_copy&&opt_copy.cursorBlink,this.insertMode=!!opt_copy&&opt_copy.insertMode,this.reverseVideo=!!opt_copy&&opt_copy.reverseVideo,this.bracketedPaste=!!opt_copy&&opt_copy.bracketedPaste},lib.rtdep("hterm.Keyboard.KeyActions"),hterm.Parser=function(){this.source="",this.pos=0,this.ch=null},hterm.Parser.prototype.error=function(message){return new Error("Parse error at "+this.pos+": "+message)},hterm.Parser.prototype.isComplete=function(){return this.pos==this.source.length},hterm.Parser.prototype.reset=function(source,opt_pos){this.source=source,this.pos=opt_pos||0,this.ch=source.substr(0,1)},hterm.Parser.prototype.parseKeySequence=function(){var rv={keyCode:null};for(var k in hterm.Parser.identifiers.modifierKeys)rv[hterm.Parser.identifiers.modifierKeys[k]]=!1;for(;this.pos<this.source.length;){this.skipSpace();var token=this.parseToken();if("integer"==token.type)rv.keyCode=token.value;else if("identifier"==token.type){var ucValue=token.value.toUpperCase();if(ucValue in hterm.Parser.identifiers.modifierKeys&&hterm.Parser.identifiers.modifierKeys.hasOwnProperty(ucValue)){var mod=hterm.Parser.identifiers.modifierKeys[ucValue];if(rv[mod]&&"*"!=rv[mod])throw this.error("Duplicate modifier: "+token.value);rv[mod]=!0}else{if(!(ucValue in hterm.Parser.identifiers.keyCodes&&hterm.Parser.identifiers.keyCodes.hasOwnProperty(ucValue)))throw this.error("Unknown key: "+token.value);rv.keyCode=hterm.Parser.identifiers.keyCodes[ucValue]}}else{if("symbol"!=token.type)throw this.error("Expected integer or identifier");if("*"!=token.value)throw this.error("Unexpected symbol: "+token.value);for(var id in hterm.Parser.identifiers.modifierKeys){var p=hterm.Parser.identifiers.modifierKeys[id];rv[p]||(rv[p]="*")}}if(this.skipSpace(),"-"!=this.ch)break;if(null!=rv.keyCode)throw this.error("Extra definition after target key");this.advance(1)}if(null==rv.keyCode)throw this.error("Missing target key");return rv},hterm.Parser.prototype.parseKeyAction=function(){this.skipSpace();var token=this.parseToken();if("string"==token.type)return token.value;if("identifier"!=token.type)throw this.error("Expected string or identifier");if(token.value in hterm.Parser.identifiers.actions&&hterm.Parser.identifiers.actions.hasOwnProperty(token.value))return hterm.Parser.identifiers.actions[token.value];throw this.error("Unknown key action: "+token.value)},hterm.Parser.prototype.peekString=function(){return"'"==this.ch||'"'==this.ch},hterm.Parser.prototype.peekIdentifier=function(){return this.ch.match(/[a-z_]/i)},hterm.Parser.prototype.peekInteger=function(){return this.ch.match(/[0-9]/)},hterm.Parser.prototype.parseToken=function(){if("*"==this.ch){var rv={type:"symbol",value:this.ch};return this.advance(1),rv}if(this.peekIdentifier())return{type:"identifier",value:this.parseIdentifier()};if(this.peekString())return{type:"string",value:this.parseString()};if(this.peekInteger())return{type:"integer",value:this.parseInteger()};throw this.error("Unexpected token")},hterm.Parser.prototype.parseIdentifier=function(){if(!this.peekIdentifier())throw this.error("Expected identifier");return this.parsePattern(/[a-z0-9_]+/gi)},hterm.Parser.prototype.parseInteger=function(){return"0"==this.ch&&this.pos<this.source.length-1&&"x"==this.source.substr(this.pos+1,1)?parseInt(this.parsePattern(/0x[0-9a-f]+/gi)):parseInt(this.parsePattern(/\d+/g))},hterm.Parser.prototype.parseString=function(){var result="",quote=this.ch;if('"'!=quote&&"'"!=quote)throw this.error("String expected");this.advance(1);for(var re=new RegExp("[\\\\"+quote+"]","g");this.pos<this.source.length;){if(re.lastIndex=this.pos,!re.exec(this.source))throw this.error("Unterminated string literal");if(result+=this.source.substring(this.pos,re.lastIndex-1),this.advance(re.lastIndex-this.pos-1),'"'!=quote||"\\"!=this.ch)if("'"!=quote||"\\"!=this.ch){if(this.ch==quote)return this.advance(1),result}else result+=this.ch,this.advance(1);else this.advance(1),result+=this.parseEscape()}throw this.error("Unterminated string literal")},hterm.Parser.prototype.parseEscape=function(){var map={'"':'"',"'":"'","\\":"\\",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",x:function x(){var value=this.parsePattern(/[a-z0-9]{2}/gi);return String.fromCharCode(parseInt(value,16))},u:function u(){var value=this.parsePattern(/[a-z0-9]{4}/gi);return String.fromCharCode(parseInt(value,16))}};if(!(this.ch in map&&map.hasOwnProperty(this.ch)))throw this.error("Unknown escape: "+this.ch);var value=map[this.ch];return this.advance(1),"function"==typeof value&&(value=value.call(this)),value},hterm.Parser.prototype.parsePattern=function(pattern){if(!pattern.global)throw this.error("Internal error: Span patterns must be global");pattern.lastIndex=this.pos;var ary=pattern.exec(this.source);if(!ary||pattern.lastIndex-ary[0].length!=this.pos)throw this.error("Expected match for: "+pattern);return this.pos=pattern.lastIndex-1,this.advance(1),ary[0]},hterm.Parser.prototype.advance=function(count){this.pos+=count,this.ch=this.source.substr(this.pos,1)},hterm.Parser.prototype.skipSpace=function(opt_expect){if(/\s/.test(this.ch)){var re=/\s+/gm;re.lastIndex=this.pos;var source=this.source;if(re.exec(source)&&(this.pos=re.lastIndex),this.ch=this.source.substr(this.pos,1),opt_expect&&-1==this.ch.indexOf(opt_expect))throw this.error("Expected one of "+opt_expect+", found: "+this.ch)}},hterm.Parser.identifiers={},hterm.Parser.identifiers.modifierKeys={SHIFT:"shift",CTRL:"ctrl",CONTROL:"ctrl",ALT:"alt",META:"meta"},hterm.Parser.identifiers.keyCodes={ESCAPE:27,ESC:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,ZERO:48,BACKSPACE:8,BKSP:8,BS:8,TAB:9,Q:81,W:87,E:69,R:82,T:84,Y:89,U:85,I:73,O:79,P:80,CAPS_LOCK:20,CAPSLOCK:20,CAPS:20,A:65,S:83,D:68,F:70,G:71,H:72,J:74,K:75,L:76,ENTER:13,ENT:13,RETURN:13,RET:13,Z:90,X:88,C:67,V:86,B:66,N:78,M:77,SPACE:32,SP:32,PRINT_SCREEN:42,PRTSC:42,SCROLL_LOCK:145,SCRLK:145,BREAK:19,BRK:19,INSERT:45,INS:45,HOME:36,PAGE_UP:33,PGUP:33,DELETE:46,DEL:46,END:35,PAGE_DOWN:34,PGDOWN:34,PGDN:34,UP:38,DOWN:40,RIGHT:39,LEFT:37,NUMLOCK:144,KP0:96,KP1:97,KP2:98,KP3:99,KP4:100,KP5:101,KP6:102,KP7:103,KP8:104,KP9:105,KP_PLUS:107,KP_ADD:107,KP_MINUS:109,KP_SUBTRACT:109,KP_STAR:106,KP_MULTIPLY:106,KP_DIVIDE:111,KP_DECIMAL:110,KP_PERIOD:110,NAVIGATE_BACK:166,NAVIGATE_FORWARD:167,RELOAD:168,FULL_SCREEN:183,WINDOW_OVERVIEW:182,BRIGHTNESS_UP:216,BRIGHTNESS_DOWN:217},hterm.Parser.identifiers.actions={CANCEL:hterm.Keyboard.KeyActions.CANCEL,DEFAULT:hterm.Keyboard.KeyActions.DEFAULT,PASS:hterm.Keyboard.KeyActions.PASS,scrollPageUp:function scrollPageUp(terminal){return terminal.scrollPageUp(),hterm.Keyboard.KeyActions.CANCEL},scrollPageDown:function scrollPageDown(terminal){return terminal.scrollPageDown(),hterm.Keyboard.KeyActions.CANCEL},scrollToTop:function scrollToTop(terminal){return terminal.scrollEnd(),hterm.Keyboard.KeyActions.CANCEL},scrollToBottom:function scrollToBottom(terminal){return terminal.scrollEnd(),hterm.Keyboard.KeyActions.CANCEL},clearScrollback:function clearScrollback(terminal){return terminal.wipeContents(),hterm.Keyboard.KeyActions.CANCEL}},lib.rtdep("lib.f","lib.Storage"),hterm.PreferenceManager=function(profileId){lib.PreferenceManager.call(this,hterm.defaultStorage,"/hterm/profiles/"+profileId);var defs=hterm.PreferenceManager.defaultPreferences;Object.keys(defs).forEach(function(key){this.definePreference(key,defs[key][1])}.bind(this))},hterm.PreferenceManager.categories={},hterm.PreferenceManager.categories.Keyboard="Keyboard",hterm.PreferenceManager.categories.Appearance="Appearance",hterm.PreferenceManager.categories.CopyPaste="CopyPaste",hterm.PreferenceManager.categories.Sounds="Sounds",hterm.PreferenceManager.categories.Scrolling="Scrolling",hterm.PreferenceManager.categories.Encoding="Encoding",hterm.PreferenceManager.categories.Miscellaneous="Miscellaneous",hterm.PreferenceManager.categoryDefinitions=[{id:hterm.PreferenceManager.categories.Appearance,text:"Appearance (fonts, colors, images)"},{id:hterm.PreferenceManager.categories.CopyPaste,text:"Copy & Paste"},{id:hterm.PreferenceManager.categories.Encoding,text:"Encoding"},{id:hterm.PreferenceManager.categories.Keyboard,text:"Keyboard"},{id:hterm.PreferenceManager.categories.Scrolling,text:"Scrolling"},{id:hterm.PreferenceManager.categories.Sounds,text:"Sounds"},{id:hterm.PreferenceManager.categories.Miscellaneous,text:"Misc."}],hterm.PreferenceManager.defaultPreferences={"alt-gr-mode":[hterm.PreferenceManager.categories.Keyboard,null,[null,"none","ctrl-alt","left-alt","right-alt"],"Select an AltGr detection hack^Wheuristic.\n\n'null': Autodetect based on navigator.language:\n      'en-us' => 'none', else => 'right-alt'\n'none': Disable any AltGr related munging.\n'ctrl-alt': Assume Ctrl+Alt means AltGr.\n'left-alt': Assume left Alt means AltGr.\n'right-alt': Assume right Alt means AltGr.\n"],"alt-backspace-is-meta-backspace":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","If set, undoes the Chrome OS Alt-Backspace->DEL remap, so that alt-backspace indeed is alt-backspace."],"alt-is-meta":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","Set whether the alt key acts as a meta key or as a distinct alt key."],"alt-sends-what":[hterm.PreferenceManager.categories.Keyboard,"escape",["escape","8-bit","browser-key"],"Controls how the alt key is handled.\n\n  escape....... Send an ESC prefix.\n  8-bit........ Add 128 to the unshifted character as in xterm.\n  browser-key.. Wait for the keypress event and see what the browser \n                says.  (This won't work well on platforms where the \n                browser performs a default action for some alt sequences.)"],"audible-bell-sound":[hterm.PreferenceManager.categories.Sounds,"lib-resource:hterm/audio/bell","url","URL of the terminal bell sound.  Empty string for no audible bell."],"desktop-notification-bell":[hterm.PreferenceManager.categories.Sounds,!1,"bool",'If true, terminal bells in the background will create a Web Notification. https://www.w3.org/TR/notifications/\n\nDisplaying notifications requires permission from the user. When this option is set to true, hterm will attempt to ask the user for permission if necessary. Note browsers may not show this permission request if it did not originate from a user action.\n\nChrome extensions with the "notifications" permission have permission to display notifications.'],"background-color":[hterm.PreferenceManager.categories.Appearance,"rgb(16, 16, 16)","color","The background color for text with no other color attributes."],"background-image":[hterm.PreferenceManager.categories.Appearance,"","string","CSS value of the background image.  Empty string for no image.\n\nFor example:\n  url(https://goo.gl/anedTK)\n  linear-gradient(top bottom, blue, red)"],"background-size":[hterm.PreferenceManager.categories.Appearance,"","string","CSS value of the background image size.  Defaults to none."],"background-position":[hterm.PreferenceManager.categories.Appearance,"","string","CSS value of the background image position.\n\nFor example:\n  10% 10%\n  center"],"backspace-sends-backspace":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","If true, the backspace should send BS ('\\x08', aka ^H).  Otherwise the backspace key should send '\\x7f'."],"character-map-overrides":[hterm.PreferenceManager.categories.Appearance,null,"value",'This is specified as an object. It is a sparse array, where each property is the character set code and the value is an object that is a sparse array itself. In that sparse array, each property is the received character and the value is the displayed character.\n\nFor example:\n  {"0":{"+":"\\u2192",",":"\\u2190","-":"\\u2191",".":"\\u2193", "0":"\\u2588"}}'],"close-on-exit":[hterm.PreferenceManager.categories.Miscellaneous,!0,"bool","Whether or not to close the window when the command exits."],"cursor-blink":[hterm.PreferenceManager.categories.Appearance,!1,"bool","Whether or not to blink the cursor by default."],"cursor-blink-cycle":[hterm.PreferenceManager.categories.Appearance,[1e3,500],"value","The cursor blink rate in milliseconds.\n\nA two element array, the first of which is how long the cursor should be on, second is how long it should be off."],"cursor-color":[hterm.PreferenceManager.categories.Appearance,"rgba(255, 0, 0, 0.5)","color","The color of the visible cursor."],"color-palette-overrides":[hterm.PreferenceManager.categories.Appearance,null,"value","Override colors in the default palette.\n\nThis can be specified as an array or an object.  If specified as an object it is assumed to be a sparse array, where each property is a numeric index into the color palette.\n\nValues can be specified as almost any css color value.  This includes #RGB, #RRGGBB, rgb(...), rgba(...), and any color names that are also part of the stock X11 rgb.txt file.\n\nYou can use 'null' to specify that the default value should be not be changed.  This is useful for skipping a small number of indices when the value is specified as an array."],"copy-on-select":[hterm.PreferenceManager.categories.CopyPaste,!0,"bool","Automatically copy mouse selection to the clipboard."],"use-default-window-copy":[hterm.PreferenceManager.categories.CopyPaste,!1,"bool","Whether to use the default window copy behavior"],"clear-selection-after-copy":[hterm.PreferenceManager.categories.CopyPaste,!0,"bool","Whether to clear the selection after copying."],"ctrl-plus-minus-zero-zoom":[hterm.PreferenceManager.categories.Keyboard,!0,"bool","If true, Ctrl-Plus/Minus/Zero controls zoom.\nIf false, Ctrl-Shift-Plus/Minus/Zero controls zoom, Ctrl-Minus sends ^_, Ctrl-Plus/Zero do nothing."],"ctrl-c-copy":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","Ctrl+C copies if true, send ^C to host if false.\nCtrl+Shift+C sends ^C to host if true, copies if false."],"ctrl-v-paste":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","Ctrl+V pastes if true, send ^V to host if false.\nCtrl+Shift+V sends ^V to host if true, pastes if false."],"east-asian-ambiguous-as-two-column":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","Set whether East Asian Ambiguous characters have two column width."],"enable-8-bit-control":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","True to enable 8-bit control characters, false to ignore them.\n\nWe'll respect the two-byte versions of these control characters regardless of this setting."],"enable-bold":[hterm.PreferenceManager.categories.Appearance,null,"tristate","True if we should use bold weight font for text with the bold/bright attribute.  False to use the normal weight font.  Null to autodetect."],"enable-bold-as-bright":[hterm.PreferenceManager.categories.Appearance,!0,"bool","True if we should use bright colors (8-15 on a 16 color palette) for any text with the bold attribute.  False otherwise."],"enable-blink":[hterm.PreferenceManager.categories.Appearance,!0,"bool","True if we should respect the blink attribute.  False to ignore it.  "],"enable-clipboard-notice":[hterm.PreferenceManager.categories.CopyPaste,!0,"bool","Show a message in the terminal when the host writes to the clipboard."],"enable-clipboard-write":[hterm.PreferenceManager.categories.CopyPaste,!0,"bool","Allow the host to write directly to the system clipboard."],"enable-dec12":[hterm.PreferenceManager.categories.Miscellaneous,!1,"bool","Respect the host's attempt to change the cursor blink status using DEC Private Mode 12."],environment:[hterm.PreferenceManager.categories.Miscellaneous,{TERM:"xterm-256color"},"value","The default environment variables, as an object."],"font-family":[hterm.PreferenceManager.categories.Appearance,'"DejaVu Sans Mono", "Everson Mono", FreeMono, "Menlo", "Terminal", monospace',"string","Default font family for the terminal text."],"font-size":[hterm.PreferenceManager.categories.Appearance,15,"int","The default font size in pixels."],"font-smoothing":[hterm.PreferenceManager.categories.Appearance,"antialiased","string","CSS font-smoothing property."],"foreground-color":[hterm.PreferenceManager.categories.Appearance,"rgb(240, 240, 240)","color","The foreground color for text with no other color attributes."],"home-keys-scroll":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","If true, home/end will control the terminal scrollbar and shift home/end will send the VT keycodes.  If false then home/end sends VT codes and shift home/end scrolls."],keybindings:[hterm.PreferenceManager.categories.Keyboard,null,"value",'A map of key sequence to key actions.  Key sequences include zero or more modifier keys followed by a key code.  Key codes can be decimal or hexadecimal numbers, or a key identifier.  Key actions can be specified a string to send to the host, or an action identifier.  For a full explanation of the format, see https://goo.gl/LWRndr.\n\nSample keybindings:\n{\n  "Ctrl-Alt-K": "clearScrollback",\n  "Ctrl-Shift-L": "PASS",\n  "Ctrl-H": "\'HELLO\\n\'"\n}'],"max-string-sequence":[hterm.PreferenceManager.categories.Encoding,1e5,"int","Max length of a DCS, OSC, PM, or APS sequence before we give up and ignore the code."],"media-keys-are-fkeys":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","If true, convert media keys to their Fkey equivalent. If false, let the browser handle the keys."],"meta-sends-escape":[hterm.PreferenceManager.categories.Keyboard,!0,"bool","Set whether the meta key sends a leading escape or not."],"mouse-right-click-paste":[hterm.PreferenceManager.categories.CopyPaste,!0,"bool",'Paste on right mouse button clicks.\n\nThis option is activate independent of the "mouse-paste-button" setting.\n\nNote: This will handle left & right handed mice correctly.'],"mouse-paste-button":[hterm.PreferenceManager.categories.CopyPaste,null,[null,0,1,2,3,4,5,6],"Mouse paste button, or null to autodetect.\n\nFor autodetect, we'll use the middle mouse button for non-X11 platforms (including Chrome OS).  On X11, we'll use the right mouse button (since the native window manager should paste via the middle mouse button).\n\n0 == left (primary) button.\n1 == middle (auxiliary) button.\n2 == right (secondary) button.\n\nThis option is activate independent of the \"mouse-right-click-paste\" setting.\n\nNote: This will handle left & right handed mice correctly."],"word-break-match-left":[hterm.PreferenceManager.categories.CopyPaste,"[^\\s\\[\\](){}<>\"'\\^!@#$%&*,;:`]","string",'Regular expression to halt matching to the left (start) of a selection.\n\nNormally this is a character class to reject specific characters.\nWe allow "~" and "." by default as paths frequently start with those.'],"word-break-match-right":[hterm.PreferenceManager.categories.CopyPaste,"[^\\s\\[\\](){}<>\"'\\^!@#$%&*,;:~.`]","string","Regular expression to halt matching to the right (end) of a selection.\n\nNormally this is a character class to reject specific characters."],"word-break-match-middle":[hterm.PreferenceManager.categories.CopyPaste,"[^\\s\\[\\](){}<>\"'\\^]*","string","Regular expression to match all the characters in the middle.\n\nNormally this is a character class to reject specific characters.\n\nUsed to expand the selection surrounding the starting point."],"page-keys-scroll":[hterm.PreferenceManager.categories.Keyboard,!1,"bool","If true, page up/down will control the terminal scrollbar and shift page up/down will send the VT keycodes.  If false then page up/down sends VT codes and shift page up/down scrolls."],"pass-alt-number":[hterm.PreferenceManager.categories.Keyboard,null,"tristate","Set whether we should pass Alt-1..9 to the browser.\n\nThis is handy when running hterm in a browser tab, so that you don't lose Chrome's \"switch to tab\" keyboard accelerators.  When not running in a tab it's better to send these keys to the host so they can be used in vim or emacs.\n\nIf true, Alt-1..9 will be handled by the browser.  If false, Alt-1..9 will be sent to the host.  If null, autodetect based on browser platform and window type."],"pass-ctrl-number":[hterm.PreferenceManager.categories.Keyboard,null,"tristate","Set whether we should pass Ctrl-1..9 to the browser.\n\nThis is handy when running hterm in a browser tab, so that you don't lose Chrome's \"switch to tab\" keyboard accelerators.  When not running in a tab it's better to send these keys to the host so they can be used in vim or emacs.\n\nIf true, Ctrl-1..9 will be handled by the browser.  If false, Ctrl-1..9 will be sent to the host.  If null, autodetect based on browser platform and window type."],"pass-meta-number":[hterm.PreferenceManager.categories.Keyboard,null,"tristate","Set whether we should pass Meta-1..9 to the browser.\n\nThis is handy when running hterm in a browser tab, so that you don't lose Chrome's \"switch to tab\" keyboard accelerators.  When not running in a tab it's better to send these keys to the host so they can be used in vim or emacs.\n\nIf true, Meta-1..9 will be handled by the browser.  If false, Meta-1..9 will be sent to the host.  If null, autodetect based on browser platform and window type."],"pass-meta-v":[hterm.PreferenceManager.categories.Keyboard,!0,"bool","Set whether meta-V gets passed to host."],"receive-encoding":[hterm.PreferenceManager.categories.Encoding,"utf-8",["utf-8","raw"],"Set the expected encoding for data received from the host.\n\nValid values are 'utf-8' and 'raw'."],"scroll-on-keystroke":[hterm.PreferenceManager.categories.Scrolling,!0,"bool","If true, scroll to the bottom on any keystroke."],"scroll-on-output":[hterm.PreferenceManager.categories.Scrolling,!1,"bool","If true, scroll to the bottom on terminal output."],"scrollbar-visible":[hterm.PreferenceManager.categories.Scrolling,!0,"bool","The vertical scrollbar mode."],"scroll-wheel-may-send-arrow-keys":[hterm.PreferenceManager.categories.Scrolling,!1,"bool","When using the alternative screen buffer, and DECCKM (Application Cursor Keys) is active, mouse wheel scroll events will emulate arrow keys.\n\nIt can be temporarily disabled by holding the shift key.\n\nThis frequently comes up when using pagers (less) or reading man pages or text editors (vi/nano) or using screen/tmux."],"scroll-wheel-move-multiplier":[hterm.PreferenceManager.categories.Scrolling,1,"int","The multiplier for the pixel delta in wheel events caused by the scroll wheel. Alters how fast the page scrolls."],"send-encoding":[hterm.PreferenceManager.categories.Encoding,"utf-8",["utf-8","raw"],"Set the encoding for data sent to host."],"terminal-encoding":[hterm.PreferenceManager.categories.Encoding,"iso-2022",["iso-2022","utf-8","utf-8-locked"],"The default terminal encoding (DOCS).\n\nISO-2022 enables character map translations (like graphics maps).\nUTF-8 disables support for those.\n\nThe locked variant means the encoding cannot be changed at runtime via terminal escape sequences.\n\nYou should stick with UTF-8 unless you notice broken rendering with legacy applications."],"shift-insert-paste":[hterm.PreferenceManager.categories.Keyboard,!0,"bool","Shift + Insert pastes if true, sent to host if false."],"user-css":[hterm.PreferenceManager.categories.Appearance,"","url","URL of user stylesheet to include in the terminal document."],"user-css-text":[hterm.PreferenceManager.categories.Appearance,"","multiline-string","Custom CSS text for styling the terminal."]},hterm.PreferenceManager.prototype=Object.create(lib.PreferenceManager.prototype),hterm.PreferenceManager.constructor=hterm.PreferenceManager,hterm.PubSub=function(){this.observers_={}},hterm.PubSub.addBehavior=function(obj){var pubsub=new hterm.PubSub;for(var m in hterm.PubSub.prototype)obj[m]=hterm.PubSub.prototype[m].bind(pubsub)},hterm.PubSub.prototype.subscribe=function(subject,callback){subject in this.observers_||(this.observers_[subject]=[]),this.observers_[subject].push(callback)},hterm.PubSub.prototype.unsubscribe=function(subject,callback){var list=this.observers_[subject];if(!list)throw"Invalid subject: "+subject;var i=list.indexOf(callback);if(i<0)throw"Not subscribed: "+subject;list.splice(i,1)},hterm.PubSub.prototype.publish=function(subject,e,opt_lastCallback){var list=this.observers_[subject];list=list&&[].concat(list),opt_lastCallback&&(list?list.push(opt_lastCallback):list=[opt_lastCallback]),list&&setTimeout(function notifyList(i){i<list.length-1&&setTimeout(notifyList,0,i+1),list[i](e)},0,0)},lib.rtdep("lib.f","lib.wc","hterm.RowCol","hterm.Size","hterm.TextAttributes"),hterm.Screen=function(opt_columnCount){this.rowsArray=[],this.columnCount_=opt_columnCount||80,this.textAttributes=new hterm.TextAttributes(window.document),this.cursorPosition=new hterm.RowCol(0,0),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=null,this.wordBreakMatchLeft=null,this.wordBreakMatchRight=null,this.wordBreakMatchMiddle=null},hterm.Screen.prototype.getSize=function(){return new hterm.Size(this.columnCount_,this.rowsArray.length)},hterm.Screen.prototype.getHeight=function(){return this.rowsArray.length},hterm.Screen.prototype.getWidth=function(){return this.columnCount_},hterm.Screen.prototype.setColumnCount=function(count){this.columnCount_=count,this.cursorPosition.column>=count&&this.setCursorPosition(this.cursorPosition.row,count-1)},hterm.Screen.prototype.shiftRow=function(){return this.shiftRows(1)[0]},hterm.Screen.prototype.shiftRows=function(count){return this.rowsArray.splice(0,count)},hterm.Screen.prototype.unshiftRow=function(row){this.rowsArray.splice(0,0,row)},hterm.Screen.prototype.unshiftRows=function(rows){this.rowsArray.unshift.apply(this.rowsArray,rows)},hterm.Screen.prototype.popRow=function(){return this.popRows(1)[0]},hterm.Screen.prototype.popRows=function(count){return this.rowsArray.splice(this.rowsArray.length-count,count)},hterm.Screen.prototype.pushRow=function(row){this.rowsArray.push(row)},hterm.Screen.prototype.pushRows=function(rows){rows.push.apply(this.rowsArray,rows)},hterm.Screen.prototype.insertRow=function(index,row){this.rowsArray.splice(index,0,row)},hterm.Screen.prototype.insertRows=function(index,rows){for(var i=0;i<rows.length;i++)this.rowsArray.splice(index+i,0,rows[i])},hterm.Screen.prototype.removeRow=function(index){return this.rowsArray.splice(index,1)[0]},hterm.Screen.prototype.removeRows=function(index,count){return this.rowsArray.splice(index,count)},hterm.Screen.prototype.invalidateCursorPosition=function(){this.cursorPosition.move(0,0),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=null},hterm.Screen.prototype.clearCursorRow=function(){var text;this.cursorRowNode_.innerHTML="",this.cursorRowNode_.removeAttribute("line-overflow"),this.cursorOffset_=0,this.cursorPosition.column=0,this.cursorPosition.overflow=!1,text=this.textAttributes.isDefault()?"":lib.f.getWhitespace(this.columnCount_);var inverse=this.textAttributes.inverse;this.textAttributes.inverse=!1,this.textAttributes.syncColors();var node=this.textAttributes.createContainer(text);this.cursorRowNode_.appendChild(node),this.cursorNode_=node,this.textAttributes.inverse=inverse,this.textAttributes.syncColors()},hterm.Screen.prototype.commitLineOverflow=function(){this.cursorRowNode_.setAttribute("line-overflow",!0)},hterm.Screen.prototype.setCursorPosition=function(row,column){if(this.rowsArray.length){row>=this.rowsArray.length?(console.error("Row out of bounds: "+row),row=this.rowsArray.length-1):row<0&&(console.error("Row out of bounds: "+row),row=0),column>=this.columnCount_?(console.error("Column out of bounds: "+column),column=this.columnCount_-1):column<0&&(console.error("Column out of bounds: "+column),column=0),this.cursorPosition.overflow=!1;var rowNode=this.rowsArray[row],node=rowNode.firstChild;node||(node=rowNode.ownerDocument.createTextNode(""),rowNode.appendChild(node));var currentColumn=0;for(rowNode==this.cursorRowNode_?column>=this.cursorPosition.column-this.cursorOffset_&&(node=this.cursorNode_,currentColumn=this.cursorPosition.column-this.cursorOffset_):this.cursorRowNode_=rowNode,this.cursorPosition.move(row,column);node;){var offset=column-currentColumn,width=hterm.TextAttributes.nodeWidth(node);if(!node.nextSibling||offset<width)return this.cursorNode_=node,void(this.cursorOffset_=offset);currentColumn+=width,node=node.nextSibling}}else console.warn("Attempt to set cursor position on empty screen.")},hterm.Screen.prototype.syncSelectionCaret=function(selection){try{selection.collapse(this.cursorNode_,this.cursorOffset_)}catch(firefoxIgnoredException){}},hterm.Screen.prototype.splitNode_=function(node,offset){var afterNode=node.cloneNode(!1),textContent=node.textContent;node.textContent=hterm.TextAttributes.nodeSubstr(node,0,offset),afterNode.textContent=lib.wc.substr(textContent,offset),afterNode.textContent&&node.parentNode.insertBefore(afterNode,node.nextSibling),node.textContent||node.parentNode.removeChild(node)},hterm.Screen.prototype.maybeClipCurrentRow=function(){var width=hterm.TextAttributes.nodeWidth(this.cursorRowNode_);if(width<=this.columnCount_)this.cursorPosition.column>=this.columnCount_&&(this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),this.cursorPosition.overflow=!0);else{var currentColumn=this.cursorPosition.column;this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),width=hterm.TextAttributes.nodeWidth(this.cursorNode_),this.cursorOffset_<width-1&&(this.cursorNode_.textContent=hterm.TextAttributes.nodeSubstr(this.cursorNode_,0,this.cursorOffset_+1));for(var rowNode=this.cursorRowNode_,node=this.cursorNode_.nextSibling;node;)rowNode.removeChild(node),node=this.cursorNode_.nextSibling;currentColumn<this.columnCount_?this.setCursorPosition(this.cursorPosition.row,currentColumn):this.cursorPosition.overflow=!0}},hterm.Screen.prototype.insertString=function(str){var wcwidth=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,cursorNode=this.cursorNode_,cursorNodeText=cursorNode.textContent;this.cursorRowNode_.removeAttribute("line-overflow"),void 0===wcwidth&&(wcwidth=lib.wc.strWidth(str)),this.cursorPosition.column+=wcwidth;var offset=this.cursorOffset_,reverseOffset=hterm.TextAttributes.nodeWidth(cursorNode)-offset;if(reverseOffset<0){var ws=lib.f.getWhitespace(-reverseOffset);if(this.textAttributes.underline||this.textAttributes.strikethrough||this.textAttributes.background||this.textAttributes.wcNode||!this.textAttributes.asciiNode||null!=this.textAttributes.tileData)if(cursorNode.nodeType!=Node.TEXT_NODE&&(cursorNode.wcNode||!cursorNode.asciiNode||cursorNode.tileNode||cursorNode.style.textDecoration||cursorNode.style.backgroundColor)){var wsNode=cursorNode.ownerDocument.createTextNode(ws);this.cursorRowNode_.insertBefore(wsNode,cursorNode.nextSibling),this.cursorNode_=cursorNode=wsNode,this.cursorOffset_=offset=-reverseOffset,cursorNodeText=ws}else cursorNode.textContent=cursorNodeText+=ws;else str=ws+str;reverseOffset=0}if(this.textAttributes.matchesContainer(cursorNode))return cursorNode.textContent=0==reverseOffset?cursorNodeText+str:0==offset?str+cursorNodeText:hterm.TextAttributes.nodeSubstr(cursorNode,0,offset)+str+hterm.TextAttributes.nodeSubstr(cursorNode,offset),void(this.cursorOffset_+=wcwidth);if(0==offset){var previousSibling=cursorNode.previousSibling;if(previousSibling&&this.textAttributes.matchesContainer(previousSibling))return previousSibling.textContent+=str,this.cursorNode_=previousSibling,void(this.cursorOffset_=lib.wc.strWidth(previousSibling.textContent));var newNode=this.textAttributes.createContainer(str);return this.cursorRowNode_.insertBefore(newNode,cursorNode),this.cursorNode_=newNode,void(this.cursorOffset_=wcwidth)}if(0==reverseOffset){var nextSibling=cursorNode.nextSibling;if(nextSibling&&this.textAttributes.matchesContainer(nextSibling))return nextSibling.textContent=str+nextSibling.textContent,this.cursorNode_=nextSibling,void(this.cursorOffset_=lib.wc.strWidth(str));newNode=this.textAttributes.createContainer(str);return this.cursorRowNode_.insertBefore(newNode,nextSibling),this.cursorNode_=newNode,void(this.cursorOffset_=hterm.TextAttributes.nodeWidth(newNode))}this.splitNode_(cursorNode,offset);newNode=this.textAttributes.createContainer(str);this.cursorRowNode_.insertBefore(newNode,cursorNode.nextSibling),this.cursorNode_=newNode,this.cursorOffset_=wcwidth},hterm.Screen.prototype.overwriteString=function(str){var wcwidth=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,maxLength=this.columnCount_-this.cursorPosition.column;return maxLength?(void 0===wcwidth&&(wcwidth=lib.wc.strWidth(str)),this.textAttributes.matchesContainer(this.cursorNode_)&&this.cursorNode_.textContent.substr(this.cursorOffset_)==str?(this.cursorOffset_+=wcwidth,void(this.cursorPosition.column+=wcwidth)):(this.deleteChars(Math.min(wcwidth,maxLength)),void this.insertString(str,wcwidth))):[str]},hterm.Screen.prototype.deleteChars=function(count){var node=this.cursorNode_,offset=this.cursorOffset_,currentCursorColumn=this.cursorPosition.column;if(!(count=Math.min(count,this.columnCount_-currentCursorColumn)))return 0;for(var startLength,endLength,rv=count;node&&count;){if(count<0){console.error("Deleting "+rv+" chars went negative: "+count);break}if(startLength=hterm.TextAttributes.nodeWidth(node),node.textContent=hterm.TextAttributes.nodeSubstr(node,0,offset)+hterm.TextAttributes.nodeSubstr(node,offset+count),endLength=hterm.TextAttributes.nodeWidth(node),node.wcNode&&offset<startLength&&(endLength&&startLength==endLength||!endLength&&1==offset)){var spaceNode=this.textAttributes.createContainer(" ");node.parentNode.insertBefore(spaceNode,offset?node:node.nextSibling),node.textContent="",endLength=0,count-=1}else count-=startLength-endLength;var nextNode=node.nextSibling;0==endLength&&node!=this.cursorNode_&&node.parentNode.removeChild(node),node=nextNode,offset=0}if(this.cursorNode_.nodeType!=Node.TEXT_NODE&&!this.cursorNode_.textContent){var cursorNode=this.cursorNode_;if(cursorNode.previousSibling)this.cursorNode_=cursorNode.previousSibling,this.cursorOffset_=hterm.TextAttributes.nodeWidth(cursorNode.previousSibling);else if(cursorNode.nextSibling)this.cursorNode_=cursorNode.nextSibling,this.cursorOffset_=0;else{var emptyNode=this.cursorRowNode_.ownerDocument.createTextNode("");this.cursorRowNode_.appendChild(emptyNode),this.cursorNode_=emptyNode,this.cursorOffset_=0}this.cursorRowNode_.removeChild(cursorNode)}return rv},hterm.Screen.prototype.getLineStartRow_=function(row){for(;row.previousSibling&&row.previousSibling.hasAttribute("line-overflow");)row=row.previousSibling;return row},hterm.Screen.prototype.getLineText_=function(row){for(var rowText="";row&&(rowText+=row.textContent,row.hasAttribute("line-overflow"));)row=row.nextSibling;return rowText},hterm.Screen.prototype.getXRowAncestor_=function(node){for(;node&&"X-ROW"!==node.nodeName;)node=node.parentNode;return node},hterm.Screen.prototype.getPositionWithOverflow_=function(row,node,offset){if(!node)return-1;var ancestorRow=this.getXRowAncestor_(node);if(!ancestorRow)return-1;for(var position=0;ancestorRow!=row;){if(position+=hterm.TextAttributes.nodeWidth(row),!row.hasAttribute("line-overflow")||!row.nextSibling)return-1;row=row.nextSibling}return position+this.getPositionWithinRow_(row,node,offset)},hterm.Screen.prototype.getPositionWithinRow_=function(row,node,offset){if(node.parentNode!=row)return null==node.parentNode?-1:this.getPositionWithinRow_(node.parentNode,node,offset)+this.getPositionWithinRow_(row,node.parentNode,0);for(var position=0,i=0;i<row.childNodes.length;i++){var currentNode=row.childNodes[i];if(currentNode==node)return position+offset;position+=hterm.TextAttributes.nodeWidth(currentNode)}return-1},hterm.Screen.prototype.getNodeAndOffsetWithOverflow_=function(row,position){for(;row&&position>hterm.TextAttributes.nodeWidth(row);){if(!row.hasAttribute("line-overflow")||!row.nextSibling)return-1;position-=hterm.TextAttributes.nodeWidth(row),row=row.nextSibling}return this.getNodeAndOffsetWithinRow_(row,position)},hterm.Screen.prototype.getNodeAndOffsetWithinRow_=function(row,position){for(var i=0;i<row.childNodes.length;i++){var node=row.childNodes[i],nodeTextWidth=hterm.TextAttributes.nodeWidth(node);if(position<=nodeTextWidth)return"SPAN"===node.nodeName?this.getNodeAndOffsetWithinRow_(node,position):[node,position];position-=nodeTextWidth}return null},hterm.Screen.prototype.setRange_=function(row,start,end,range){var startNodeAndOffset=this.getNodeAndOffsetWithOverflow_(row,start);if(null!=startNodeAndOffset){var endNodeAndOffset=this.getNodeAndOffsetWithOverflow_(row,end);null!=endNodeAndOffset&&(range.setStart(startNodeAndOffset[0],startNodeAndOffset[1]),range.setEnd(endNodeAndOffset[0],endNodeAndOffset[1]))}},hterm.Screen.prototype.expandSelection=function(selection){if(selection){var range=selection.getRangeAt(0);if(range&&!range.toString().match(/\s/)){var row=this.getLineStartRow_(this.getXRowAncestor_(range.startContainer));if(row){var startPosition=this.getPositionWithOverflow_(row,range.startContainer,range.startOffset);if(-1!=startPosition){var endPosition=this.getPositionWithOverflow_(row,range.endContainer,range.endOffset);if(-1!=endPosition){var leftMatch=this.wordBreakMatchLeft,rightMatch=this.wordBreakMatchRight,insideMatch=this.wordBreakMatchMiddle,rowText=this.getLineText_(row),lineUpToRange=lib.wc.substring(rowText,0,endPosition),leftRegularExpression=new RegExp(leftMatch+insideMatch+"$"),expandedStart=lineUpToRange.search(leftRegularExpression);if(!(-1==expandedStart||startPosition<expandedStart)){var lineFromRange=lib.wc.substring(rowText,startPosition,lib.wc.strWidth(rowText)),rightRegularExpression=new RegExp("^"+insideMatch+rightMatch),found=lineFromRange.match(rightRegularExpression);if(found){var expandedEnd=startPosition+lib.wc.strWidth(found[0]);-1==expandedEnd||expandedEnd<endPosition||(this.setRange_(row,expandedStart,expandedEnd,range),selection.addRange(range))}}}}}}}},lib.rtdep("lib.f","hterm.PubSub","hterm.Size"),hterm.ScrollPort=function(rowProvider){hterm.PubSub.addBehavior(this),this.rowProvider_=rowProvider,this.characterSize=new hterm.Size(10,10),this.ruler_=null,this.selection=new hterm.ScrollPort.Selection(this),this.currentRowNodeCache_=null,this.previousRowNodeCache_={},this.lastScreenWidth_=null,this.lastScreenHeight_=null,this.selectionEnabled_=!0,this.lastRowCount_=0,this.scrollWheelMultiplier_=1,this.lastTouch_={},this.isScrolledEnd=!0,this.currentScrollbarWidthPx=16,this.ctrlVPaste=!1,this.div_=null,this.document_=null,this.timeouts_={},this.observers_={},this.DEBUG_=!1},hterm.ScrollPort.Selection=function(scrollPort){this.scrollPort_=scrollPort,this.startRow=null,this.endRow=null,this.isMultiline=null,this.isCollapsed=null},hterm.ScrollPort.Selection.prototype.findFirstChild=function(parent,childAry){for(var node=parent.firstChild;node;){if(-1!=childAry.indexOf(node))return node;if(node.childNodes.length){var rv=this.findFirstChild(node,childAry);if(rv)return rv}node=node.nextSibling}return null},hterm.ScrollPort.Selection.prototype.sync=function(){var self=this;function anchorFirst(){self.startRow=anchorRow,self.startNode=selection.anchorNode,self.startOffset=selection.anchorOffset,self.endRow=focusRow,self.endNode=selection.focusNode,self.endOffset=selection.focusOffset}function focusFirst(){self.startRow=focusRow,self.startNode=selection.focusNode,self.startOffset=selection.focusOffset,self.endRow=anchorRow,self.endNode=selection.anchorNode,self.endOffset=selection.anchorOffset}var selection=this.scrollPort_.getDocument().getSelection();if(this.startRow=null,this.endRow=null,this.isMultiline=null,this.isCollapsed=!selection||selection.isCollapsed,!this.isCollapsed){for(var anchorRow=selection.anchorNode;anchorRow&&!("rowIndex"in anchorRow);)anchorRow=anchorRow.parentNode;if(anchorRow){for(var focusRow=selection.focusNode;focusRow&&!("rowIndex"in focusRow);)focusRow=focusRow.parentNode;if(focusRow){if(anchorRow.rowIndex<focusRow.rowIndex)anchorFirst();else if(anchorRow.rowIndex>focusRow.rowIndex)focusFirst();else if(selection.focusNode==selection.anchorNode)selection.anchorOffset<selection.focusOffset?anchorFirst():focusFirst();else{var firstNode=this.findFirstChild(anchorRow,[selection.anchorNode,selection.focusNode]);if(!firstNode)throw new Error("Unexpected error syncing selection.");firstNode==selection.anchorNode?anchorFirst():focusFirst()}this.isMultiline=anchorRow.rowIndex!=focusRow.rowIndex}else console.error("Selection focus is not rooted in a row node: "+selection.focusNode.nodeName)}else console.error("Selection anchor is not rooted in a row node: "+selection.anchorNode.nodeName)}},hterm.ScrollPort.prototype.decorate=function(div){this.div_=div,this.iframe_=div.ownerDocument.createElement("iframe"),this.iframe_.style.cssText="border: 0;height: 100%;position: absolute;width: 100%","mozInnerScreenX"in window&&(this.iframe_.src="#"),div.appendChild(this.iframe_),this.iframe_.contentWindow.addEventListener("resize",this.onResize_.bind(this));var doc=this.document_=this.iframe_.contentDocument;doc.body.style.cssText="margin: 0px;padding: 0px;height: 100%;width: 100%;overflow: hidden;cursor: var(--hterm-mouse-cursor-style);-webkit-user-select: none;-moz-user-select: none;",this.DEBUG_&&(this.document_.body.style.paddingTop=this.document_.body.style.paddingBottom="calc(var(--hterm-charsize-height) * 3)");var style=doc.createElement("style");style.textContent="x-row {  display: block;  height: var(--hterm-charsize-height);  line-height: var(--hterm-charsize-height);}",doc.head.appendChild(style),this.userCssLink_=doc.createElement("link"),this.userCssLink_.setAttribute("rel","stylesheet"),this.userCssText_=doc.createElement("style"),doc.head.appendChild(this.userCssText_),this.screen_=doc.createElement("x-screen"),this.screen_.setAttribute("contenteditable","true"),this.screen_.setAttribute("spellcheck","false"),this.screen_.setAttribute("autocomplete","off"),this.screen_.setAttribute("autocorrect","off"),this.screen_.setAttribute("autocaptalize","none"),this.screen_.setAttribute("role","textbox"),this.screen_.setAttribute("tabindex","-1"),this.screen_.style.cssText="caret-color: transparent;display: block;font-family: monospace;font-size: 15px;font-variant-ligatures: none;height: 100%;overflow-y: scroll; overflow-x: hidden;white-space: pre;width: 100%;outline: none !important",doc.body.appendChild(this.screen_),this.screen_.addEventListener("scroll",this.onScroll_.bind(this)),this.screen_.addEventListener("wheel",this.onScrollWheel_.bind(this)),this.screen_.addEventListener("touchstart",this.onTouch_.bind(this)),this.screen_.addEventListener("touchmove",this.onTouch_.bind(this)),this.screen_.addEventListener("touchend",this.onTouch_.bind(this)),this.screen_.addEventListener("touchcancel",this.onTouch_.bind(this)),this.screen_.addEventListener("copy",this.onCopy_.bind(this)),this.screen_.addEventListener("paste",this.onPaste_.bind(this)),this.screen_.addEventListener("drop",this.onDragAndDrop_.bind(this)),doc.body.addEventListener("keydown",this.onBodyKeyDown_.bind(this)),this.rowNodes_=doc.createElement("div"),this.rowNodes_.id="hterm:row-nodes",this.rowNodes_.style.cssText="display: block;position: fixed;overflow: hidden;-webkit-user-select: text;-moz-user-select: text;",this.screen_.appendChild(this.rowNodes_),this.topSelectBag_=doc.createElement("x-select-bag"),this.topSelectBag_.style.cssText="display: block;overflow: hidden;height: var(--hterm-charsize-height);white-space: pre;",this.bottomSelectBag_=this.topSelectBag_.cloneNode(),this.topFold_=doc.createElement("x-fold"),this.topFold_.id="hterm:top-fold-for-row-selection",this.topFold_.style.cssText="display: block;",this.rowNodes_.appendChild(this.topFold_),this.bottomFold_=this.topFold_.cloneNode(),this.bottomFold_.id="hterm:bottom-fold-for-row-selection",this.rowNodes_.appendChild(this.bottomFold_),this.scrollArea_=doc.createElement("div"),this.scrollArea_.id="hterm:scrollarea",this.scrollArea_.style.cssText="visibility: hidden",this.screen_.appendChild(this.scrollArea_);var xmlns="http://www.w3.org/2000/svg";this.svg_=this.div_.ownerDocument.createElementNS(xmlns,"svg"),this.svg_.id="hterm:zoom-detector",this.svg_.setAttribute("xmlns",xmlns),this.svg_.setAttribute("version","1.1"),this.svg_.style.cssText="position: absolute;top: 0;left: 0;visibility: hidden",this.pasteTarget_=doc.createElement("textarea"),this.pasteTarget_.id="hterm:ctrl-v-paste-target",this.pasteTarget_.setAttribute("tabindex","-1"),this.pasteTarget_.style.cssText="position: absolute;height: 1px;width: 1px;left: 0px; bottom: 0px;opacity: 0",this.pasteTarget_.contentEditable=!0,this.screen_.appendChild(this.pasteTarget_),this.pasteTarget_.addEventListener("textInput",this.handlePasteTargetTextInput_.bind(this)),this.resize()},hterm.ScrollPort.prototype.setFontFamily=function(fontFamily,opt_smoothing){this.screen_.style.fontFamily=fontFamily,this.screen_.style.webkitFontSmoothing=opt_smoothing||"",this.syncCharacterSize()},hterm.ScrollPort.prototype.getFontFamily=function(){return this.screen_.style.fontFamily},hterm.ScrollPort.prototype.setUserCssUrl=function(url){url?(this.userCssLink_.setAttribute("href",url),this.userCssLink_.parentNode||this.document_.head.appendChild(this.userCssLink_)):this.userCssLink_.parentNode&&this.document_.head.removeChild(this.userCssLink_)},hterm.ScrollPort.prototype.setUserCssText=function(text){this.userCssText_.textContent=text},hterm.ScrollPort.prototype.focus=function(){this.iframe_.focus(),this.screen_.focus()},hterm.ScrollPort.prototype.getForegroundColor=function(){return this.screen_.style.color},hterm.ScrollPort.prototype.setForegroundColor=function(color){this.screen_.style.color=color},hterm.ScrollPort.prototype.getBackgroundColor=function(){return this.screen_.style.backgroundColor},hterm.ScrollPort.prototype.setBackgroundColor=function(color){this.screen_.style.backgroundColor=color},hterm.ScrollPort.prototype.setBackgroundImage=function(image){this.screen_.style.backgroundImage=image},hterm.ScrollPort.prototype.setBackgroundSize=function(size){this.screen_.style.backgroundSize=size},hterm.ScrollPort.prototype.setBackgroundPosition=function(position){this.screen_.style.backgroundPosition=position},hterm.ScrollPort.prototype.setCtrlVPaste=function(ctrlVPaste){this.ctrlVPaste=ctrlVPaste},hterm.ScrollPort.prototype.getScreenSize=function(){var size=hterm.getClientSize(this.screen_);return{height:size.height,width:size.width-this.currentScrollbarWidthPx}},hterm.ScrollPort.prototype.getScreenWidth=function(){return this.getScreenSize().width},hterm.ScrollPort.prototype.getScreenHeight=function(){return this.getScreenSize().height},hterm.ScrollPort.prototype.getDocument=function(){return this.document_},hterm.ScrollPort.prototype.getScreenNode=function(){return this.screen_},hterm.ScrollPort.prototype.resetCache=function(){this.currentRowNodeCache_=null,this.previousRowNodeCache_={}},hterm.ScrollPort.prototype.setRowProvider=function(rowProvider){this.resetCache(),this.rowProvider_=rowProvider,this.scheduleRedraw()},hterm.ScrollPort.prototype.invalidate=function(){for(var node=this.topFold_.nextSibling;node!=this.bottomFold_;){var nextSibling=node.nextSibling;node.parentElement.removeChild(node),node=nextSibling}this.previousRowNodeCache_=null;var topRowIndex=this.getTopRowIndex(),bottomRowIndex=this.getBottomRowIndex(topRowIndex);this.drawVisibleRows_(topRowIndex,bottomRowIndex)},hterm.ScrollPort.prototype.scheduleInvalidate=function(){if(!this.timeouts_.invalidate){var self=this;this.timeouts_.invalidate=setTimeout(function(){delete self.timeouts_.invalidate,self.invalidate()},0)}},hterm.ScrollPort.prototype.setFontSize=function(px){this.screen_.style.fontSize=px+"px",this.syncCharacterSize()},hterm.ScrollPort.prototype.getFontSize=function(){return parseInt(this.screen_.style.fontSize)},hterm.ScrollPort.prototype.measureCharacterSize=function(opt_weight){this.ruler_||(this.ruler_=this.document_.createElement("div"),this.ruler_.id="hterm:ruler-character-size",this.ruler_.style.cssText="position: absolute;top: 0;left: 0;visibility: hidden;height: auto !important;width: auto !important;",this.rulerSpan_=this.document_.createElement("span"),this.rulerSpan_.id="hterm:ruler-span-workaround",this.rulerSpan_.innerHTML=("X".repeat(100)+"\r").repeat(100),this.ruler_.appendChild(this.rulerSpan_),this.rulerBaseline_=this.document_.createElement("span"),this.rulerSpan_.id="hterm:ruler-baseline",this.rulerBaseline_.style.fontSize="0px",this.rulerBaseline_.textContent="X"),this.rulerSpan_.style.fontWeight=opt_weight||"",this.rowNodes_.appendChild(this.ruler_);var rulerSize=hterm.getClientSize(this.rulerSpan_),size=new hterm.Size(rulerSize.width/100,rulerSize.height/100);return this.ruler_.appendChild(this.rulerBaseline_),size.baseline=this.rulerBaseline_.offsetTop,this.ruler_.removeChild(this.rulerBaseline_),this.rowNodes_.removeChild(this.ruler_),this.div_.ownerDocument.body.appendChild(this.svg_),size.zoomFactor=this.svg_.currentScale,this.div_.ownerDocument.body.removeChild(this.svg_),size},hterm.ScrollPort.prototype.syncCharacterSize=function(){this.characterSize=this.measureCharacterSize(),this.resize()},hterm.ScrollPort.prototype.resize=function(){this.currentScrollbarWidthPx=hterm.getClientWidth(this.screen_)-this.screen_.clientWidth,this.syncScrollHeight(),this.syncRowNodesDimensions_();var self=this;this.publish("resize",{scrollPort:this},function(){self.scrollRowToBottom(self.rowProvider_.getRowCount()),self.scheduleRedraw()})},hterm.ScrollPort.prototype.syncRowNodesDimensions_=function(){var screenSize=this.getScreenSize();this.lastScreenWidth_=screenSize.width,this.lastScreenHeight_=screenSize.height,this.visibleRowCount=lib.f.smartFloorDivide(screenSize.height,this.characterSize.height);var visibleRowsHeight=this.visibleRowCount*this.characterSize.height;this.visibleRowTopMargin=0,this.visibleRowBottomMargin=screenSize.height-visibleRowsHeight,this.topFold_.style.marginBottom=this.visibleRowTopMargin+"px";for(var topFoldOffset=0,node=this.topFold_.previousSibling;node;)topFoldOffset+=hterm.getClientHeight(node),node=node.previousSibling;this.rowNodes_.style.width=screenSize.width+"px",this.rowNodes_.style.height=visibleRowsHeight+topFoldOffset+"px",this.rowNodes_.style.left=this.screen_.offsetLeft+"px",this.rowNodes_.style.top=this.screen_.offsetTop-topFoldOffset+"px"},hterm.ScrollPort.prototype.syncScrollHeight=function(){this.lastRowCount_=this.rowProvider_.getRowCount(),this.scrollArea_.style.height=this.characterSize.height*this.lastRowCount_+this.visibleRowTopMargin+this.visibleRowBottomMargin+"px"},hterm.ScrollPort.prototype.scheduleRedraw=function(){if(!this.timeouts_.redraw){var self=this;this.timeouts_.redraw=setTimeout(function(){delete self.timeouts_.redraw,self.redraw_()},0)}},hterm.ScrollPort.prototype.redraw_=function(){this.resetSelectBags_(),this.selection.sync(),this.syncScrollHeight(),this.currentRowNodeCache_={};var topRowIndex=this.getTopRowIndex(),bottomRowIndex=this.getBottomRowIndex(topRowIndex);this.drawTopFold_(topRowIndex),this.drawBottomFold_(bottomRowIndex),this.drawVisibleRows_(topRowIndex,bottomRowIndex),this.syncRowNodesDimensions_(),this.previousRowNodeCache_=this.currentRowNodeCache_,this.currentRowNodeCache_=null,this.isScrolledEnd=this.getTopRowIndex()+this.visibleRowCount>=this.lastRowCount_},hterm.ScrollPort.prototype.drawTopFold_=function(topRowIndex){if(!this.selection.startRow||this.selection.startRow.rowIndex>=topRowIndex)this.rowNodes_.firstChild!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.rowNodes_.firstChild);else{if(!this.selection.isMultiline||this.selection.endRow.rowIndex>=topRowIndex)this.selection.startRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.startRow.nextSibling);else for(this.selection.endRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.endRow.nextSibling);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.firstChild!=this.selection.startRow;)this.rowNodes_.removeChild(this.rowNodes_.firstChild)}},hterm.ScrollPort.prototype.drawBottomFold_=function(bottomRowIndex){if(!this.selection.endRow||this.selection.endRow.rowIndex<=bottomRowIndex)this.rowNodes_.lastChild!=this.bottomFold_&&this.rowNodes_.appendChild(this.bottomFold_);else{if(!this.selection.isMultiline||this.selection.startRow.rowIndex<=bottomRowIndex)this.bottomFold_.nextSibling!=this.selection.endRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.endRow);else for(this.bottomFold_.nextSibling!=this.selection.startRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.startRow);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.lastChild!=this.selection.endRow;)this.rowNodes_.removeChild(this.rowNodes_.lastChild)}},hterm.ScrollPort.prototype.drawVisibleRows_=function(topRowIndex,bottomRowIndex){var self=this;function removeUntilNode(currentNode,targetNode){for(;currentNode!=targetNode;){if(!currentNode)throw"Did not encounter target node";if(currentNode==self.bottomFold_)throw"Encountered bottom fold before target node";var deadNode=currentNode;currentNode=currentNode.nextSibling,deadNode.parentNode.removeChild(deadNode)}}for(var selectionStartRow=this.selection.startRow,selectionEndRow=this.selection.endRow,bottomFold=this.bottomFold_,node=this.topFold_.nextSibling,targetDrawCount=Math.min(this.visibleRowCount,this.rowProvider_.getRowCount()),drawCount=0;drawCount<targetDrawCount;drawCount++){var rowIndex=topRowIndex+drawCount;if(node!=bottomFold)if(node.rowIndex!=rowIndex)if(selectionStartRow&&selectionStartRow.rowIndex==rowIndex)removeUntilNode(node,selectionStartRow),node=selectionStartRow.nextSibling;else if(selectionEndRow&&selectionEndRow.rowIndex==rowIndex)removeUntilNode(node,selectionEndRow),node=selectionEndRow.nextSibling;else if(node!=selectionStartRow&&node!=selectionEndRow){if(!(newNode=this.fetchRowNode_(rowIndex))){console.log("Couldn't fetch row index: "+rowIndex);break}node=node!=newNode?(this.rowNodes_.insertBefore(newNode,node),newNode.nextSibling,this.rowNodes_.removeChild(node),newNode.nextSibling):node.nextSibling}else{if(!(newNode=this.fetchRowNode_(rowIndex))){console.log("Couldn't fetch row index: "+rowIndex);break}this.rowNodes_.insertBefore(newNode,node)}else node=node.nextSibling;else{var newNode;if(!(newNode=this.fetchRowNode_(rowIndex))){console.log("Couldn't fetch row index: "+rowIndex);break}this.rowNodes_.insertBefore(newNode,node)}}node!=this.bottomFold_&&removeUntilNode(node,bottomFold)},hterm.ScrollPort.prototype.resetSelectBags_=function(){this.topSelectBag_.parentNode&&(this.topSelectBag_.textContent="",this.topSelectBag_.parentNode.removeChild(this.topSelectBag_)),this.bottomSelectBag_.parentNode&&(this.bottomSelectBag_.textContent="",this.bottomSelectBag_.parentNode.removeChild(this.bottomSelectBag_))},hterm.ScrollPort.prototype.cacheRowNode_=function(rowNode){this.currentRowNodeCache_[rowNode.rowIndex]=rowNode},hterm.ScrollPort.prototype.fetchRowNode_=function(rowIndex){var node;return node=this.previousRowNodeCache_&&rowIndex in this.previousRowNodeCache_?this.previousRowNodeCache_[rowIndex]:this.rowProvider_.getRowNode(rowIndex),this.currentRowNodeCache_&&this.cacheRowNode_(node),node},hterm.ScrollPort.prototype.selectAll=function(){var firstRow;if(0!=this.topFold_.nextSibling.rowIndex){for(;this.topFold_.previousSibling;)this.rowNodes_.removeChild(this.topFold_.previousSibling);firstRow=this.fetchRowNode_(0),this.rowNodes_.insertBefore(firstRow,this.topFold_),this.syncRowNodesDimensions_()}else firstRow=this.topFold_.nextSibling;var lastRow,lastRowIndex=this.rowProvider_.getRowCount()-1;if(this.bottomFold_.previousSibling.rowIndex!=lastRowIndex){for(;this.bottomFold_.nextSibling;)this.rowNodes_.removeChild(this.bottomFold_.nextSibling);lastRow=this.fetchRowNode_(lastRowIndex),this.rowNodes_.appendChild(lastRow)}else lastRow=this.bottomFold_.previousSibling.rowIndex;var selection=this.document_.getSelection();selection.collapse(firstRow,0),selection.extend(lastRow,lastRow.childNodes.length),this.selection.sync()},hterm.ScrollPort.prototype.getScrollMax_=function(e){return hterm.getClientHeight(this.scrollArea_)+this.visibleRowTopMargin+this.visibleRowBottomMargin-hterm.getClientHeight(this.screen_)},hterm.ScrollPort.prototype.scrollRowToTop=function(rowIndex){this.syncScrollHeight(),this.isScrolledEnd=rowIndex+this.visibleRowCount>=this.lastRowCount_;var scrollTop=rowIndex*this.characterSize.height+this.visibleRowTopMargin,scrollMax=this.getScrollMax_();scrollMax<scrollTop&&(scrollTop=scrollMax),this.screen_.scrollTop!=scrollTop&&(this.screen_.scrollTop=scrollTop,this.scheduleRedraw())},hterm.ScrollPort.prototype.scrollRowToBottom=function(rowIndex){this.syncScrollHeight(),this.isScrolledEnd=rowIndex+this.visibleRowCount>=this.lastRowCount_;var scrollTop=rowIndex*this.characterSize.height+this.visibleRowTopMargin+this.visibleRowBottomMargin;(scrollTop-=this.visibleRowCount*this.characterSize.height)<0&&(scrollTop=0),this.screen_.scrollTop!=scrollTop&&(this.screen_.scrollTop=scrollTop)},hterm.ScrollPort.prototype.getTopRowIndex=function(){return Math.round(this.screen_.scrollTop/this.characterSize.height)},hterm.ScrollPort.prototype.getBottomRowIndex=function(topRowIndex){return topRowIndex+this.visibleRowCount-1},hterm.ScrollPort.prototype.onScroll_=function(e){var screenSize=this.getScreenSize();screenSize.width==this.lastScreenWidth_&&screenSize.height==this.lastScreenHeight_?(this.redraw_(),this.publish("scroll",{scrollPort:this})):this.resize()},hterm.ScrollPort.prototype.onScrollWheel=function(e){},hterm.ScrollPort.prototype.onScrollWheel_=function(e){if(this.onScrollWheel(e),!e.defaultPrevented){var delta=this.scrollWheelDelta(e),top=this.screen_.scrollTop-delta;top<0&&(top=0);var scrollMax=this.getScrollMax_();scrollMax<top&&(top=scrollMax),top!=this.screen_.scrollTop&&(this.screen_.scrollTop=top,e.preventDefault())}},hterm.ScrollPort.prototype.scrollWheelDelta=function(e){var delta;switch(e.deltaMode){case WheelEvent.DOM_DELTA_PIXEL:delta=e.deltaY*this.scrollWheelMultiplier_;break;case WheelEvent.DOM_DELTA_LINE:delta=e.deltaY*this.characterSize.height;break;case WheelEvent.DOM_DELTA_PAGE:delta=e.deltaY*this.characterSize.height*this.screen_.getHeight()}return-1*delta},hterm.ScrollPort.prototype.onTouch=function(e){},hterm.ScrollPort.prototype.onTouch_=function(e){if(this.onTouch(e),!e.defaultPrevented){function scrubTouch(t){return{id:t.identifier,y:t.clientY,x:t.clientX}}var i,touch;switch(e.type){case"touchstart":for(i=0;i<e.changedTouches.length;++i)touch=scrubTouch(e.changedTouches[i]),this.lastTouch_[touch.id]=touch;break;case"touchcancel":case"touchend":for(i=0;i<e.changedTouches.length;++i)delete this.lastTouch_[e.changedTouches[i].identifier];break;case"touchmove":var delta=0;for(i=0;i<e.changedTouches.length;++i)touch=scrubTouch(e.changedTouches[i]),delta+=this.lastTouch_[touch.id].y-touch.y,this.lastTouch_[touch.id]=touch;delta*=-1;var top=this.screen_.scrollTop-delta;top<0&&(top=0);var scrollMax=this.getScrollMax_();scrollMax<top&&(top=scrollMax),top!=this.screen_.scrollTop&&(this.screen_.scrollTop=top)}e.preventDefault()}},hterm.ScrollPort.prototype.onResize_=function(e){this.syncCharacterSize()},hterm.ScrollPort.prototype.onCopy=function(e){},hterm.ScrollPort.prototype.onCopy_=function(e){if(this.onCopy(e),!e.defaultPrevented&&(this.resetSelectBags_(),this.selection.sync(),this.selection.startRow&&!(this.selection.endRow.rowIndex-this.selection.startRow.rowIndex<2))){var endBackfillIndex,startBackfillIndex,topRowIndex=this.getTopRowIndex(),bottomRowIndex=this.getBottomRowIndex(topRowIndex);if(this.selection.startRow.rowIndex<topRowIndex)endBackfillIndex=this.selection.endRow.rowIndex<topRowIndex?this.selection.endRow.rowIndex:this.topFold_.nextSibling.rowIndex,this.topSelectBag_.textContent=this.rowProvider_.getRowsText(this.selection.startRow.rowIndex+1,endBackfillIndex),this.rowNodes_.insertBefore(this.topSelectBag_,this.selection.startRow.nextSibling),this.syncRowNodesDimensions_();if(this.selection.endRow.rowIndex>bottomRowIndex)startBackfillIndex=this.selection.startRow.rowIndex>bottomRowIndex?this.selection.startRow.rowIndex+1:this.bottomFold_.previousSibling.rowIndex+1,this.bottomSelectBag_.textContent=this.rowProvider_.getRowsText(startBackfillIndex,this.selection.endRow.rowIndex),this.rowNodes_.insertBefore(this.bottomSelectBag_,this.selection.endRow)}},hterm.ScrollPort.prototype.onBodyKeyDown_=function(e){if(this.ctrlVPaste){var lowerKey=String.fromCharCode(e.which).toLowerCase();(e.ctrlKey||e.metaKey)&&"v"==lowerKey&&this.pasteTarget_.focus()}},hterm.ScrollPort.prototype.onPaste_=function(e){this.pasteTarget_.focus();var self=this;setTimeout(function(){self.publish("paste",{text:self.pasteTarget_.value}),self.pasteTarget_.value="",self.screen_.focus()},0)},hterm.ScrollPort.prototype.handlePasteTargetTextInput_=function(e){e.stopPropagation()},hterm.ScrollPort.prototype.onDragAndDrop_=function(e){e.preventDefault();var data=void 0,format=void 0;e.shiftKey||(e.dataTransfer.types.forEach(function(t){!format&&"text/plain"!=t&&t.startsWith("text/")&&(format=t)}),format&&(data=e.dataTransfer.getData(format))),(data=data||e.dataTransfer.getData("text/plain"))&&this.publish("paste",{text:data})},hterm.ScrollPort.prototype.setScrollbarVisible=function(state){this.screen_.style.overflowY=state?"scroll":"hidden"},hterm.ScrollPort.prototype.setScrollWheelMoveMultipler=function(multiplier){this.scrollWheelMultiplier_=multiplier},lib.rtdep("lib.colors","lib.PreferenceManager","lib.resource","lib.wc","lib.f","hterm.Keyboard","hterm.Options","hterm.PreferenceManager","hterm.Screen","hterm.ScrollPort","hterm.Size","hterm.TextAttributes","hterm.VT"),hterm.Terminal=function(opt_profileId){this.profileId_=null,this.primaryScreen_=new hterm.Screen,this.alternateScreen_=new hterm.Screen,this.screen_=this.primaryScreen_,this.screenSize=new hterm.Size(0,0),this.scrollPort_=new hterm.ScrollPort(this),this.scrollPort_.subscribe("resize",this.onResize_.bind(this)),this.scrollPort_.subscribe("scroll",this.onScroll_.bind(this)),this.scrollPort_.subscribe("paste",this.onPaste_.bind(this)),this.scrollPort_.onCopy=this.onCopy_.bind(this),this.div_=null,this.document_=window.document,this.scrollbackRows_=[],this.tabStops_=[],this.defaultTabStops=!0,this.vtScrollTop_=null,this.vtScrollBottom_=null,this.cursorNode_=null,this.cursorShape_=hterm.Terminal.cursorShape.BLOCK,this.cursorColor_=null,this.cursorBlinkCycle_=[100,100],this.myOnCursorBlink_=this.onCursorBlink_.bind(this),this.backgroundColor_=null,this.foregroundColor_=null,this.scrollOnOutput_=null,this.scrollOnKeystroke_=null,this.scrollWheelArrowKeys_=null,this.defeatMouseReports_=!1,this.bellAudio_=this.document_.createElement("audio"),this.bellAudio_.id="hterm:bell-audio",this.bellAudio_.setAttribute("preload","auto"),this.bellNotificationList_=[],this.desktopNotificationBell_=!1,this.savedOptions_={},this.options_=new hterm.Options,this.timeouts_={},this.vt=new hterm.VT(this),this.keyboard=new hterm.Keyboard(this),this.io=new hterm.Terminal.IO(this),this.enableMouseDragScroll=!0,this.copyOnSelect=null,this.mouseRightClickPaste=null,this.mousePasteButton=null,this.useDefaultWindowCopy=!1,this.clearSelectionAfterCopy=!0,this.realizeSize_(80,24),this.setDefaultTabStops(),this.reportFocus=!1,this.setProfile(opt_profileId||"default",function(){this.onTerminalReady()}.bind(this))},hterm.Terminal.cursorShape={BLOCK:"BLOCK",BEAM:"BEAM",UNDERLINE:"UNDERLINE"},hterm.Terminal.prototype.onTerminalReady=function(){},hterm.Terminal.prototype.tabWidth=8,hterm.Terminal.prototype.setProfile=function(profileId,opt_callback){this.profileId_=profileId.replace(/\//g,"");var terminal=this;this.prefs_&&this.prefs_.deactivate(),this.prefs_=new hterm.PreferenceManager(this.profileId_),this.prefs_.addObservers(null,{"alt-gr-mode":function altGrMode(v){v=null==v?"en-us"==navigator.language.toLowerCase()?"none":"right-alt":"string"==typeof v?v.toLowerCase():"none",/^(none|ctrl-alt|left-alt|right-alt)$/.test(v)||(v="none"),terminal.keyboard.altGrMode=v},"alt-backspace-is-meta-backspace":function altBackspaceIsMetaBackspace(v){terminal.keyboard.altBackspaceIsMetaBackspace=v},"alt-is-meta":function altIsMeta(v){terminal.keyboard.altIsMeta=v},"alt-sends-what":function altSendsWhat(v){/^(escape|8-bit|browser-key)$/.test(v)||(v="escape"),terminal.keyboard.altSendsWhat=v},"audible-bell-sound":function audibleBellSound(v){var ary=v.match(/^lib-resource:(\S+)/);ary?terminal.bellAudio_.setAttribute("src",lib.resource.getDataUrl(ary[1])):terminal.bellAudio_.setAttribute("src",v)},"desktop-notification-bell":function desktopNotificationBell(v){v&&Notification?(terminal.desktopNotificationBell_="granted"===Notification.permission,terminal.desktopNotificationBell_||console.warn("desktop-notification-bell is true but we do not have permission to display notifications.")):terminal.desktopNotificationBell_=!1},"background-color":function backgroundColor(v){terminal.setBackgroundColor(v)},"background-image":function backgroundImage(v){terminal.scrollPort_.setBackgroundImage(v)},"background-size":function backgroundSize(v){terminal.scrollPort_.setBackgroundSize(v)},"background-position":function backgroundPosition(v){terminal.scrollPort_.setBackgroundPosition(v)},"backspace-sends-backspace":function backspaceSendsBackspace(v){terminal.keyboard.backspaceSendsBackspace=v},"character-map-overrides":function characterMapOverrides(v){null==v||v instanceof Object?(terminal.vt.characterMaps.reset(),terminal.vt.characterMaps.setOverrides(v)):console.warn("Preference character-map-modifications is not an object: "+v)},"cursor-blink":function cursorBlink(v){terminal.setCursorBlink(!!v)},"cursor-blink-cycle":function cursorBlinkCycle(v){v instanceof Array&&"number"==typeof v[0]&&"number"==typeof v[1]?terminal.cursorBlinkCycle_=v:terminal.cursorBlinkCycle_="number"==typeof v?[v,v]:[100,100]},"cursor-color":function cursorColor(v){terminal.setCursorColor(v)},"color-palette-overrides":function colorPaletteOverrides(v){if(null==v||v instanceof Object||v instanceof Array){if(lib.colors.colorPalette=lib.colors.stockColorPalette.concat(),v)for(var key in v){var i=parseInt(key);if(isNaN(i)||i<0||255<i)console.log("Invalid value in palette: "+key+": "+v[key]);else if(v[i]){var rgb=lib.colors.normalizeCSS(v[i]);rgb&&(lib.colors.colorPalette[i]=rgb)}}terminal.primaryScreen_.textAttributes.resetColorPalette(),terminal.alternateScreen_.textAttributes.resetColorPalette()}else console.warn("Preference color-palette-overrides is not an array or object: "+v)},"copy-on-select":function copyOnSelect(v){terminal.copyOnSelect=!!v},"use-default-window-copy":function useDefaultWindowCopy(v){terminal.useDefaultWindowCopy=!!v},"clear-selection-after-copy":function clearSelectionAfterCopy(v){terminal.clearSelectionAfterCopy=!!v},"ctrl-plus-minus-zero-zoom":function ctrlPlusMinusZeroZoom(v){terminal.keyboard.ctrlPlusMinusZeroZoom=v},"ctrl-c-copy":function ctrlCCopy(v){terminal.keyboard.ctrlCCopy=v},"ctrl-v-paste":function ctrlVPaste(v){terminal.keyboard.ctrlVPaste=v,terminal.scrollPort_.setCtrlVPaste(v)},"east-asian-ambiguous-as-two-column":function eastAsianAmbiguousAsTwoColumn(v){lib.wc.regardCjkAmbiguous=v},"enable-8-bit-control":function enable8BitControl(v){terminal.vt.enable8BitControl=!!v},"enable-bold":function enableBold(){terminal.syncBoldSafeState()},"enable-bold-as-bright":function enableBoldAsBright(v){terminal.primaryScreen_.textAttributes.enableBoldAsBright=!!v,terminal.alternateScreen_.textAttributes.enableBoldAsBright=!!v},"enable-blink":function enableBlink(){terminal.syncBlinkState()},"enable-clipboard-write":function enableClipboardWrite(v){terminal.vt.enableClipboardWrite=!!v},"enable-dec12":function enableDec12(v){terminal.vt.enableDec12=!!v},"font-family":function fontFamily(){terminal.syncFontFamily()},"font-size":function fontSize(v){terminal.setFontSize(v)},"font-smoothing":function fontSmoothing(){terminal.syncFontFamily()},"foreground-color":function foregroundColor(v){terminal.setForegroundColor(v)},"home-keys-scroll":function homeKeysScroll(v){terminal.keyboard.homeKeysScroll=v},keybindings:function keybindings(v){if(terminal.keyboard.bindings.clear(),v)if(v instanceof Object)try{terminal.keyboard.bindings.addBindings(v)}catch(ex){console.error("Error in keybindings preference: "+ex)}else console.error("Error in keybindings preference: Expected object")},"max-string-sequence":function maxStringSequence(v){terminal.vt.maxStringSequence=v},"media-keys-are-fkeys":function mediaKeysAreFkeys(v){terminal.keyboard.mediaKeysAreFKeys=v},"meta-sends-escape":function metaSendsEscape(v){terminal.keyboard.metaSendsEscape=v},"mouse-right-click-paste":function mouseRightClickPaste(v){terminal.mouseRightClickPaste=v},"mouse-paste-button":function mousePasteButton(){terminal.syncMousePasteButton()},"page-keys-scroll":function pageKeysScroll(v){terminal.keyboard.pageKeysScroll=v},"pass-alt-number":function passAltNumber(v){null==v&&(v=!window.navigator.userAgent.match(/Mac OS X/)&&"popup"!=hterm.windowType);terminal.passAltNumber=v},"pass-ctrl-number":function passCtrlNumber(v){null==v&&(v=!window.navigator.userAgent.match(/Mac OS X/)&&"popup"!=hterm.windowType);terminal.passCtrlNumber=v},"pass-meta-number":function passMetaNumber(v){null==v&&(v=window.navigator.userAgent.match(/Mac OS X/)&&"popup"!=hterm.windowType);terminal.passMetaNumber=v},"pass-meta-v":function passMetaV(v){terminal.keyboard.passMetaV=v},"receive-encoding":function receiveEncoding(v){/^(utf-8|raw)$/.test(v)||(console.warn('Invalid value for "receive-encoding": '+v),v="utf-8"),terminal.vt.characterEncoding=v},"scroll-on-keystroke":function scrollOnKeystroke(v){terminal.scrollOnKeystroke_=v},"scroll-on-output":function scrollOnOutput(v){terminal.scrollOnOutput_=v},"scrollbar-visible":function scrollbarVisible(v){terminal.setScrollbarVisible(v)},"scroll-wheel-may-send-arrow-keys":function scrollWheelMaySendArrowKeys(v){terminal.scrollWheelArrowKeys_=v},"scroll-wheel-move-multiplier":function scrollWheelMoveMultiplier(v){terminal.setScrollWheelMoveMultipler(v)},"send-encoding":function sendEncoding(v){/^(utf-8|raw)$/.test(v)||(console.warn('Invalid value for "send-encoding": '+v),v="utf-8"),terminal.keyboard.characterEncoding=v},"shift-insert-paste":function shiftInsertPaste(v){terminal.keyboard.shiftInsertPaste=v},"terminal-encoding":function terminalEncoding(v){terminal.vt.setEncoding(v)},"user-css":function userCss(v){terminal.scrollPort_.setUserCssUrl(v)},"user-css-text":function userCssText(v){terminal.scrollPort_.setUserCssText(v)},"word-break-match-left":function wordBreakMatchLeft(v){terminal.primaryScreen_.wordBreakMatchLeft=v,terminal.alternateScreen_.wordBreakMatchLeft=v},"word-break-match-right":function wordBreakMatchRight(v){terminal.primaryScreen_.wordBreakMatchRight=v,terminal.alternateScreen_.wordBreakMatchRight=v},"word-break-match-middle":function wordBreakMatchMiddle(v){terminal.primaryScreen_.wordBreakMatchMiddle=v,terminal.alternateScreen_.wordBreakMatchMiddle=v}}),this.prefs_.readStorage(function(){this.prefs_.notifyAll(),opt_callback&&opt_callback()}.bind(this))},hterm.Terminal.prototype.getPrefs=function(){return this.prefs_},hterm.Terminal.prototype.setBracketedPaste=function(state){this.options_.bracketedPaste=state},hterm.Terminal.prototype.setCursorColor=function(color){this.cursorColor_=color,this.cursorNode_.style.backgroundColor=color,this.cursorNode_.style.borderColor=color},hterm.Terminal.prototype.getCursorColor=function(){return this.cursorColor_},hterm.Terminal.prototype.setSelectionEnabled=function(state){this.enableMouseDragScroll=state},hterm.Terminal.prototype.setBackgroundColor=function(color){this.backgroundColor_=lib.colors.normalizeCSS(color),this.primaryScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.alternateScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.scrollPort_.setBackgroundColor(color)},hterm.Terminal.prototype.getBackgroundColor=function(){return this.backgroundColor_},hterm.Terminal.prototype.setForegroundColor=function(color){this.foregroundColor_=lib.colors.normalizeCSS(color),this.primaryScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.alternateScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.scrollPort_.setForegroundColor(color)},hterm.Terminal.prototype.getForegroundColor=function(){return this.foregroundColor_},hterm.Terminal.prototype.runCommandClass=function(commandClass,argString){var environment=this.prefs_.get("environment");"object"==(void 0===environment?"undefined":_typeof2(environment))&&null!=environment||(environment={});var self=this;this.command=new commandClass({argString:argString||"",io:this.io.push(),environment:environment,onExit:function onExit(){self.io.pop(),self.uninstallKeyboard(),self.prefs_.get("close-on-exit")&&window.close()}}),this.installKeyboard(),this.command.run()},hterm.Terminal.prototype.isPrimaryScreen=function(){return this.screen_==this.primaryScreen_},hterm.Terminal.prototype.installKeyboard=function(){this.keyboard.installKeyboard(this.scrollPort_.getDocument().body)},hterm.Terminal.prototype.uninstallKeyboard=function(){this.keyboard.installKeyboard(null)},hterm.Terminal.prototype.setCssVar=function(name,value){var opt_prefix=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"--hterm-";this.document_.documentElement.style.setProperty(""+opt_prefix+name,value)},hterm.Terminal.prototype.setFontSize=function(px){0===px&&(px=this.prefs_.get("font-size")),this.scrollPort_.setFontSize(px),this.setCssVar("charsize-width",this.scrollPort_.characterSize.width+"px"),this.setCssVar("charsize-height",this.scrollPort_.characterSize.height+"px")},hterm.Terminal.prototype.getFontSize=function(){return this.scrollPort_.getFontSize()},hterm.Terminal.prototype.getFontFamily=function(){return this.scrollPort_.getFontFamily()},hterm.Terminal.prototype.syncFontFamily=function(){this.scrollPort_.setFontFamily(this.prefs_.get("font-family"),this.prefs_.get("font-smoothing")),this.syncBoldSafeState()},hterm.Terminal.prototype.syncMousePasteButton=function(){var button=this.prefs_.get("mouse-paste-button");if("number"!=typeof button){var ary=navigator.userAgent.match(/\(X11;\s+(\S+)/);ary&&"CrOS"!=ary[1]?this.mousePasteButton=2:this.mousePasteButton=1}else this.mousePasteButton=button},hterm.Terminal.prototype.syncBoldSafeState=function(){var enableBold=this.prefs_.get("enable-bold");if(null!==enableBold)return this.primaryScreen_.textAttributes.enableBold=enableBold,void(this.alternateScreen_.textAttributes.enableBold=enableBold);var normalSize=this.scrollPort_.measureCharacterSize(),boldSize=this.scrollPort_.measureCharacterSize("bold"),isBoldSafe=normalSize.equals(boldSize);isBoldSafe||console.warn("Bold characters disabled: Size of bold weight differs from normal.  Font family is: "+this.scrollPort_.getFontFamily()),this.primaryScreen_.textAttributes.enableBold=isBoldSafe,this.alternateScreen_.textAttributes.enableBold=isBoldSafe},hterm.Terminal.prototype.syncBlinkState=function(){this.setCssVar("node-duration",this.prefs_.get("enable-blink")?"0.7s":"0")},hterm.Terminal.prototype.syncMouseStyle=function(){this.setCssVar("mouse-cursor-style",this.vt.mouseReport==this.vt.MOUSE_REPORT_DISABLED?"var(--hterm-mouse-cursor-text)":"var(--hterm-mouse-cursor-pointer)")},hterm.Terminal.prototype.saveCursor=function(){return this.screen_.cursorPosition.clone()},hterm.Terminal.prototype.getTextAttributes=function(){return this.screen_.textAttributes},hterm.Terminal.prototype.setTextAttributes=function(textAttributes){this.screen_.textAttributes=textAttributes},hterm.Terminal.prototype.getZoomFactor=function(){return this.scrollPort_.characterSize.zoomFactor},hterm.Terminal.prototype.setWindowTitle=function(title){window.document.title=title},hterm.Terminal.prototype.restoreCursor=function(cursor){var row=lib.f.clamp(cursor.row,0,this.screenSize.height-1),column=lib.f.clamp(cursor.column,0,this.screenSize.width-1);this.screen_.setCursorPosition(row,column),(cursor.column>column||cursor.column==column&&cursor.overflow)&&(this.screen_.cursorPosition.overflow=!0)},hterm.Terminal.prototype.clearCursorOverflow=function(){this.screen_.cursorPosition.overflow=!1},hterm.Terminal.prototype.setCursorShape=function(shape){this.cursorShape_=shape,this.restyleCursor_()},hterm.Terminal.prototype.getCursorShape=function(){return this.cursorShape_},hterm.Terminal.prototype.setWidth=function(columnCount){null!=columnCount?(this.div_.style.width=Math.ceil(this.scrollPort_.characterSize.width*columnCount+this.scrollPort_.currentScrollbarWidthPx)+"px",this.realizeSize_(columnCount,this.screenSize.height),this.scheduleSyncCursorPosition_()):this.div_.style.width="100%"},hterm.Terminal.prototype.setHeight=function(rowCount){null!=rowCount?(this.div_.style.height=this.scrollPort_.characterSize.height*rowCount+"px",this.realizeSize_(this.screenSize.width,rowCount),this.scheduleSyncCursorPosition_()):this.div_.style.height="100%"},hterm.Terminal.prototype.realizeSize_=function(columnCount,rowCount){columnCount!=this.screenSize.width&&this.realizeWidth_(columnCount),rowCount!=this.screenSize.height&&this.realizeHeight_(rowCount),this.io.onTerminalResize_(columnCount,rowCount)},hterm.Terminal.prototype.realizeWidth_=function(columnCount){if(columnCount<=0)throw new Error("Attempt to realize bad width: "+columnCount);var deltaColumns=columnCount-this.screen_.getWidth();if(this.screenSize.width=columnCount,this.screen_.setColumnCount(columnCount),0<deltaColumns)this.defaultTabStops&&this.setDefaultTabStops(this.screenSize.width-deltaColumns);else for(var i=this.tabStops_.length-1;0<=i&&!(this.tabStops_[i]<columnCount);i--)this.tabStops_.pop();this.screen_.setColumnCount(this.screenSize.width)},hterm.Terminal.prototype.realizeHeight_=function(rowCount){if(rowCount<=0)throw new Error("Attempt to realize bad height: "+rowCount);var deltaRows=rowCount-this.screen_.getHeight();this.screenSize.height=rowCount;var cursor=this.saveCursor();if(deltaRows<0){for(deltaRows*=-1;deltaRows;){var lastRow=this.getRowCount()-1;if(lastRow-this.scrollbackRows_.length==cursor.row)break;if(this.getRowText(lastRow))break;this.screen_.popRow(),deltaRows--}var ary=this.screen_.shiftRows(deltaRows);this.scrollbackRows_.push.apply(this.scrollbackRows_,ary),cursor.row=Math.max(cursor.row-deltaRows,0)}else if(0<deltaRows){if(deltaRows<=this.scrollbackRows_.length){var scrollbackCount=Math.min(deltaRows,this.scrollbackRows_.length),rows=this.scrollbackRows_.splice(this.scrollbackRows_.length-scrollbackCount,scrollbackCount);this.screen_.unshiftRows(rows),deltaRows-=scrollbackCount,cursor.row+=scrollbackCount}deltaRows&&this.appendRows_(deltaRows)}this.setVTScrollRegion(null,null),this.restoreCursor(cursor)},hterm.Terminal.prototype.scrollHome=function(){this.scrollPort_.scrollRowToTop(0)},hterm.Terminal.prototype.scrollEnd=function(){this.scrollPort_.scrollRowToBottom(this.getRowCount())},hterm.Terminal.prototype.scrollPageUp=function(){var i=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(i-this.screenSize.height+1)},hterm.Terminal.prototype.scrollPageDown=function(){var i=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(i+this.screenSize.height-1)},hterm.Terminal.prototype.scrollLineUp=function(){var i=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(i-1)},hterm.Terminal.prototype.scrollLineDown=function(){var i=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(i+1)},hterm.Terminal.prototype.wipeContents=function(){this.scrollbackRows_.length=0,this.scrollPort_.resetCache(),[this.primaryScreen_,this.alternateScreen_].forEach(function(screen){var bottom=screen.getHeight();0<bottom&&(this.renumberRows_(0,bottom),this.clearHome(screen))}.bind(this)),this.syncCursorPosition_(),this.scrollPort_.invalidate()},hterm.Terminal.prototype.reset=function(){this.clearAllTabStops(),this.setDefaultTabStops(),this.clearHome(this.primaryScreen_),this.primaryScreen_.textAttributes.reset(),this.clearHome(this.alternateScreen_),this.alternateScreen_.textAttributes.reset(),this.setCursorBlink(!!this.prefs_.get("cursor-blink")),this.vt.reset(),this.softReset()},hterm.Terminal.prototype.softReset=function(){this.options_=new hterm.Options,this.options_.cursorBlink=!!this.timeouts_.cursorBlink,this.primaryScreen_.textAttributes.resetColorPalette(),this.alternateScreen_.textAttributes.resetColorPalette(),this.setVTScrollRegion(null,null),this.setCursorVisible(!0)},hterm.Terminal.prototype.forwardTabStop=function(){for(var column=this.screen_.cursorPosition.column,i=0;i<this.tabStops_.length;i++)if(this.tabStops_[i]>column)return void this.setCursorColumn(this.tabStops_[i]);var overflow=this.screen_.cursorPosition.overflow;this.setCursorColumn(this.screenSize.width-1),this.screen_.cursorPosition.overflow=overflow},hterm.Terminal.prototype.backwardTabStop=function(){for(var column=this.screen_.cursorPosition.column,i=this.tabStops_.length-1;0<=i;i--)if(this.tabStops_[i]<column)return void this.setCursorColumn(this.tabStops_[i]);this.setCursorColumn(1)},hterm.Terminal.prototype.setTabStop=function(column){for(var i=this.tabStops_.length-1;0<=i;i--){if(this.tabStops_[i]==column)return;if(this.tabStops_[i]<column)return void this.tabStops_.splice(i+1,0,column)}this.tabStops_.splice(0,0,column)},hterm.Terminal.prototype.clearTabStopAtCursor=function(){var column=this.screen_.cursorPosition.column,i=this.tabStops_.indexOf(column);-1!=i&&this.tabStops_.splice(i,1)},hterm.Terminal.prototype.clearAllTabStops=function(){this.tabStops_.length=0,this.defaultTabStops=!1},hterm.Terminal.prototype.setDefaultTabStops=function(opt_start){for(var start=opt_start||0,w=this.tabWidth,i=start=start-1-(start-1)%w+w;i<this.screenSize.width;i+=w)this.setTabStop(i);this.defaultTabStops=!0},hterm.Terminal.prototype.interpret=function(str){this.vt.interpret(str),this.scheduleSyncCursorPosition_()},hterm.Terminal.prototype.decorate=function(div){this.div_=div,this.scrollPort_.decorate(div),this.scrollPort_.setBackgroundImage(this.prefs_.get("background-image")),this.scrollPort_.setBackgroundSize(this.prefs_.get("background-size")),this.scrollPort_.setBackgroundPosition(this.prefs_.get("background-position")),this.scrollPort_.setUserCssUrl(this.prefs_.get("user-css")),this.scrollPort_.setUserCssText(this.prefs_.get("user-css-text")),this.div_.focus=this.focus.bind(this),this.setFontSize(this.prefs_.get("font-size")),this.syncFontFamily(),this.setScrollbarVisible(this.prefs_.get("scrollbar-visible")),this.setScrollWheelMoveMultipler(this.prefs_.get("scroll-wheel-move-multiplier")),this.document_=this.scrollPort_.getDocument(),this.document_.body.oncontextmenu=function(){return!1};var onMouse=this.onMouse_.bind(this),screenNode=this.scrollPort_.getScreenNode();screenNode.addEventListener("mousedown",onMouse),screenNode.addEventListener("mouseup",onMouse),screenNode.addEventListener("mousemove",onMouse),this.scrollPort_.onScrollWheel=onMouse,screenNode.addEventListener("focus",this.onFocusChange_.bind(this,!0)),screenNode.addEventListener("mousedown",function(){setTimeout(this.onFocusChange_.bind(this,!0))}.bind(this)),screenNode.addEventListener("blur",this.onFocusChange_.bind(this,!1));var style=this.document_.createElement("style");style.textContent='.cursor-node[focus="false"] {  box-sizing: border-box;  background-color: transparent !important;  border-width: 2px;  border-style: solid;}.wc-node {  display: inline-block;  text-align: center;  width: calc(var(--hterm-charsize-width) * 2);  line-height: var(--hterm-charsize-height);}:root {  --hterm-charsize-width: '+this.scrollPort_.characterSize.width+"px;  --hterm-charsize-height: "+this.scrollPort_.characterSize.height+"px;  --hterm-cursor-offset-col: -1;  --hterm-cursor-offset-row: -1;  --hterm-blink-node-duration: 0.7s;  --hterm-mouse-cursor-text: text;  --hterm-mouse-cursor-pointer: default;  --hterm-mouse-cursor-style: var(--hterm-mouse-cursor-text);}@keyframes blink {  from { opacity: 1.0; }  to { opacity: 0.0; }}.blink-node {  animation-name: blink;  animation-duration: var(--hterm-blink-node-duration);  animation-iteration-count: infinite;  animation-timing-function: ease-in-out;  animation-direction: alternate;}",this.document_.head.appendChild(style),this.cursorNode_=this.document_.createElement("div"),this.cursorNode_.id="hterm:terminal-cursor",this.cursorNode_.className="cursor-node",this.cursorNode_.style.cssText="position: absolute;left: calc(var(--hterm-charsize-width) * var(--hterm-cursor-offset-col));top: calc(var(--hterm-charsize-height) * var(--hterm-cursor-offset-row));display: block;width: var(--hterm-charsize-width);height: var(--hterm-charsize-height);-webkit-transition: opacity, background-color 100ms linear;-moz-transition: opacity, background-color 100ms linear;",this.setCursorColor(this.prefs_.get("cursor-color")),this.setCursorBlink(!!this.prefs_.get("cursor-blink")),this.restyleCursor_(),this.document_.body.appendChild(this.cursorNode_),this.scrollBlockerNode_=this.document_.createElement("div"),this.scrollBlockerNode_.id="hterm:mouse-drag-scroll-blocker",this.scrollBlockerNode_.style.cssText="position: absolute;top: -99px;display: block;width: 10px;height: 10px;",this.document_.body.appendChild(this.scrollBlockerNode_),this.scrollPort_.onScrollWheel=onMouse,["mousedown","mouseup","mousemove","click","dblclick"].forEach(function(event){this.scrollBlockerNode_.addEventListener(event,onMouse),this.cursorNode_.addEventListener(event,onMouse),this.document_.addEventListener(event,onMouse)}.bind(this)),this.cursorNode_.addEventListener("mousedown",function(){setTimeout(this.focus.bind(this))}.bind(this)),this.setReverseVideo(!1),this.scrollPort_.focus(),this.scrollPort_.scheduleRedraw()},hterm.Terminal.prototype.getDocument=function(){return this.document_},hterm.Terminal.prototype.focus=function(){this.scrollPort_.focus()},hterm.Terminal.prototype.getRowNode=function(index){if(index<this.scrollbackRows_.length)return this.scrollbackRows_[index];var screenIndex=index-this.scrollbackRows_.length;return this.screen_.rowsArray[screenIndex]},hterm.Terminal.prototype.getRowsText=function(start,end){for(var ary=[],i=start;i<end;i++){var node=this.getRowNode(i);ary.push(node.textContent),i<end-1&&!node.getAttribute("line-overflow")&&ary.push("\n")}return ary.join("")},hterm.Terminal.prototype.getRowText=function(index){return this.getRowNode(index).textContent},hterm.Terminal.prototype.getRowCount=function(){return this.scrollbackRows_.length+this.screen_.rowsArray.length},hterm.Terminal.prototype.appendRows_=function(count){for(var cursorRow=this.screen_.rowsArray.length,offset=this.scrollbackRows_.length+cursorRow,i=0;i<count;i++){var row=this.document_.createElement("x-row");row.appendChild(this.document_.createTextNode("")),row.rowIndex=offset+i,this.screen_.pushRow(row)}var extraRows=this.screen_.rowsArray.length-this.screenSize.height;if(0<extraRows){var ary=this.screen_.shiftRows(extraRows);Array.prototype.push.apply(this.scrollbackRows_,ary),this.scrollPort_.isScrolledEnd&&this.scheduleScrollDown_()}cursorRow>=this.screen_.rowsArray.length&&(cursorRow=this.screen_.rowsArray.length-1),this.setAbsoluteCursorPosition(cursorRow,0)},hterm.Terminal.prototype.moveRows_=function(fromIndex,count,toIndex){var start,end,ary=this.screen_.removeRows(fromIndex,count);this.screen_.insertRows(toIndex,ary),end=fromIndex<toIndex?(start=fromIndex,toIndex+count):(start=toIndex,fromIndex+count),this.renumberRows_(start,end),this.scrollPort_.scheduleInvalidate()},hterm.Terminal.prototype.renumberRows_=function(start,end,opt_screen){for(var screen=opt_screen||this.screen_,offset=this.scrollbackRows_.length,i=start;i<end;i++)screen.rowsArray[i].rowIndex=offset+i},hterm.Terminal.prototype.print=function(str){var startOffset=0,strWidth=lib.wc.strWidth(str);for(0==strWidth&&str&&(strWidth=1);startOffset<strWidth;){this.options_.wraparound&&this.screen_.cursorPosition.overflow&&(this.screen_.commitLineOverflow(),this.newLine());var substr,count=strWidth-startOffset,didOverflow=!1;this.screen_.cursorPosition.column+count>=this.screenSize.width&&(didOverflow=!0,count=this.screenSize.width-this.screen_.cursorPosition.column),didOverflow&&!this.options_.wraparound?(substr=lib.wc.substr(str,startOffset,count-1)+lib.wc.substr(str,strWidth-1),count=strWidth):substr=lib.wc.substr(str,startOffset,count);for(var tokens=hterm.TextAttributes.splitWidecharString(substr),i=0;i<tokens.length;i++)this.screen_.textAttributes.wcNode=tokens[i].wcNode,this.screen_.textAttributes.asciiNode=tokens[i].asciiNode,this.options_.insertMode?this.screen_.insertString(tokens[i].str,tokens[i].wcStrWidth):this.screen_.overwriteString(tokens[i].str,tokens[i].wcStrWidth),this.screen_.textAttributes.wcNode=!1,this.screen_.textAttributes.asciiNode=!0;this.screen_.maybeClipCurrentRow(),startOffset+=count}this.scheduleSyncCursorPosition_(),this.scrollOnOutput_&&this.scrollPort_.scrollRowToBottom(this.getRowCount())},hterm.Terminal.prototype.setVTScrollRegion=function(scrollTop,scrollBottom){0==scrollTop&&scrollBottom==this.screenSize.height-1?(this.vtScrollTop_=null,this.vtScrollBottom_=null):(this.vtScrollTop_=scrollTop,this.vtScrollBottom_=scrollBottom)},hterm.Terminal.prototype.getVTScrollTop=function(){return null!=this.vtScrollTop_?this.vtScrollTop_:0},hterm.Terminal.prototype.getVTScrollBottom=function(){return null!=this.vtScrollBottom_?this.vtScrollBottom_:this.screenSize.height-1},hterm.Terminal.prototype.newLine=function(){var cursorAtEndOfScreen=this.screen_.cursorPosition.row==this.screen_.rowsArray.length-1;null!=this.vtScrollBottom_?this.screen_.cursorPosition.row==this.vtScrollBottom_?(this.vtScrollUp(1),this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,0)):cursorAtEndOfScreen?this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,0):this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row+1,0):cursorAtEndOfScreen?this.appendRows_(1):this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row+1,0)},hterm.Terminal.prototype.lineFeed=function(){var column=this.screen_.cursorPosition.column;this.newLine(),this.setCursorColumn(column)},hterm.Terminal.prototype.formFeed=function(){this.options_.autoCarriageReturn?this.newLine():this.lineFeed()},hterm.Terminal.prototype.reverseLineFeed=function(){var scrollTop=this.getVTScrollTop(),currentRow=this.screen_.cursorPosition.row;currentRow==scrollTop?this.insertLines(1):this.setAbsoluteCursorRow(currentRow-1)},hterm.Terminal.prototype.eraseToLeft=function(){var cursor=this.saveCursor();this.setCursorColumn(0);var count=cursor.column+1;this.screen_.overwriteString(lib.f.getWhitespace(count),count),this.restoreCursor(cursor)},hterm.Terminal.prototype.eraseToRight=function(opt_count){if(!this.screen_.cursorPosition.overflow){var maxCount=this.screenSize.width-this.screen_.cursorPosition.column,count=opt_count?Math.min(opt_count,maxCount):maxCount;if(this.screen_.textAttributes.background===this.screen_.textAttributes.DEFAULT_COLOR){var cursorRow=this.screen_.rowsArray[this.screen_.cursorPosition.row];if(hterm.TextAttributes.nodeWidth(cursorRow)<=this.screen_.cursorPosition.column+count)return this.screen_.deleteChars(count),void this.clearCursorOverflow()}var cursor=this.saveCursor();this.screen_.overwriteString(lib.f.getWhitespace(count),count),this.restoreCursor(cursor),this.clearCursorOverflow()}},hterm.Terminal.prototype.eraseLine=function(){var cursor=this.saveCursor();this.screen_.clearCursorRow(),this.restoreCursor(cursor),this.clearCursorOverflow()},hterm.Terminal.prototype.eraseAbove=function(){var cursor=this.saveCursor();this.eraseToLeft();for(var i=0;i<cursor.row;i++)this.setAbsoluteCursorPosition(i,0),this.screen_.clearCursorRow();this.restoreCursor(cursor),this.clearCursorOverflow()},hterm.Terminal.prototype.eraseBelow=function(){var cursor=this.saveCursor();this.eraseToRight();for(var bottom=this.screenSize.height-1,i=cursor.row+1;i<=bottom;i++)this.setAbsoluteCursorPosition(i,0),this.screen_.clearCursorRow();this.restoreCursor(cursor),this.clearCursorOverflow()},hterm.Terminal.prototype.fill=function(ch){var cursor=this.saveCursor();this.setAbsoluteCursorPosition(0,0);for(var row=0;row<this.screenSize.height;row++)for(var col=0;col<this.screenSize.width;col++)this.setAbsoluteCursorPosition(row,col),this.screen_.overwriteString(ch,1);this.restoreCursor(cursor)},hterm.Terminal.prototype.clearHome=function(opt_screen){var screen=opt_screen||this.screen_,bottom=screen.getHeight();if(0!=bottom){for(var i=0;i<bottom;i++)screen.setCursorPosition(i,0),screen.clearCursorRow();screen.setCursorPosition(0,0)}},hterm.Terminal.prototype.clear=function(opt_screen){var screen=opt_screen||this.screen_,cursor=screen.cursorPosition.clone();this.clearHome(screen),screen.setCursorPosition(cursor.row,cursor.column)},hterm.Terminal.prototype.insertLines=function(count){var cursorRow=this.screen_.cursorPosition.row,bottom=this.getVTScrollBottom(),moveCount=bottom-cursorRow-(count=Math.min(count,bottom-cursorRow))+1;moveCount&&this.moveRows_(cursorRow,moveCount,cursorRow+count);for(var i=count-1;0<=i;i--)this.setAbsoluteCursorPosition(cursorRow+i,0),this.screen_.clearCursorRow()},hterm.Terminal.prototype.deleteLines=function(count){var cursor=this.saveCursor(),top=cursor.row,bottom=this.getVTScrollBottom(),maxCount=bottom-top+1,moveStart=bottom-(count=Math.min(count,maxCount))+1;count!=maxCount&&this.moveRows_(top,count,moveStart);for(var i=0;i<count;i++)this.setAbsoluteCursorPosition(moveStart+i,0),this.screen_.clearCursorRow();this.restoreCursor(cursor),this.clearCursorOverflow()},hterm.Terminal.prototype.insertSpace=function(count){var cursor=this.saveCursor(),ws=lib.f.getWhitespace(count||1);this.screen_.insertString(ws,ws.length),this.screen_.maybeClipCurrentRow(),this.restoreCursor(cursor),this.clearCursorOverflow()},hterm.Terminal.prototype.deleteChars=function(count){var deleted=this.screen_.deleteChars(count);if(deleted&&!this.screen_.textAttributes.isDefault()){var cursor=this.saveCursor();this.setCursorColumn(this.screenSize.width-deleted),this.screen_.insertString(lib.f.getWhitespace(deleted)),this.restoreCursor(cursor)}this.clearCursorOverflow()},hterm.Terminal.prototype.vtScrollUp=function(count){var cursor=this.saveCursor();this.setAbsoluteCursorRow(this.getVTScrollTop()),this.deleteLines(count),this.restoreCursor(cursor)},hterm.Terminal.prototype.vtScrollDown=function(opt_count){var cursor=this.saveCursor();this.setAbsoluteCursorPosition(this.getVTScrollTop(),0),this.insertLines(opt_count),this.restoreCursor(cursor)},hterm.Terminal.prototype.setCursorPosition=function(row,column){this.options_.originMode?this.setRelativeCursorPosition(row,column):this.setAbsoluteCursorPosition(row,column)},hterm.Terminal.prototype.setRelativeCursorPosition=function(row,column){var scrollTop=this.getVTScrollTop();row=lib.f.clamp(row+scrollTop,scrollTop,this.getVTScrollBottom()),column=lib.f.clamp(column,0,this.screenSize.width-1),this.screen_.setCursorPosition(row,column)},hterm.Terminal.prototype.setAbsoluteCursorPosition=function(row,column){row=lib.f.clamp(row,0,this.screenSize.height-1),column=lib.f.clamp(column,0,this.screenSize.width-1),this.screen_.setCursorPosition(row,column)},hterm.Terminal.prototype.setCursorColumn=function(column){this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,column)},hterm.Terminal.prototype.getCursorColumn=function(){return this.screen_.cursorPosition.column},hterm.Terminal.prototype.setAbsoluteCursorRow=function(row){this.setAbsoluteCursorPosition(row,this.screen_.cursorPosition.column)},hterm.Terminal.prototype.getCursorRow=function(){return this.screen_.cursorPosition.row},hterm.Terminal.prototype.scheduleRedraw_=function(){if(!this.timeouts_.redraw){var self=this;this.timeouts_.redraw=setTimeout(function(){delete self.timeouts_.redraw,self.scrollPort_.redraw_()},0)}},hterm.Terminal.prototype.scheduleScrollDown_=function(){if(!this.timeouts_.scrollDown){var self=this;this.timeouts_.scrollDown=setTimeout(function(){delete self.timeouts_.scrollDown,self.scrollPort_.scrollRowToBottom(self.getRowCount())},10)}},hterm.Terminal.prototype.cursorUp=function(count){return this.cursorDown(-(count||1))},hterm.Terminal.prototype.cursorDown=function(count){count=count||1;var minHeight=this.options_.originMode?this.getVTScrollTop():0,maxHeight=this.options_.originMode?this.getVTScrollBottom():this.screenSize.height-1,row=lib.f.clamp(this.screen_.cursorPosition.row+count,minHeight,maxHeight);this.setAbsoluteCursorRow(row)},hterm.Terminal.prototype.cursorLeft=function(count){if(!((count=count||1)<1)){var currentColumn=this.screen_.cursorPosition.column;if(this.options_.reverseWraparound){if(this.screen_.cursorPosition.overflow&&(count--,this.clearCursorOverflow(),!count))return;var newRow=this.screen_.cursorPosition.row;(newColumn=currentColumn-count)<0&&((newRow=newRow-Math.floor(count/this.screenSize.width)-1)<0&&(newRow=this.screenSize.height+newRow%this.screenSize.height),newColumn=this.screenSize.width+newColumn%this.screenSize.width),this.setCursorPosition(Math.max(newRow,0),newColumn)}else{var newColumn=Math.max(currentColumn-count,0);this.setCursorColumn(newColumn)}}},hterm.Terminal.prototype.cursorRight=function(count){if(!((count=count||1)<1)){var column=lib.f.clamp(this.screen_.cursorPosition.column+count,0,this.screenSize.width-1);this.setCursorColumn(column)}},hterm.Terminal.prototype.setReverseVideo=function(state){(this.options_.reverseVideo=state)?(this.scrollPort_.setForegroundColor(this.prefs_.get("background-color")),this.scrollPort_.setBackgroundColor(this.prefs_.get("foreground-color"))):(this.scrollPort_.setForegroundColor(this.prefs_.get("foreground-color")),this.scrollPort_.setBackgroundColor(this.prefs_.get("background-color")))},hterm.Terminal.prototype.ringBell=function(){this.cursorNode_.style.backgroundColor=this.scrollPort_.getForegroundColor();var self=this;if(setTimeout(function(){self.restyleCursor_()},200),!this.bellSquelchTimeout_&&(this.bellAudio_.getAttribute("src")?(this.bellAudio_.play(),this.bellSequelchTimeout_=setTimeout(function(){delete this.bellSquelchTimeout_}.bind(this),500)):delete this.bellSquelchTimeout_,this.desktopNotificationBell_&&!this.document_.hasFocus())){var n=hterm.notify();this.bellNotificationList_.push(n),n.onclick=function(){self.closeBellNotifications_()}}},hterm.Terminal.prototype.setOriginMode=function(state){this.options_.originMode=state,this.setCursorPosition(0,0)},hterm.Terminal.prototype.setInsertMode=function(state){this.options_.insertMode=state},hterm.Terminal.prototype.setAutoCarriageReturn=function(state){this.options_.autoCarriageReturn=state},hterm.Terminal.prototype.setWraparound=function(state){this.options_.wraparound=state},hterm.Terminal.prototype.setReverseWraparound=function(state){this.options_.reverseWraparound=state},hterm.Terminal.prototype.setAlternateMode=function(state){var cursor=this.saveCursor();if(this.screen_=state?this.alternateScreen_:this.primaryScreen_,this.screen_.rowsArray.length&&this.screen_.rowsArray[0].rowIndex!=this.scrollbackRows_.length)for(var offset=this.scrollbackRows_.length,ary=this.screen_.rowsArray,i=0;i<ary.length;i++)ary[i].rowIndex=offset+i;this.realizeWidth_(this.screenSize.width),this.realizeHeight_(this.screenSize.height),this.scrollPort_.syncScrollHeight(),this.scrollPort_.invalidate(),this.restoreCursor(cursor),this.scrollPort_.resize()},hterm.Terminal.prototype.setCursorBlink=function(state){!(this.options_.cursorBlink=state)&&this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink),this.options_.cursorVisible&&this.setCursorVisible(!0)},hterm.Terminal.prototype.setCursorVisible=function(state){if(!(this.options_.cursorVisible=state))return this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink),void(this.cursorNode_.style.opacity="0");if(this.syncCursorPosition_(),this.cursorNode_.style.opacity="1",this.options_.cursorBlink){if(this.timeouts_.cursorBlink)return;this.onCursorBlink_()}else this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink)},hterm.Terminal.prototype.syncCursorPosition_=function(){var topRowIndex=this.scrollPort_.getTopRowIndex(),bottomRowIndex=this.scrollPort_.getBottomRowIndex(topRowIndex),cursorRowIndex=this.scrollbackRows_.length+this.screen_.cursorPosition.row;if(bottomRowIndex<cursorRowIndex)this.setCssVar("cursor-offset-row","-1");else{this.options_.cursorVisible&&"none"==this.cursorNode_.style.display&&(this.cursorNode_.style.display=""),this.setCssVar("cursor-offset-row",cursorRowIndex-topRowIndex+" + "+this.scrollPort_.visibleRowTopMargin+"px"),this.setCssVar("cursor-offset-col",this.screen_.cursorPosition.column),this.cursorNode_.setAttribute("title","("+this.screen_.cursorPosition.column+", "+this.screen_.cursorPosition.row+")");var selection=this.document_.getSelection();selection&&selection.isCollapsed&&this.screen_.syncSelectionCaret(selection)}},hterm.Terminal.prototype.restyleCursor_=function(){var shape=this.cursorShape_;"false"==this.cursorNode_.getAttribute("focus")&&(shape=hterm.Terminal.cursorShape.BLOCK);var style=this.cursorNode_.style;switch(shape){case hterm.Terminal.cursorShape.BEAM:style.height="var(--hterm-charsize-height)",style.backgroundColor="transparent",style.borderBottomStyle=null,style.borderLeftStyle="solid";break;case hterm.Terminal.cursorShape.UNDERLINE:style.height=this.scrollPort_.characterSize.baseline+"px",style.backgroundColor="transparent",style.borderBottomStyle="solid",style.borderLeftStyle=null;break;default:style.height="var(--hterm-charsize-height)",style.backgroundColor=this.cursorColor_,style.borderBottomStyle=null,style.borderLeftStyle=null}},hterm.Terminal.prototype.scheduleSyncCursorPosition_=function(){if(!this.timeouts_.syncCursor){var self=this;this.timeouts_.syncCursor=setTimeout(function(){self.syncCursorPosition_(),delete self.timeouts_.syncCursor},0)}},hterm.Terminal.prototype.showZoomWarning_=function(state){if(!this.zoomWarningNode_){if(!state)return;this.zoomWarningNode_=this.document_.createElement("div"),this.zoomWarningNode_.id="hterm:zoom-warning",this.zoomWarningNode_.style.cssText="color: black;background-color: #ff2222;font-size: large;border-radius: 8px;opacity: 0.75;padding: 0.2em 0.5em 0.2em 0.5em;top: 0.5em;right: 1.2em;position: absolute;-webkit-text-size-adjust: none;-webkit-user-select: none;-moz-text-size-adjust: none;-moz-user-select: none;",this.zoomWarningNode_.addEventListener("click",function(e){this.parentNode.removeChild(this)})}this.zoomWarningNode_.textContent=lib.MessageManager.replaceReferences(hterm.zoomWarningMessage,[parseInt(100*this.scrollPort_.characterSize.zoomFactor)]),this.zoomWarningNode_.style.fontFamily=this.prefs_.get("font-family"),state?this.zoomWarningNode_.parentNode||this.div_.parentNode.appendChild(this.zoomWarningNode_):this.zoomWarningNode_.parentNode&&this.zoomWarningNode_.parentNode.removeChild(this.zoomWarningNode_)},hterm.Terminal.prototype.showOverlay=function(msg,opt_timeout){var _this4=this;if(!this.overlayNode_){if(!this.div_)return;this.overlayNode_=this.document_.createElement("div"),this.overlayNode_.style.cssText="border-radius: 15px;font-size: xx-large;opacity: 0.75;padding: 0.2em 0.5em 0.2em 0.5em;position: absolute;-webkit-user-select: none;-webkit-transition: opacity 180ms ease-in;-moz-user-select: none;-moz-transition: opacity 180ms ease-in;",this.overlayNode_.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation()},!0)}this.overlayNode_.style.color=this.prefs_.get("background-color"),this.overlayNode_.style.backgroundColor=this.prefs_.get("foreground-color"),this.overlayNode_.style.fontFamily=this.prefs_.get("font-family"),this.overlayNode_.textContent=msg,this.overlayNode_.style.opacity="0.75",this.overlayNode_.parentNode||this.div_.appendChild(this.overlayNode_);var divSize=hterm.getClientSize(this.div_),overlaySize=hterm.getClientSize(this.overlayNode_);this.overlayNode_.style.top=(divSize.height-overlaySize.height)/2+"px",this.overlayNode_.style.left=(divSize.width-overlaySize.width-this.scrollPort_.currentScrollbarWidthPx)/2+"px",this.overlayTimeout_&&clearTimeout(this.overlayTimeout_),null!==opt_timeout&&(this.overlayTimeout_=setTimeout(function(){_this4.overlayNode_.style.opacity="0",_this4.overlayTimeout_=setTimeout(function(){return _this4.hideOverlay()},200)},opt_timeout||1500))},hterm.Terminal.prototype.hideOverlay=function(){this.overlayTimeout_&&clearTimeout(this.overlayTimeout_),this.overlayTimeout_=null,this.overlayNode_.parentNode&&this.overlayNode_.parentNode.removeChild(this.overlayNode_),this.overlayNode_.style.opacity="0.75"},hterm.Terminal.prototype.paste=function(){return hterm.pasteFromClipboard(this.document_)},hterm.Terminal.prototype.copyStringToClipboard=function(str){this.prefs_.get("enable-clipboard-notice")&&setTimeout(this.showOverlay.bind(this,hterm.notifyCopyMessage,500),200);var copySource=this.document_.createElement("pre");copySource.id="hterm:copy-to-clipboard-source",copySource.textContent=str,copySource.style.cssText="-webkit-user-select: text;-moz-user-select: text;position: absolute;top: -99px",this.document_.body.appendChild(copySource);var selection=this.document_.getSelection(),anchorNode=selection.anchorNode,anchorOffset=selection.anchorOffset,focusNode=selection.focusNode,focusOffset=selection.focusOffset;selection.selectAllChildren(copySource),hterm.copySelectionToClipboard(this.document_),selection.extend&&(selection.collapse(anchorNode,anchorOffset),selection.extend(focusNode,focusOffset)),copySource.parentNode.removeChild(copySource)},hterm.Terminal.prototype.getSelectionText=function(){var selection=this.scrollPort_.selection;if(selection.sync(),selection.isCollapsed)return null;var startOffset=selection.startOffset,node=selection.startNode;if("X-ROW"!=node.nodeName)for("#text"==node.nodeName&&"SPAN"==node.parentNode.nodeName&&(node=node.parentNode);node.previousSibling;)node=node.previousSibling,startOffset+=hterm.TextAttributes.nodeWidth(node);var endOffset=hterm.TextAttributes.nodeWidth(selection.endNode)-selection.endOffset;if("X-ROW"!=(node=selection.endNode).nodeName)for("#text"==node.nodeName&&"SPAN"==node.parentNode.nodeName&&(node=node.parentNode);node.nextSibling;)node=node.nextSibling,endOffset+=hterm.TextAttributes.nodeWidth(node);var rv=this.getRowsText(selection.startRow.rowIndex,selection.endRow.rowIndex+1);return lib.wc.substring(rv,startOffset,lib.wc.strWidth(rv)-endOffset)},hterm.Terminal.prototype.copySelectionToClipboard=function(){var text=this.getSelectionText();null!=text&&this.copyStringToClipboard(text)},hterm.Terminal.prototype.overlaySize=function(){this.showOverlay(this.screenSize.width+"x"+this.screenSize.height)},hterm.Terminal.prototype.onVTKeystroke=function(string){this.scrollOnKeystroke_&&this.scrollPort_.scrollRowToBottom(this.getRowCount()),this.io.onVTKeystroke(this.keyboard.encode(string))},hterm.Terminal.prototype.openUrl=function(url){window.chrome&&window.chrome.browser?chrome.browser.openTab({url:url}):window.open(url,"_blank").focus()},hterm.Terminal.prototype.openSelectedUrl_=function(){var str=this.getSelectionText();if((null!=str||(this.screen_.expandSelection(this.document_.getSelection()),null!=(str=this.getSelectionText())))&&!(2048<str.length||0<=str.search(/[\s\[\](){}<>"'\\^`]/))){if(str.search("^[a-zA-Z][a-zA-Z0-9+.-]*://")<0)switch(str.split(":",1)[0]){case"mailto":break;default:str="http://"+str}this.openUrl(str)}},hterm.Terminal.prototype.onMouse_=function(e){if(!e.processedByTerminalHandler_){var reportMouseEvents=!this.defeatMouseReports_&&this.vt.mouseReport!=this.vt.MOUSE_REPORT_DISABLED;if(e.processedByTerminalHandler_=!0,e.terminalRow=parseInt((e.clientY-this.scrollPort_.visibleRowTopMargin)/this.scrollPort_.characterSize.height)+1,e.terminalColumn=parseInt(e.clientX/this.scrollPort_.characterSize.width)+1,!("mousedown"==e.type&&e.terminalColumn>this.screenSize.width)){if(this.options_.cursorVisible&&!reportMouseEvents&&(e.terminalRow-1==this.screen_.cursorPosition.row&&e.terminalColumn-1==this.screen_.cursorPosition.column?this.cursorNode_.style.display="none":"none"==this.cursorNode_.style.display&&(this.cursorNode_.style.display="")),"mousedown"==e.type&&(e.altKey||!reportMouseEvents?(this.defeatMouseReports_=!0,this.setSelectionEnabled(!0)):(this.defeatMouseReports_=!1,this.document_.getSelection().collapseToEnd(),this.setSelectionEnabled(!1),e.preventDefault())),reportMouseEvents)this.scrollBlockerNode_.engaged||("mousedown"==e.type?(this.scrollBlockerNode_.engaged=!0,this.scrollBlockerNode_.style.top=e.clientY-5+"px",this.scrollBlockerNode_.style.left=e.clientX-5+"px"):"mousemove"==e.type&&(this.document_.getSelection().collapseToEnd(),e.preventDefault())),this.onMouse(e);else{if("dblclick"==e.type&&this.copyOnSelect&&(this.screen_.expandSelection(this.document_.getSelection()),this.copySelectionToClipboard(this.document_)),"click"==e.type&&!e.shiftKey&&(e.ctrlKey||e.metaKey))return clearTimeout(this.timeouts_.openUrl),void(this.timeouts_.openUrl=setTimeout(this.openSelectedUrl_.bind(this),500));if("mousedown"==e.type&&(this.mouseRightClickPaste&&2==e.button||e.button==this.mousePasteButton)&&(this.paste()||console.warn("Could not paste manually due to web restrictions")),"mouseup"==e.type&&0==e.button&&this.copyOnSelect&&!this.document_.getSelection().isCollapsed&&this.copySelectionToClipboard(this.document_),"mousemove"!=e.type&&"mouseup"!=e.type||!this.scrollBlockerNode_.engaged||(this.scrollBlockerNode_.engaged=!1,this.scrollBlockerNode_.style.top="-99px"),this.scrollWheelArrowKeys_&&!e.shiftKey&&this.keyboard.applicationCursor&&!this.isPrimaryScreen()&&"wheel"==e.type){var delta=this.scrollPort_.scrollWheelDelta(e),lines=lib.f.smartFloorDivide(Math.abs(delta),this.scrollPort_.characterSize.height),data="O"+(delta<0?"B":"A");this.io.sendString(data.repeat(lines)),e.preventDefault()}}"mouseup"==e.type&&this.document_.getSelection().isCollapsed&&(this.defeatMouseReports_=!1)}}},hterm.Terminal.prototype.onMouse=function(e){},hterm.Terminal.prototype.onFocusChange_=function(focused){this.cursorNode_.setAttribute("focus",focused),this.restyleCursor_(),this.reportFocus&&this.io.sendString(!0===focused?"[I":"[O"),!0===focused&&this.closeBellNotifications_()},hterm.Terminal.prototype.onScroll_=function(){this.scheduleSyncCursorPosition_()},hterm.Terminal.prototype.onPaste_=function(e){var data=e.text.replace(/\n/gm,"\r");data=this.keyboard.encode(data),this.options_.bracketedPaste&&(data="[200~"+data+"[201~"),this.io.sendString(data)},hterm.Terminal.prototype.onCopy_=function(e){this.useDefaultWindowCopy||(e.preventDefault(),setTimeout(this.copySelectionToClipboard.bind(this),0))},hterm.Terminal.prototype.onResize_=function(){var columnCount=Math.floor(this.scrollPort_.getScreenWidth()/this.scrollPort_.characterSize.width)||0,rowCount=lib.f.smartFloorDivide(this.scrollPort_.getScreenHeight(),this.scrollPort_.characterSize.height)||0;if(!(columnCount<=0||rowCount<=0)){var isNewSize=columnCount!=this.screenSize.width||rowCount!=this.screenSize.height;this.realizeSize_(columnCount,rowCount),this.showZoomWarning_(1!=this.scrollPort_.characterSize.zoomFactor),isNewSize&&this.overlaySize(),this.restyleCursor_(),this.scheduleSyncCursorPosition_()}},hterm.Terminal.prototype.onCursorBlink_=function(){this.options_.cursorBlink?"false"==this.cursorNode_.getAttribute("focus")||"0"==this.cursorNode_.style.opacity?(this.cursorNode_.style.opacity="1",this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[0])):(this.cursorNode_.style.opacity="0",this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[1])):delete this.timeouts_.cursorBlink},hterm.Terminal.prototype.setScrollbarVisible=function(state){this.scrollPort_.setScrollbarVisible(state)},hterm.Terminal.prototype.setScrollWheelMoveMultipler=function(multiplier){this.scrollPort_.setScrollWheelMoveMultipler(multiplier)},hterm.Terminal.prototype.closeBellNotifications_=function(){this.bellNotificationList_.forEach(function(n){n.close()}),this.bellNotificationList_.length=0},lib.rtdep("lib.encodeUTF8"),hterm.Terminal.IO=function(terminal){this.terminal_=terminal,this.previousIO_=null,this.buffered_=""},hterm.Terminal.IO.prototype.showOverlay=function(message,opt_timeout){this.terminal_.showOverlay(message,opt_timeout)},hterm.Terminal.IO.prototype.hideOverlay=function(){this.terminal_.hideOverlay()},hterm.Terminal.IO.prototype.createFrame=function(url,opt_options){return new hterm.Frame(this.terminal_,url,opt_options)},hterm.Terminal.IO.prototype.setTerminalProfile=function(profileName){this.terminal_.setProfile(profileName)},hterm.Terminal.IO.prototype.push=function(){var io=new hterm.Terminal.IO(this.terminal_);return io.keyboardCaptured_=this.keyboardCaptured_,io.columnCount=this.columnCount,io.rowCount=this.rowCount,io.previousIO_=this.terminal_.io,this.terminal_.io=io},hterm.Terminal.IO.prototype.pop=function(){this.terminal_.io=this.previousIO_,this.previousIO_.flush()},hterm.Terminal.IO.prototype.flush=function(){this.buffered_&&(this.terminal_.interpret(this.buffered_),this.buffered_="")},hterm.Terminal.IO.prototype.sendString=function(string){console.log("Unhandled sendString: "+string)},hterm.Terminal.IO.prototype.onVTKeystroke=function(string){console.log("Unobserverd VT keystroke: "+JSON.stringify(string))},hterm.Terminal.IO.prototype.onTerminalResize_=function(width,height){for(var obj=this;obj;)obj.columnCount=width,obj.rowCount=height,obj=obj.previousIO_;this.onTerminalResize(width,height)},hterm.Terminal.IO.prototype.onTerminalResize=function(width,height){},hterm.Terminal.IO.prototype.writeUTF8=function(string){this.terminal_.io==this?this.terminal_.interpret(string):this.buffered_+=string},hterm.Terminal.IO.prototype.writelnUTF8=function(string){this.writeUTF8(string+"\r\n")},hterm.Terminal.IO.prototype.print=hterm.Terminal.IO.prototype.writeUTF16=function(string){this.writeUTF8(lib.encodeUTF8(string))},hterm.Terminal.IO.prototype.println=hterm.Terminal.IO.prototype.writelnUTF16=function(string){this.writelnUTF8(lib.encodeUTF8(string))},lib.rtdep("lib.colors"),hterm.TextAttributes=function(document){this.document_=document,this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.defaultForeground="rgb(255, 255, 255)",this.defaultBackground="rgb(0, 0, 0)",this.bold=!1,this.faint=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.strikethrough=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1,this.asciiNode=!0,this.tileData=null,this.colorPalette=null,this.resetColorPalette()},hterm.TextAttributes.prototype.enableBold=!0,hterm.TextAttributes.prototype.enableBoldAsBright=!0,hterm.TextAttributes.prototype.DEFAULT_COLOR=lib.f.createEnum(""),hterm.TextAttributes.prototype.SRC_DEFAULT="default",hterm.TextAttributes.prototype.SRC_RGB="rgb",hterm.TextAttributes.prototype.setDocument=function(document){this.document_=document},hterm.TextAttributes.prototype.clone=function(){var rv=new hterm.TextAttributes(null);for(var key in this)rv[key]=this[key];return rv.colorPalette=this.colorPalette.concat(),rv},hterm.TextAttributes.prototype.reset=function(){this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.bold=!1,this.faint=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.strikethrough=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1,this.asciiNode=!0},hterm.TextAttributes.prototype.resetColorPalette=function(){this.colorPalette=lib.colors.colorPalette.concat(),this.syncColors()},hterm.TextAttributes.prototype.isDefault=function(){return this.foregroundSource==this.SRC_DEFAULT&&this.backgroundSource==this.SRC_DEFAULT&&!this.bold&&!this.faint&&!this.italic&&!this.blink&&!this.underline&&!this.strikethrough&&!this.inverse&&!this.invisible&&!this.wcNode&&this.asciiNode&&null==this.tileData},hterm.TextAttributes.prototype.createContainer=function(opt_textContent){if(this.isDefault()){var node=this.document_.createTextNode(opt_textContent);return node.asciiNode=!0,node}var span=this.document_.createElement("span"),style=span.style,classes=[];this.foreground!=this.DEFAULT_COLOR&&(style.color=this.foreground),this.background!=this.DEFAULT_COLOR&&(style.backgroundColor=this.background),this.enableBold&&this.bold&&(style.fontWeight="bold"),this.faint&&(span.faint=!0),this.italic&&(style.fontStyle="italic"),this.blink&&(classes.push("blink-node"),span.blinkNode=!0);var textDecoration="";return this.underline&&(textDecoration+=" underline",span.underline=!0),this.strikethrough&&(textDecoration+=" line-through",span.strikethrough=!0),textDecoration&&(style.textDecoration=textDecoration),this.wcNode&&(classes.push("wc-node"),span.wcNode=!0),span.asciiNode=this.asciiNode,null!=this.tileData&&(classes.push("tile"),classes.push("tile_"+this.tileData),span.tileNode=!0),opt_textContent&&(span.textContent=opt_textContent),classes.length&&(span.className=classes.join(" ")),span},hterm.TextAttributes.prototype.matchesContainer=function(obj){if("string"==typeof obj||obj.nodeType==Node.TEXT_NODE)return this.isDefault();var style=obj.style;return!(this.wcNode||obj.wcNode||this.asciiNode!=obj.asciiNode||null!=this.tileData||obj.tileNode||this.foreground!=style.color||this.background!=style.backgroundColor||(this.enableBold&&this.bold)!=!!style.fontWeight||this.blink!=!!obj.blinkNode||this.italic!=!!style.fontStyle||!!this.underline!=!!obj.underline||!!this.strikethrough!=!!obj.strikethrough)},hterm.TextAttributes.prototype.setDefaults=function(foreground,background){this.defaultForeground=foreground,this.defaultBackground=background,this.syncColors()},hterm.TextAttributes.prototype.syncColors=function(){var foregroundSource=this.foregroundSource,backgroundSource=this.backgroundSource,defaultForeground=this.DEFAULT_COLOR,defaultBackground=this.DEFAULT_COLOR;if(this.inverse&&(foregroundSource=this.backgroundSource,backgroundSource=this.foregroundSource,defaultForeground=this.defaultBackground,defaultBackground=this.defaultForeground),this.enableBoldAsBright&&this.bold&&foregroundSource!=this.SRC_DEFAULT&&foregroundSource!=this.SRC_RGB&&(foregroundSource=function getBrightIndex(i){return i<8?i+8:i}(foregroundSource)),this.invisible&&(foregroundSource=backgroundSource,defaultForeground=this.defaultBackground),foregroundSource!=this.SRC_RGB&&(this.foreground=foregroundSource==this.SRC_DEFAULT?defaultForeground:this.colorPalette[foregroundSource]),this.faint&&!this.invisible){var colorToMakeFaint=this.foreground==this.DEFAULT_COLOR?this.defaultForeground:this.foreground;this.foreground=lib.colors.mix(colorToMakeFaint,"rgb(0, 0, 0)",.3333)}backgroundSource!=this.SRC_RGB&&(this.background=backgroundSource==this.SRC_DEFAULT?defaultBackground:this.colorPalette[backgroundSource])},hterm.TextAttributes.containersMatch=function(obj1,obj2){if("string"==typeof obj1)return hterm.TextAttributes.containerIsDefault(obj2);if(obj1.nodeType!=obj2.nodeType)return!1;if(obj1.nodeType==Node.TEXT_NODE)return!0;var style1=obj1.style,style2=obj2.style;return style1.color==style2.color&&style1.backgroundColor==style2.backgroundColor&&style1.fontWeight==style2.fontWeight&&style1.fontStyle==style2.fontStyle&&style1.textDecoration==style2.textDecoration},hterm.TextAttributes.containerIsDefault=function(obj){return"string"==typeof obj||obj.nodeType==Node.TEXT_NODE},hterm.TextAttributes.nodeWidth=function(node){return node.asciiNode?node.textContent.length:lib.wc.strWidth(node.textContent)},hterm.TextAttributes.nodeSubstr=function(node,start,width){return node.asciiNode?node.textContent.substr(start,width):lib.wc.substr(node.textContent,start,width)},hterm.TextAttributes.nodeSubstring=function(node,start,end){return node.asciiNode?node.textContent.substring(start,end):lib.wc.substring(node.textContent,start,end)},hterm.TextAttributes.splitWidecharString=function(str){for(var wcCharWidth,rv=[],base=0,length=0,wcStrWidth=0,asciiNode=!0,i=0;i<str.length;){var increment,c=str.codePointAt(i);c<128?(wcStrWidth+=1,length+=1,increment=1):(increment=c<=65535?1:2,(wcCharWidth=lib.wc.charWidth(c))<=1?(wcStrWidth+=wcCharWidth,length+=increment,asciiNode=!1):(length&&(rv.push({str:str.substr(base,length),asciiNode:asciiNode,wcStrWidth:wcStrWidth}),asciiNode=!0,wcStrWidth=0),rv.push({str:str.substr(i,increment),wcNode:!0,asciiNode:!1,wcStrWidth:2}),base=i+increment,length=0)),i+=increment}return length&&rv.push({str:str.substr(base,length),asciiNode:asciiNode,wcStrWidth:wcStrWidth}),rv},lib.rtdep("lib.colors","lib.f","lib.UTF8Decoder","hterm.VT.CharacterMap"),hterm.VT=function(terminal){(this.terminal=terminal).onMouse=this.onTerminalMouse_.bind(this),this.mouseReport=this.MOUSE_REPORT_DISABLED,this.parseState_=new hterm.VT.ParseState(this.parseUnknown_),this.leadingModifier_="",this.trailingModifier_="",this.allowColumnWidthChanges_=!1,this.oscTimeLimit_=2e4,this.utf8Decoder_=new lib.UTF8Decoder,this.enable8BitControl=!1,this.enableClipboardWrite=!0,this.enableDec12=!1,this.characterEncoding="utf-8",this.maxStringSequence=1024,this.warnUnimplemented=!1,this.characterMaps=new hterm.VT.CharacterMaps,this.G0=this.G1=this.G2=this.G3=this.characterMaps.getMap("B"),this.GL="G0",this.GR="G0",this.codingSystemUtf8_=!1,this.codingSystemLocked_=!1,this.cc1Pattern_=null,this.updateEncodingState_(),this.savedState_=new hterm.VT.CursorState(this)},hterm.VT.prototype.MOUSE_REPORT_DISABLED=0,hterm.VT.prototype.MOUSE_REPORT_CLICK=1,hterm.VT.prototype.MOUSE_REPORT_DRAG=3,hterm.VT.ParseState=function(defaultFunction,opt_buf){this.defaultFunction=defaultFunction,this.buf=opt_buf||null,this.pos=0,this.func=defaultFunction,this.args=[]},hterm.VT.ParseState.prototype.reset=function(opt_buf){this.resetParseFunction(),this.resetBuf(opt_buf||""),this.resetArguments()},hterm.VT.ParseState.prototype.resetParseFunction=function(){this.func=this.defaultFunction},hterm.VT.ParseState.prototype.resetBuf=function(opt_buf){this.buf="string"==typeof opt_buf?opt_buf:null,this.pos=0},hterm.VT.ParseState.prototype.resetArguments=function(opt_arg_zero){void(this.args.length=0)!==opt_arg_zero&&(this.args[0]=opt_arg_zero)},hterm.VT.ParseState.prototype.iarg=function(argnum,defaultValue){var str=this.args[argnum];if(str){var ret=parseInt(str,10);return 0==ret&&(ret=defaultValue),ret}return defaultValue},hterm.VT.ParseState.prototype.advance=function(count){this.pos+=count},hterm.VT.ParseState.prototype.peekRemainingBuf=function(){return this.buf.substr(this.pos)},hterm.VT.ParseState.prototype.peekChar=function(){return this.buf.substr(this.pos,1)},hterm.VT.ParseState.prototype.consumeChar=function(){return this.buf.substr(this.pos++,1)},hterm.VT.ParseState.prototype.isComplete=function(){return null==this.buf||this.buf.length<=this.pos},hterm.VT.CursorState=function(vt){this.vt_=vt,this.save()},hterm.VT.CursorState.prototype.save=function(){this.cursor=this.vt_.terminal.saveCursor(),this.textAttributes=this.vt_.terminal.getTextAttributes().clone(),this.GL=this.vt_.GL,this.GR=this.vt_.GR,this.G0=this.vt_.G0,this.G1=this.vt_.G1,this.G2=this.vt_.G2,this.G3=this.vt_.G3},hterm.VT.CursorState.prototype.restore=function(){this.vt_.terminal.restoreCursor(this.cursor),this.vt_.terminal.setTextAttributes(this.textAttributes.clone()),this.vt_.GL=this.GL,this.vt_.GR=this.GR,this.vt_.G0=this.G0,this.vt_.G1=this.G1,this.vt_.G2=this.G2,this.vt_.G3=this.G3},hterm.VT.prototype.reset=function(){this.G0=this.characterMaps.getMap("B"),this.G1=this.characterMaps.getMap("0"),this.G2=this.characterMaps.getMap("B"),this.G3=this.characterMaps.getMap("B"),this.GL="G0",this.GR="G0",this.savedState_=new hterm.VT.CursorState(this),this.mouseReport=this.MOUSE_REPORT_DISABLED},hterm.VT.prototype.onTerminalMouse_=function(e){if(this.mouseReport!=this.MOUSE_REPORT_DISABLED){var response,mod=0;e.shiftKey&&(mod|=4),(e.metaKey||this.terminal.keyboard.altIsMeta&&e.altKey)&&(mod|=8),e.ctrlKey&&(mod|=16);var x=String.fromCharCode(lib.f.clamp(e.terminalColumn+32,32,255)),y=String.fromCharCode(lib.f.clamp(e.terminalRow+32,32,255));switch(e.type){case"wheel":b=96+(0<-1*e.deltaY?0:1),b|=mod,response="[M"+String.fromCharCode(b)+x+y,e.preventDefault();break;case"mousedown":var b=Math.min(e.button,2)+32;b|=mod,response="[M"+String.fromCharCode(b)+x+y;break;case"mouseup":response="[M#"+x+y;break;case"mousemove":this.mouseReport==this.MOUSE_REPORT_DRAG&&e.buttons&&(b=32,1&e.buttons?b+=0:4&e.buttons?b+=1:2&e.buttons?b+=2:b+=3,b+=32,b|=mod,response="[M"+String.fromCharCode(b)+x+y);break;case"click":case"dblclick":break;default:console.error("Unknown mouse event: "+e.type,e)}response&&this.terminal.io.sendString(response)}},hterm.VT.prototype.interpret=function(buf){for(this.parseState_.resetBuf(this.decode(buf));!this.parseState_.isComplete();){var func=this.parseState_.func,pos=this.parseState_.pos;buf=this.parseState_.buf;if(this.parseState_.func.call(this,this.parseState_),this.parseState_.func==func&&this.parseState_.pos==pos&&this.parseState_.buf==buf)throw"Parser did not alter the state!"}},hterm.VT.prototype.decode=function(str){return"utf-8"==this.characterEncoding?this.decodeUTF8(str):str},hterm.VT.prototype.encodeUTF8=function(str){return lib.encodeUTF8(str)},hterm.VT.prototype.decodeUTF8=function(str){return this.utf8Decoder_.decode(str)},hterm.VT.prototype.setEncoding=function(encoding){switch(encoding){default:console.warn('Invalid value for "terminal-encoding": '+encoding);case"iso-2022":this.codingSystemUtf8_=!1,this.codingSystemLocked_=!1;break;case"utf-8-locked":this.codingSystemUtf8_=!0,this.codingSystemLocked_=!0;break;case"utf-8":this.codingSystemUtf8_=!0,this.codingSystemLocked_=!1}this.updateEncodingState_()},hterm.VT.prototype.updateEncodingState_=function(){var _this5=this,cc1=Object.keys(hterm.VT.CC1).filter(function(e){return!_this5.codingSystemUtf8_||e.charCodeAt()<128}).map(function(e){return"\\x"+lib.f.zpad(e.charCodeAt().toString(16),2)}).join("");this.cc1Pattern_=new RegExp("["+cc1+"]")},hterm.VT.prototype.parseUnknown_=function(parseState){var self=this;function print(str){!self.codingSystemUtf8_&&self[self.GL].GL&&(str=self[self.GL].GL(str)),self.terminal.print(str)}var buf=parseState.peekRemainingBuf(),nextControl=buf.search(this.cc1Pattern_);return 0==nextControl?(this.dispatch("CC1",buf.substr(0,1),parseState),void parseState.advance(1)):-1==nextControl?(print(buf),void parseState.reset()):(print(buf.substr(0,nextControl)),this.dispatch("CC1",buf.substr(nextControl,1),parseState),void parseState.advance(nextControl+1))},hterm.VT.prototype.parseCSI_=function(parseState){var ch=parseState.peekChar(),args=parseState.args;"@"<=ch&&ch<="~"?(this.dispatch("CSI",this.leadingModifier_+this.trailingModifier_+ch,parseState),parseState.resetParseFunction()):";"==ch?this.trailingModifier_?parseState.resetParseFunction():(args.length||args.push(""),args.push("")):"0"<=ch&&ch<="9"?this.trailingModifier_?parseState.resetParseFunction():args.length?args[args.length-1]+=ch:args[0]=ch:" "<=ch&&ch<="?"&&":"!=ch?args.length?this.trailingModifier_+=ch:this.leadingModifier_+=ch:this.cc1Pattern_.test(ch)?this.dispatch("CC1",ch,parseState):parseState.resetParseFunction(),parseState.advance(1)},hterm.VT.prototype.parseUntilStringTerminator_=function(parseState){var buf=parseState.peekRemainingBuf(),args=parseState.args,bufInserted=0;args.length?""==args[0].slice(-1)&&(args[0]=args[0].slice(0,-1),buf=""+buf,bufInserted=1):(args[0]="",args[1]=new Date);var abortReason,nextTerminator=buf.search(/[\x1b\x07]/),terminator=buf[nextTerminator];return(""!=terminator||"\\"==buf[nextTerminator+1])&&-1!=nextTerminator?args[0].length+nextTerminator>this.maxStringSequence?(parseState.reset(args[0]+buf),!1):(args[0]+=buf.substr(0,nextTerminator),parseState.resetParseFunction(),parseState.advance(nextTerminator+(""==terminator?2:1)-bufInserted),!0):(args[0]+=buf,args[0].length>this.maxStringSequence&&(abortReason="too long: "+args[0].length),""==terminator&&nextTerminator!=buf.length-1&&(abortReason="embedded escape: "+nextTerminator),new Date-args[1]>this.oscTimeLimit_&&(abortReason="timeout expired: "+(new Date-args[1])),abortReason?(this.warnUnimplemented&&console.log("parseUntilStringTerminator_: aborting: "+abortReason,args[0]),parseState.reset(args[0]),!1):(parseState.advance(buf.length-bufInserted),!0))},hterm.VT.prototype.dispatch=function(type,code,parseState){var handler=hterm.VT[type][code];handler?handler!=hterm.VT.ignore?"CC1"==type&&""<code&&!this.enable8BitControl?console.warn("Ignoring 8-bit control code: 0x"+code.charCodeAt(0).toString(16)):handler.apply(this,[parseState,code]):this.warnUnimplemented&&console.warn("Ignored "+type+" code: "+JSON.stringify(code)):this.warnUnimplemented&&console.warn("Unknown "+type+" code: "+JSON.stringify(code))},hterm.VT.prototype.setANSIMode=function(code,state){4==code?this.terminal.setInsertMode(state):20==code?this.terminal.setAutoCarriageReturn(state):this.warnUnimplemented&&console.warn("Unimplemented ANSI Mode: "+code)},hterm.VT.prototype.setDECMode=function(code,state){switch(parseInt(code,10)){case 1:this.terminal.keyboard.applicationCursor=state;break;case 3:this.allowColumnWidthChanges_&&(this.terminal.setWidth(state?132:80),this.terminal.clearHome(),this.terminal.setVTScrollRegion(null,null));break;case 5:this.terminal.setReverseVideo(state);break;case 6:this.terminal.setOriginMode(state);break;case 7:this.terminal.setWraparound(state);break;case 12:this.enableDec12&&this.terminal.setCursorBlink(state);break;case 25:this.terminal.setCursorVisible(state);break;case 30:this.terminal.setScrollbarVisible(state);break;case 40:this.terminal.allowColumnWidthChanges_=state;break;case 45:this.terminal.setReverseWraparound(state);break;case 67:this.terminal.keyboard.backspaceSendsBackspace=state;break;case 1e3:this.mouseReport=state?this.MOUSE_REPORT_CLICK:this.MOUSE_REPORT_DISABLED,this.terminal.syncMouseStyle();break;case 1002:this.mouseReport=state?this.MOUSE_REPORT_DRAG:this.MOUSE_REPORT_DISABLED,this.terminal.syncMouseStyle();break;case 1004:this.terminal.reportFocus=state;break;case 1010:this.terminal.scrollOnOutput=state;break;case 1011:this.terminal.scrollOnKeystroke=state;break;case 1036:this.terminal.keyboard.metaSendsEscape=state;break;case 1039:state?this.terminal.keyboard.previousAltSendsWhat_||(this.terminal.keyboard.previousAltSendsWhat_=this.terminal.keyboard.altSendsWhat,this.terminal.keyboard.altSendsWhat="escape"):this.terminal.keyboard.previousAltSendsWhat_&&(this.terminal.keyboard.altSendsWhat=this.terminal.keyboard.previousAltSendsWhat_,this.terminal.keyboard.previousAltSendsWhat_=null);break;case 47:case 1047:this.terminal.setAlternateMode(state);break;case 1048:this.savedState_.save();case 1049:state?(this.savedState_.save(),this.terminal.setAlternateMode(state),this.terminal.clear()):(this.terminal.setAlternateMode(state),this.savedState_.restore());break;case 2004:this.terminal.setBracketedPaste(state);break;default:this.warnUnimplemented&&console.warn("Unimplemented DEC Private Mode: "+code)}},hterm.VT.ignore=function(){},hterm.VT.CC1={},hterm.VT.ESC={},hterm.VT.CSI={},hterm.VT.OSC={},hterm.VT.VT52={},hterm.VT.CC1["\0"]=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ignore,hterm.VT.CC1[""]=function(){this.terminal.ringBell()},hterm.VT.CC1["\b"]=function(){this.terminal.cursorLeft(1)},hterm.VT.CC1["\t"]=function(){this.terminal.forwardTabStop()},hterm.VT.CC1["\n"]=function(){this.terminal.formFeed()},hterm.VT.CC1["\v"]=hterm.VT.CC1["\n"],hterm.VT.CC1["\f"]=hterm.VT.CC1["\n"],hterm.VT.CC1["\r"]=function(){this.terminal.setCursorColumn(0)},hterm.VT.CC1[""]=function(){this.GL="G1"},hterm.VT.CC1[""]=function(){this.GL="G0"},hterm.VT.CC1[""]=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ignore,hterm.VT.CC1[""]=function(parseState){"G1"==this.GL&&(this.GL="G0"),parseState.resetParseFunction(),this.terminal.print("?")},hterm.VT.CC1[""]=hterm.VT.CC1[""],hterm.VT.CC1[""]=function(parseState){parseState.func=function parseESC(parseState){var ch=parseState.consumeChar();""!=ch&&(this.dispatch("ESC",ch,parseState),parseState.func==parseESC&&parseState.resetParseFunction())}},hterm.VT.CC1[""]=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.D=function(){this.terminal.lineFeed()},hterm.VT.CC1[""]=hterm.VT.ESC.E=function(){this.terminal.setCursorColumn(0),this.terminal.cursorDown(1)},hterm.VT.CC1[""]=hterm.VT.ESC.H=function(){this.terminal.setTabStop(this.terminal.getCursorColumn())},hterm.VT.CC1[""]=hterm.VT.ESC.M=function(){this.terminal.reverseLineFeed()},hterm.VT.CC1[""]=hterm.VT.ESC.N=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.O=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.P=function(parseState){parseState.resetArguments(),parseState.func=this.parseUntilStringTerminator_},hterm.VT.CC1[""]=hterm.VT.ESC.V=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.W=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.X=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.Z=function(){this.terminal.io.sendString("[?1;2c")},hterm.VT.CC1[""]=hterm.VT.ESC["["]=function(parseState){parseState.resetArguments(),this.leadingModifier_="",this.trailingModifier_="",parseState.func=this.parseCSI_},hterm.VT.CC1[""]=hterm.VT.ESC["\\"]=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC["]"]=function(parseState){parseState.resetArguments(),parseState.func=function parseOSC(parseState){if(this.parseUntilStringTerminator_(parseState)&&parseState.func!=parseOSC){var ary=parseState.args[0].match(/^(\d+);(.*)$/);ary?(parseState.args[0]=ary[2],this.dispatch("OSC",ary[1],parseState)):console.warn("Invalid OSC: "+JSON.stringify(parseState.args[0]))}}},hterm.VT.CC1[""]=hterm.VT.ESC["^"]=function(parseState){parseState.resetArguments(),parseState.func=this.parseUntilStringTerminator_},hterm.VT.CC1[""]=hterm.VT.ESC._=function(parseState){parseState.resetArguments(),parseState.func=this.parseUntilStringTerminator_},hterm.VT.ESC[" "]=function(parseState){parseState.func=function(parseState){var ch=parseState.consumeChar();this.warnUnimplemented&&console.warn("Unimplemented sequence: ESC 0x20 "+ch),parseState.resetParseFunction()}},hterm.VT.ESC["#"]=function(parseState){parseState.func=function(parseState){"8"==parseState.consumeChar()&&this.terminal.fill("E"),parseState.resetParseFunction()}},hterm.VT.ESC["%"]=function(parseState){parseState.func=function(parseState){var ch=parseState.consumeChar();if(this.codingSystemLocked_)return"/"==ch&&parseState.consumeChar(),void parseState.resetParseFunction();switch(ch){case"@":this.setEncoding("iso-2022");break;case"G":this.setEncoding("utf-8");break;case"/":switch(ch=parseState.consumeChar()){case"G":case"H":case"I":this.setEncoding("utf-8-locked");break;default:this.warnUnimplemented&&console.warn("Unknown ESC % / argument: "+JSON.stringify(ch))}break;default:this.warnUnimplemented&&console.warn("Unknown ESC % argument: "+JSON.stringify(ch))}parseState.resetParseFunction()}},hterm.VT.ESC["("]=hterm.VT.ESC[")"]=hterm.VT.ESC["*"]=hterm.VT.ESC["+"]=hterm.VT.ESC["-"]=hterm.VT.ESC["."]=hterm.VT.ESC["/"]=function(parseState,code){parseState.func=function(parseState){var ch=parseState.consumeChar();if(""==ch)return parseState.resetParseFunction(),void parseState.func();var map=this.characterMaps.getMap(ch);void 0!==map?"("==code?this.G0=map:")"==code||"-"==code?this.G1=map:"*"==code||"."==code?this.G2=map:"+"!=code&&"/"!=code||(this.G3=map):this.warnUnimplemented&&console.log('Invalid character set for "'+code+'": '+ch),parseState.resetParseFunction()}},hterm.VT.ESC[6]=hterm.VT.ignore,hterm.VT.ESC[7]=function(){this.savedState_.save()},hterm.VT.ESC[8]=function(){this.savedState_.restore()},hterm.VT.ESC[9]=hterm.VT.ignore,hterm.VT.ESC["="]=function(){this.terminal.keyboard.applicationKeypad=!0},hterm.VT.ESC[">"]=function(){this.terminal.keyboard.applicationKeypad=!1},hterm.VT.ESC.F=hterm.VT.ignore,hterm.VT.ESC.c=function(){this.reset(),this.terminal.reset()},hterm.VT.ESC.l=hterm.VT.ESC.m=hterm.VT.ignore,hterm.VT.ESC.n=function(){this.GL="G2"},hterm.VT.ESC.o=function(){this.GL="G3"},hterm.VT.ESC["|"]=function(){this.GR="G3"},hterm.VT.ESC["}"]=function(){this.GR="G2"},hterm.VT.ESC["~"]=function(){this.GR="G1"},hterm.VT.OSC[0]=function(parseState){this.terminal.setWindowTitle(parseState.args[0])},hterm.VT.OSC[2]=hterm.VT.OSC[0],hterm.VT.OSC[4]=function(parseState){for(var args=parseState.args[0].split(";"),pairCount=parseInt(args.length/2),colorPalette=this.terminal.getTextAttributes().colorPalette,responseArray=[],pairNumber=0;pairNumber<pairCount;++pairNumber){var colorIndex=parseInt(args[2*pairNumber]),colorValue=args[2*pairNumber+1];colorIndex>=colorPalette.length||("?"!=colorValue?(colorValue=lib.colors.x11ToCSS(colorValue))&&(colorPalette[colorIndex]=colorValue):(colorValue=lib.colors.rgbToX11(colorPalette[colorIndex]))&&responseArray.push(colorIndex+";"+colorValue))}responseArray.length&&this.terminal.io.sendString("]4;"+responseArray.join(";")+"")},hterm.VT.OSC[9]=function(parseState){hterm.notify({body:parseState.args[0]})},hterm.VT.OSC[10]=function(parseState){var args=parseState.args[0].split(";");if(args){var colorX11=lib.colors.x11ToCSS(args.shift());colorX11&&this.terminal.setForegroundColor(colorX11),0<args.length&&(parseState.args[0]=args.join(";"),hterm.VT.OSC[11].apply(this,[parseState]))}},hterm.VT.OSC[11]=function(parseState){var args=parseState.args[0].split(";");if(args){var colorX11=lib.colors.x11ToCSS(args.shift());colorX11&&this.terminal.setBackgroundColor(colorX11),0<args.length&&(parseState.args[0]=args.join(";"),hterm.VT.OSC[12].apply(this,[parseState]))}},hterm.VT.OSC[12]=function(parseState){var args=parseState.args[0].split(";");if(args){var colorX11=lib.colors.x11ToCSS(args.shift());colorX11&&this.terminal.setCursorColor(colorX11)}},hterm.VT.OSC[50]=function(parseState){var args=parseState.args[0].match(/CursorShape=(.)/i);if(args)switch(args[1]){case"1":this.terminal.setCursorShape(hterm.Terminal.cursorShape.BEAM);break;case"2":this.terminal.setCursorShape(hterm.Terminal.cursorShape.UNDERLINE);break;default:this.terminal.setCursorShape(hterm.Terminal.cursorShape.BLOCK)}else console.warn("Could not parse OSC 50 args: "+parseState.args[0])},hterm.VT.OSC[52]=function(parseState){var args=parseState.args[0].match(/^[cps01234567]*;(.*)/);if(args){var data=window.atob(args[1]);data&&this.terminal.copyStringToClipboard(this.decode(data))}},hterm.VT.OSC[777]=function(parseState){var ary;switch(parseState.args[0].split(";",1)[0]){case"notify":var title,message;(ary=parseState.args[0].match(/^[^;]+;([^;]*)(;([\s\S]*))?$/))&&(title=ary[1],message=ary[3]),hterm.notify({title:title,body:message});break;default:console.warn("Unknown urxvt module: "+parseState.args[0])}},hterm.VT.CSI["@"]=function(parseState){this.terminal.insertSpace(parseState.iarg(0,1))},hterm.VT.CSI.A=function(parseState){this.terminal.cursorUp(parseState.iarg(0,1))},hterm.VT.CSI.B=function(parseState){this.terminal.cursorDown(parseState.iarg(0,1))},hterm.VT.CSI.C=function(parseState){this.terminal.cursorRight(parseState.iarg(0,1))},hterm.VT.CSI.D=function(parseState){this.terminal.cursorLeft(parseState.iarg(0,1))},hterm.VT.CSI.E=function(parseState){this.terminal.cursorDown(parseState.iarg(0,1)),this.terminal.setCursorColumn(0)},hterm.VT.CSI.F=function(parseState){this.terminal.cursorUp(parseState.iarg(0,1)),this.terminal.setCursorColumn(0)},hterm.VT.CSI.G=function(parseState){this.terminal.setCursorColumn(parseState.iarg(0,1)-1)},hterm.VT.CSI.H=function(parseState){this.terminal.setCursorPosition(parseState.iarg(0,1)-1,parseState.iarg(1,1)-1)},hterm.VT.CSI.I=function(parseState){var count=parseState.iarg(0,1);count=lib.f.clamp(count,1,this.terminal.screenSize.width);for(var i=0;i<count;i++)this.terminal.forwardTabStop()},hterm.VT.CSI.J=hterm.VT.CSI["?J"]=function(parseState,code){var arg=parseState.args[0];arg&&0!=arg?1==arg?this.terminal.eraseAbove():2==arg?this.terminal.clear():3==arg&&this.terminal.clear():this.terminal.eraseBelow()},hterm.VT.CSI.K=hterm.VT.CSI["?K"]=function(parseState,code){var arg=parseState.args[0];arg&&0!=arg?1==arg?this.terminal.eraseToLeft():2==arg&&this.terminal.eraseLine():this.terminal.eraseToRight()},hterm.VT.CSI.L=function(parseState){this.terminal.insertLines(parseState.iarg(0,1))},hterm.VT.CSI.M=function(parseState){this.terminal.deleteLines(parseState.iarg(0,1))},hterm.VT.CSI.P=function(parseState){this.terminal.deleteChars(parseState.iarg(0,1))},hterm.VT.CSI.S=function(parseState){this.terminal.vtScrollUp(parseState.iarg(0,1))},hterm.VT.CSI.T=function(parseState){parseState.args.length<=1&&this.terminal.vtScrollDown(parseState.iarg(0,1))},hterm.VT.CSI[">T"]=hterm.VT.ignore,hterm.VT.CSI.X=function(parseState){this.terminal.eraseToRight(parseState.iarg(0,1))},hterm.VT.CSI.Z=function(parseState){var count=parseState.iarg(0,1);count=lib.f.clamp(count,1,this.terminal.screenSize.width);for(var i=0;i<count;i++)this.terminal.backwardTabStop()},hterm.VT.CSI["`"]=hterm.VT.CSI.G,hterm.VT.CSI.a=function(parseState){this.terminal.setCursorColumn(this.terminal.getCursorColumn()+parseState.iarg(0,1))},hterm.VT.CSI.b=hterm.VT.ignore,hterm.VT.CSI.c=function(parseState){parseState.args[0]&&0!=parseState.args[0]||this.terminal.io.sendString("[?1;2c")},hterm.VT.CSI[">c"]=function(parseState){this.terminal.io.sendString("[>0;256;0c")},hterm.VT.CSI.d=function(parseState){this.terminal.setAbsoluteCursorRow(parseState.iarg(0,1)-1)},hterm.VT.CSI.f=hterm.VT.CSI.H,hterm.VT.CSI.g=function(parseState){parseState.args[0]&&0!=parseState.args[0]?3==parseState.args[0]&&this.terminal.clearAllTabStops():this.terminal.clearTabStopAtCursor(!1)},hterm.VT.CSI.h=function(parseState){for(var i=0;i<parseState.args.length;i++)this.setANSIMode(parseState.args[i],!0)},hterm.VT.CSI["?h"]=function(parseState){for(var i=0;i<parseState.args.length;i++)this.setDECMode(parseState.args[i],!0)},hterm.VT.CSI.i=hterm.VT.CSI["?i"]=hterm.VT.ignore,hterm.VT.CSI.l=function(parseState){for(var i=0;i<parseState.args.length;i++)this.setANSIMode(parseState.args[i],!1)},hterm.VT.CSI["?l"]=function(parseState){for(var i=0;i<parseState.args.length;i++)this.setDECMode(parseState.args[i],!1)},hterm.VT.CSI.m=function(parseState){function get256(i){return parseState.args.length<i+2||5!=parseState.args[i+1]?null:parseState.iarg(i+2,0)}function getTrueColor(i){return parseState.args.length<i+5||2!=parseState.args[i+1]?null:"rgb("+parseState.iarg(i+2,0)+" ,"+parseState.iarg(i+3,0)+" ,"+parseState.iarg(i+4,0)+")"}var attrs=this.terminal.getTextAttributes();if(parseState.args.length){for(var i=0;i<parseState.args.length;i++){var arg=parseState.iarg(i,0);if(arg<30)0==arg?attrs.reset():1==arg?attrs.bold=!0:2==arg?attrs.faint=!0:3==arg?attrs.italic=!0:4==arg?attrs.underline=!0:5==arg?attrs.blink=!0:7==arg?attrs.inverse=!0:8==arg?attrs.invisible=!0:9==arg?attrs.strikethrough=!0:22==arg?(attrs.bold=!1,attrs.faint=!1):23==arg?attrs.italic=!1:24==arg?attrs.underline=!1:25==arg?attrs.blink=!1:27==arg?attrs.inverse=!1:28==arg?attrs.invisible=!1:29==arg&&(attrs.strikethrough=!1);else if(arg<50)if(arg<38)attrs.foregroundSource=arg-30;else if(38==arg){if(null!=(trueColor=getTrueColor(i)))attrs.foregroundSource=attrs.SRC_RGB,attrs.foreground=trueColor,i+=5;else{if(null==(c=get256(i)))break;if(i+=2,c>=attrs.colorPalette.length)continue;attrs.foregroundSource=c}}else if(39==arg)attrs.foregroundSource=attrs.SRC_DEFAULT;else if(arg<48)attrs.backgroundSource=arg-40;else if(48==arg){var trueColor;if(null!=(trueColor=getTrueColor(i)))attrs.backgroundSource=attrs.SRC_RGB,attrs.background=trueColor,i+=5;else{var c;if(null==(c=get256(i)))break;if(i+=2,c>=attrs.colorPalette.length)continue;attrs.backgroundSource=c}}else attrs.backgroundSource=attrs.SRC_DEFAULT;else 90<=arg&&arg<=97?attrs.foregroundSource=arg-90+8:100<=arg&&arg<=107&&(attrs.backgroundSource=arg-100+8)}attrs.setDefaults(this.terminal.getForegroundColor(),this.terminal.getBackgroundColor())}else attrs.reset()},hterm.VT.CSI[">m"]=hterm.VT.ignore,hterm.VT.CSI.n=function(parseState){if(5==parseState.args[0])this.terminal.io.sendString("0n");else if(6==parseState.args[0]){var row=this.terminal.getCursorRow()+1,col=this.terminal.getCursorColumn()+1;this.terminal.io.sendString("["+row+";"+col+"R")}},hterm.VT.CSI[">n"]=hterm.VT.ignore,hterm.VT.CSI["?n"]=function(parseState){if(6==parseState.args[0]){var row=this.terminal.getCursorRow()+1,col=this.terminal.getCursorColumn()+1;this.terminal.io.sendString("["+row+";"+col+"R")}else 15==parseState.args[0]?this.terminal.io.sendString("[?11n"):25==parseState.args[0]?this.terminal.io.sendString("[?21n"):26==parseState.args[0]?this.terminal.io.sendString("[?12;1;0;0n"):53==parseState.args[0]&&this.terminal.io.sendString("[?50n")},hterm.VT.CSI[">p"]=hterm.VT.ignore,hterm.VT.CSI["!p"]=function(){this.reset(),this.terminal.softReset()},hterm.VT.CSI.$p=hterm.VT.ignore,hterm.VT.CSI["?$p"]=hterm.VT.ignore,hterm.VT.CSI['"p']=hterm.VT.ignore,hterm.VT.CSI.q=hterm.VT.ignore,hterm.VT.CSI[" q"]=function(parseState){var arg=parseState.args[0];0==arg||1==arg?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.BLOCK),this.terminal.setCursorBlink(!0)):2==arg?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.BLOCK),this.terminal.setCursorBlink(!1)):3==arg?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.UNDERLINE),this.terminal.setCursorBlink(!0)):4==arg?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.UNDERLINE),this.terminal.setCursorBlink(!1)):5==arg?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.BEAM),this.terminal.setCursorBlink(!0)):6==arg?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.BEAM),this.terminal.setCursorBlink(!1)):console.warn("Unknown cursor style: "+arg)},hterm.VT.CSI['"q']=hterm.VT.ignore,hterm.VT.CSI.r=function(parseState){var args=parseState.args,scrollTop=args[0]?parseInt(args[0],10)-1:null,scrollBottom=args[1]?parseInt(args[1],10)-1:null;this.terminal.setVTScrollRegion(scrollTop,scrollBottom),this.terminal.setCursorPosition(0,0)},hterm.VT.CSI["?r"]=hterm.VT.ignore,hterm.VT.CSI.$r=hterm.VT.ignore,hterm.VT.CSI.s=function(){this.savedState_.save()},hterm.VT.CSI["?s"]=hterm.VT.ignore,hterm.VT.CSI.t=hterm.VT.ignore,hterm.VT.CSI.$t=hterm.VT.ignore,hterm.VT.CSI[">t"]=hterm.VT.ignore,hterm.VT.CSI[" t"]=hterm.VT.ignore,hterm.VT.CSI.u=function(){this.savedState_.restore()},hterm.VT.CSI[" u"]=hterm.VT.ignore,hterm.VT.CSI.$v=hterm.VT.ignore,hterm.VT.CSI["'w"]=hterm.VT.ignore,hterm.VT.CSI.x=hterm.VT.ignore,hterm.VT.CSI["*x"]=hterm.VT.ignore,hterm.VT.CSI.$x=hterm.VT.ignore,hterm.VT.CSI.z=function(parseState){if(!(parseState.args.length<1)){var arg=parseState.args[0];if(0==arg){if(parseState.args.length<2)return;this.terminal.getTextAttributes().tileData=parseState.args[1]}else 1==arg&&(this.terminal.getTextAttributes().tileData=null)}},hterm.VT.CSI["'z"]=hterm.VT.ignore,hterm.VT.CSI.$z=hterm.VT.ignore,hterm.VT.CSI["'{"]=hterm.VT.ignore,hterm.VT.CSI["'|"]=hterm.VT.ignore,hterm.VT.CSI["'}"]=hterm.VT.ignore,hterm.VT.CSI["'~"]=hterm.VT.ignore,lib.rtdep("lib.f"),hterm.VT.CharacterMap=function(description,glmap){this.description=description,this.GL=null,this.glmapBase_=glmap,this.sync_()},hterm.VT.CharacterMap.prototype.sync_=function(opt_glmap){var _this6=this;if(!this.glmapBase_&&!opt_glmap)return this.GL=null,delete this.glmap_,void delete this.glre_;this.glmap_=opt_glmap?Object.assign({},this.glmapBase_,opt_glmap):this.glmapBase_;var glchars=Object.keys(this.glmap_).map(function(key){return"\\x"+lib.f.zpad(key.charCodeAt(0).toString(16))});this.glre_=new RegExp("["+glchars.join("")+"]","g"),this.GL=function(str){return str.replace(_this6.glre_,function(ch){return _this6.glmap_[ch]})}},hterm.VT.CharacterMap.prototype.reset=function(){this.glmap_!==this.glmapBase_&&this.sync_()},hterm.VT.CharacterMap.prototype.setOverrides=function(glmap){this.sync_(glmap)},hterm.VT.CharacterMap.prototype.clone=function(){var map=new hterm.VT.CharacterMap(this.description,this.glmapBase_);return this.glmap_!==this.glmapBase_&&map.setOverrides(this.glmap_),map},hterm.VT.CharacterMaps=function(){this.maps_=hterm.VT.CharacterMaps.DefaultMaps,this.mapsBase_=this.maps_},hterm.VT.CharacterMaps.prototype.getMap=function(name){return this.maps_.hasOwnProperty(name)?this.maps_[name]:void 0},hterm.VT.CharacterMaps.prototype.addMap=function(name,map){this.maps_===this.mapsBase_&&(this.maps_=Object.assign({},this.mapsBase_)),this.maps_[name]=map},hterm.VT.CharacterMaps.prototype.reset=function(){this.maps_!==hterm.VT.CharacterMaps.DefaultMaps&&(this.maps_=hterm.VT.CharacterMaps.DefaultMaps)},hterm.VT.CharacterMaps.prototype.setOverrides=function(maps){for(var name in this.maps_===this.mapsBase_&&(this.maps_=Object.assign({},this.mapsBase_)),maps){var map=this.getMap(name);void 0!==map?(this.maps_[name]=map.clone(),this.maps_[name].setOverrides(maps[name])):this.addMap(name,new hterm.VT.CharacterMap("user "+name,maps[name]))}},hterm.VT.CharacterMaps.DefaultMaps={},hterm.VT.CharacterMaps.DefaultMaps[0]=new hterm.VT.CharacterMap("graphic",{"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"}),hterm.VT.CharacterMaps.DefaultMaps.A=new hterm.VT.CharacterMap("british",{"#":"£"}),hterm.VT.CharacterMaps.DefaultMaps.B=new hterm.VT.CharacterMap("us",null),hterm.VT.CharacterMaps.DefaultMaps[4]=new hterm.VT.CharacterMap("dutch",{"#":"£","@":"¾","[":"Ĳ","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"}),hterm.VT.CharacterMaps.DefaultMaps.C=hterm.VT.CharacterMaps.DefaultMaps[5]=new hterm.VT.CharacterMap("finnish",{"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"}),hterm.VT.CharacterMaps.DefaultMaps.R=new hterm.VT.CharacterMap("french",{"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"}),hterm.VT.CharacterMaps.DefaultMaps.Q=new hterm.VT.CharacterMap("french canadian",{"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"}),hterm.VT.CharacterMaps.DefaultMaps.K=new hterm.VT.CharacterMap("german",{"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"}),hterm.VT.CharacterMaps.DefaultMaps.Y=new hterm.VT.CharacterMap("italian",{"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"}),hterm.VT.CharacterMaps.DefaultMaps.E=hterm.VT.CharacterMaps.DefaultMaps[6]=new hterm.VT.CharacterMap("norwegian/danish",{"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"}),hterm.VT.CharacterMaps.DefaultMaps.Z=new hterm.VT.CharacterMap("spanish",{"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"}),hterm.VT.CharacterMaps.DefaultMaps[7]=hterm.VT.CharacterMaps.DefaultMaps.H=new hterm.VT.CharacterMap("swedish",{"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"}),hterm.VT.CharacterMaps.DefaultMaps["="]=new hterm.VT.CharacterMap("swiss",{"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}),lib.resource.add("hterm/audio/bell","audio/ogg;base64","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"),lib.resource.add("hterm/images/icon-96","image/png;base64","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"),lib.resource.add("hterm/concat/date","text/plain","Sun, 22 Oct 2017 11:00:51 +0000"),lib.resource.add("hterm/changelog/version","text/plain","1.73"),lib.resource.add("hterm/changelog/date","text/plain","2017-10-16"),lib.resource.add("hterm/git/HEAD","text/plain","git rev-parse HEAD");var socket=io(location.origin,{path:"/wetty/socket.io"}),term=void 0,buf="",Wetty=function(){function Wetty(argv){_classCallCheck(this,Wetty),this.argv_=argv,this.io=null,this.pid_=-1}return _createClass(Wetty,[{key:"run",value:function run(){this.io=this.argv_.io.push(),this.io.onVTKeystroke=this.sendString_.bind(this),this.io.sendString=this.sendString_.bind(this),this.io.onTerminalResize=this.onTerminalResize.bind(this)}},{key:"sendString_",value:function sendString_(str){socket.emit("input",str)}},{key:"onTerminalResize",value:function onTerminalResize(col,row){socket.emit("resize",{col:col,row:row})}}]),Wetty}();function handler(e){return e.returnValue="Are you sure?",e.returnValue}socket.on("connect",function(){window.addEventListener("beforeunload",handler,!1),lib.init(function(){hterm.defaultStorage=new lib.Storage.Local,term=new hterm.Terminal,(window.term=term).decorate(document.getElementById("terminal")),term.setCursorPosition(0,0),term.setCursorVisible(!0),term.prefs_.set("ctrl-c-copy",!0),term.prefs_.set("ctrl-v-paste",!0),term.prefs_.set("use-default-window-copy",!0),term.prefs_.set("send-encoding","raw"),term.prefs_.set("receive-encoding","raw"),term.prefs_.set("font-size",14),term.scrollPort_.screen_.setAttribute("spellcheck","false"),term.scrollPort_.screen_.setAttribute("autocorrect","false"),term.scrollPort_.screen_.setAttribute("autocomplete","false"),term.scrollPort_.screen_.setAttribute("contenteditable","false"),term.runCommandClass(Wetty,document.location.hash.substr(1)),socket.emit("resize",{col:term.screenSize.width,row:term.screenSize.height}),buf&&""!==buf&&(term.io.writeUTF8(buf),buf="")})}),socket.on("output",function(data){term?term.io.writeUTF8(data):buf+=data}),socket.on("logout",function(){window.removeEventListener("beforeunload",handler,!1)}),socket.on("disconnect",function(){window.removeEventListener("beforeunload",handler,!1)});